commit 1b197507edd415d889c970d561b38c142eda5808
Author: Chonggang Xu <xuchongang@gmail.com>
Date:   Thu Feb 1 15:51:38 2018 -0700

    add a comment line for testing

commit bdd1dffc1341b5903c623ecadb6219477bcc0bd6
Author: Chonggang Xu <xuchongang@gmail.com>
Date:   Thu Feb 1 15:49:57 2018 -0700

    turn off d13 debug and fix a bug for d13 mortality when there is no growth

commit f5063623bba9ea8a9a36352fcd4936255df6b0bc
Author: Chonggang Xu <xuchongang@gmail.com>
Date:   Thu Feb 1 15:47:59 2018 -0700

    turn off debug for d13

commit c430bac814eb2a0700db48ff91c7ac9c04d15dcb
Author: Chonggang Xu <xuchongang@gmail.com>
Date:   Wed Jan 3 17:55:05 2018 -0700

    fix error in D13C estimation

commit cd623b2e2619c1b5e56ad51e00c2db4790698fb9
Author: Chonggang Xu <xuchongang@gmail.com>
Date:   Wed Jan 3 17:35:10 2018 -0700

    some trivial change for d13C simulations

commit f03b10539d95f37581b368e1632691a8fbb0c79a
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Sat Dec 23 21:50:03 2017 -0700

    export more variables

commit 06be24e03a08a35b4046f250faa09c2797e73cdc
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Sat Dec 23 20:36:49 2017 -0700

    turn off the inclusion of d13cmort in total mortality calculation

commit 3ca9c21cc83e78d5e778e03ac61235f8ede9c149
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Sat Dec 23 18:12:18 2017 -0700

    output d13c related mortality via FatesHistoryInterface

commit a23651c807cdc7e3320b160e9bdca4209172d31b
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Sat Dec 23 16:36:59 2017 -0700

    fix name for current cohort

commit 236109f444b24c74800f808dc165cc0006de5222
Author: Chonggang Xu <xuchongang@gmail.com>
Date:   Thu Dec 21 16:21:52 2017 -0700

    several error fixing in d13C calculation

commit d497733433f33bbf7c8fa7adfdce56ccea6d95b8
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Thu Dec 21 01:10:58 2017 -0700

    fix erros in EDGrouthFunctionsMod.F90
    
    - define variables before execution code
    - use `fates_log()` instead of `iulog`

commit 4573c86f43235598cd5934b4432b64abe0af0c48
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Tue Dec 19 00:41:41 2017 -0700

    accumulate c13disc_acc from hourly to daily

commit 4e173948e54876302b3c0fc7c101fb12684979da
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Tue Dec 19 00:36:39 2017 -0700

    calc d13cmort in the `mortality_rates` fuction

commit 53479d5f47bae6cbb5a486694a31bb9b6ae2b095
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Tue Dec 19 00:16:40 2017 -0700

    let EDPhysiologyMod know d13cmort

commit f6bd7d329a9fdffba876b92c5c0b15c776521498
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Fri Dec 8 01:17:31 2017 -0700

    unpack c13 discrimation to cohort level

commit 6d8f2008583923a52ebf13f434718acbc26751d7
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Fri Dec 8 00:47:40 2017 -0700

    add calculation of c13disc_z in photosynthesis

commit a119fc3e4779ed1c2d246263c9ccc814ac5ee293
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Wed Dec 6 00:28:13 2017 -0700

    start adding d13c calculation in photosynthesis calcualtion

commit 6918fe38c4b832cebf83960101d3a4b6332b2c32
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Wed Dec 6 00:10:45 2017 -0700

    update EDPatchDynamicsMod.F90

commit 49982f06928c300b848973b7ed76d46f82012ff0
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Tue Dec 5 00:36:15 2017 -0700

    add d13c calculation support into EDCohortDynamicsMod
    
    - nan_cohort
    - zero_cohort
    - fuse_cohort
    - copy_cohort

commit 0d4e61d1d3feded1a66bc8eb251cf1057ffff6a8
Author: Hang ZHOU <joeyzhou1984@gmail.com>
Date:   Tue Dec 5 00:22:44 2017 -0700

    add d13c related variables to EDTypesMod

commit 6660c71c257ff200af6bee389ec653d300594536
Merge: 87a6385 e06869c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Oct 10 13:35:02 2017 -0700

    Merge pull request #288 from ckoven/flexible_history_bins
    
    runtime-specified history bins for size- and age- resolved output

commit e06869c2b33388f249b936c45c4c1e351d81e9eb
Merge: 7ea9a3a 87a6385
Author: ckoven <ckoven@gmail.com>
Date:   Tue Oct 10 12:10:36 2017 -0600

    merged master

commit 87a6385177f2ead4d74b38006dfb0342dbc25d12
Merge: b6b3a86 87c0fd7
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Oct 10 11:07:45 2017 -0700

    Merge pull request #287 from rgknox/rgknox-slascaler-fix
    
    removed slascaler and various fates parameter changes

commit 7ea9a3a24308a3b358ad4d37be1c0700fd1db291
Author: ckoven <ckoven@gmail.com>
Date:   Mon Oct 9 18:10:20 2017 -0600

    fixed typo in comment

commit 2a451d00006f6e78bc049f0182ee022ef45c8bf2
Author: ckoven <ckoven@gmail.com>
Date:   Mon Oct 9 18:05:29 2017 -0600

    some updates to simplify variable names

commit 510c4a04a49632fe0b94b20d9075b4c47a3e350c
Author: ckoven <ckoven@gmail.com>
Date:   Mon Oct 9 11:50:38 2017 -0600

    runtime bugfixes and addition of some checks to the flexible history binning code

commit 1f0904b37a5fa6d5a99e3eada9c0b1769c2b683f
Author: ckoven <ckoven@gmail.com>
Date:   Sun Oct 8 22:41:22 2017 -0600

    first pass at pulling out size & age bin edges for history writes to parameter file

commit 87c0fd7d1e43e415a89014daf0f80495286c4f2f
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Oct 6 15:03:19 2017 -0700

    Changed some parameter names to add clarity, allom_dbh_maxheight dbh_repro_threshold.

commit e4be1021eb2d2621ea669c6a6d65afdade600ea6
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Oct 4 17:27:51 2017 -0700

    Added and modified new parameter file variables.

commit d75b48c493227018aaec94a58f6700f25411f53e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Oct 3 14:20:06 2017 -0700

    Removal of slascalar from leaf biomass allometry.

commit b6b3a8662d5769f7437be8a5e3dc3b324e7065c2
Merge: ec63421 4f6a342
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Oct 6 14:53:19 2017 -0700

    Merge pull request #286 from rgknox/rgknox-threadfix
    
    bug fixes to multi-threading

commit ec63421ede95b67b1e95782d32659fa36a00330a
Merge: 2c6f697 2d63622
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Oct 6 14:44:39 2017 -0700

    Merge pull request #284 from rgknox/rgknox-logging-nl
    
    logging namelist switch

commit 2c6f6977b80f938bbd42c0d0f41dd2c2721cff7c
Merge: d5581b0 06e3c88
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Oct 6 14:43:08 2017 -0700

    Merge pull request #279 from ckoven/sitelevelspread
    
    Modified crown allometric spread logic

commit 4f6a3429b2d316b3a7b2ab854931af9f1055df6c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Oct 5 15:57:04 2017 -0700

    bug fixes: dimension structure incorrectly defined as a class instead of type, unused hvar pointers and weird association statement.

commit 2d63622e9b513c5731719d166119a1dc9becc264
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Oct 4 12:55:09 2017 -0700

    logging NL switch, syntax fixes.

commit aea25a4118d86932c829a7061290b92942bb3ea8
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Oct 4 12:45:01 2017 -0700

    Turned on the NL switch controlling logging.

commit 06e3c885ee88d3b298ef758fda21a998e5b3564c
Author: ckoven <ckoven@gmail.com>
Date:   Wed Oct 4 12:51:44 2017 -0600

    pulled crown area : dbh coefficient out of exponent parentheses, and changed the name of arealayer var in canopy_spread subroutine

commit 6d34a0c894e869e044f27c1fbfd06b7058751e71
Merge: 7c06feb d5581b0
Author: ckoven <ckoven@gmail.com>
Date:   Wed Oct 4 12:09:42 2017 -0600

    merged current master

commit d5581b0261f1e8107d8d0ef75518de68e9380381
Merge: 9a641cb 54565c6
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Oct 2 21:37:01 2017 -0700

    Merge pull request #282 from rgknox/rgknox-cbalance-check
    
    carbon balance fix

commit 54565c64e46ff31fde0da25400b6d13c77c82508
Merge: 479532c 9a641cb
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Oct 2 16:09:55 2017 -0600

    Brought carbon balance checks up to master, resolved merge conflict .

commit 7c06febbdd23e4254b711e668a0bf71c04fd6575
Author: ckoven <ckoven@gmail.com>
Date:   Mon Oct 2 15:35:45 2017 -0600

    removed pi-like term from the crown allometry calculation, and moving it into the allom_d2ca_coefficient parameters

commit 69ccb59cdc6777e8320deed93008e9fdf776d0e0
Merge: bd0b6c2 75016e1
Author: ckoven <ckoven@gmail.com>
Date:   Mon Oct 2 11:31:48 2017 -0600

    merged branch with biomass by patch age dimension

commit bd0b6c23ecf24bcdff15700b907efd7091bb34b2
Merge: cba6a07 9a641cb
Author: ckoven <ckoven@gmail.com>
Date:   Mon Oct 2 11:31:06 2017 -0600

    merged master branch

commit 9a641cbaccb2bf239b2918eca6be9932d05160f4
Merge: 1a399f3 7cb032a
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 29 12:26:11 2017 -0700

    Merge pull request #273 from ckoven/koven_prescribed_physiology_licensed
    
    Addition of 'Prescribed Physiology Mode' code

commit 75016e101fc36f2b578aca8d9fce203f07841eb5
Author: ckoven <ckoven@gmail.com>
Date:   Thu Sep 28 15:12:54 2017 -0600

    unit fix on new biomass per patch age variable

commit 479532c92a4164dc0ae1bbd4012fe5769902ff95
Author: Ryan Knox <rgknox@gmail.com>
Date:   Thu Sep 28 13:25:50 2017 -0700

    Carbon balance bug-fix.  Above ground biomass for non-bole pools is once again being sent to the litter flux pool during non-disturbance mortality.

commit e372f3a8e45a8fd0c7175c99ed0004da8015a2ce
Author: ckoven <ckoven@gmail.com>
Date:   Thu Sep 28 14:23:43 2017 -0600

    added new variable to track total biomass within each patch age bin

commit cba6a07eb1f6eb32d6ec7c4df4a39e87f821b7b9
Author: ckoven <ckoven@gmail.com>
Date:   Thu Sep 28 11:43:19 2017 -0600

    fixed a bug in the restart code

commit 7cb032a994a15028c3cf16152450dcf6df7ab2c7
Merge: 33d959c 1a399f3
Author: ckoven <ckoven@gmail.com>
Date:   Wed Sep 27 11:07:41 2017 -0600

    merged in current master and resolved conflicts, also cleaned up logicals to use itrue and ifalse

commit 9b64aeb8af9918eff9e76d0d77d6e106a69fc6e7
Author: ckoven <ckoven@gmail.com>
Date:   Tue Sep 26 21:52:43 2017 -0600

    bugfixes and cleanup on prior

commit 1788055402eec6cb75f577c4dff84d884dda3ee0
Merge: 206df52 1a399f3
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Tue Sep 26 17:44:56 2017 -0700

    merged current master and resolved conflicts

commit 206df5272e7392d8cf12a18c4c7d12c49afa4980
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Tue Sep 26 17:42:50 2017 -0700

    change to canopy spread logic; move to site level and also make a pft trait

commit 1a399f388f14c4b9a91d3d4fb8a2b830c4722792
Merge: 3dcd5d1 1b02c65
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Sep 26 10:54:10 2017 -0700

    Merge pull request #264 from xuyi02/yi-logging-v3
    
    Selective logging codes

commit 1b02c65187cb57a37c8caf7ca9aa843c0c10c61c
Merge: 13178d7 30a010b
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Mon Sep 25 18:21:45 2017 -0700

    Merge pull request #8 from rgknox/yi-logging-v3
    
    Yi logging v3

commit 3dcd5d14aaf7cc1a3f8a2b37bc47165588d4474e
Merge: c8e6da5 c00c2da
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Sep 25 13:17:09 2017 -0700

    Merge pull request #275 from rgknox/ncar-ngeet-release-1
    
    ncar compatible previous history merger

commit 30a010b328632bbb0eea0cbb3c18b10b510d8fd5
Merge: 13178d7 c8e6da5
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 22 17:39:10 2017 -0600

    Conflict resolution on merge with master. Updated carbon balance error report.

commit c00c2dacf7d7c53fca47b7fa5c24515169b0cfcc
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 22 16:25:55 2017 -0600

    Removing redundant zeroing of litter fluxes in patch creation.

commit 57cf6c5436fb128bb63fcba01eb8e14426c54561
Merge: e0249ae c8e6da5
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 22 15:16:09 2017 -0600

    Merge branch 'master' into ncar-ngeet-release-3

commit 13178d7eeda0933f805904e9e6590849e6040680
Merge: e1fe601 6d210ea
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Fri Sep 22 12:33:04 2017 -0700

    Merge pull request #7 from rgknox/yi-logging-v4
    
    Yi logging v4

commit 6d210ea5cee7e536bd7d6b04312b16f5c041c3a4
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 22 12:17:09 2017 -0700

    Added size filter for collateral damage mortality.

commit e1fe60134df0e27d609692e7392eda23fbaf2ac5
Merge: baa6eb6 84ab4d6
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Thu Sep 21 17:12:55 2017 -0700

    Merge pull request #6 from rgknox/yi-logging-v4
    
    more revisions on logging mortality

commit c55cac52d1888922d808478c81e688644f3854f8
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Sep 20 16:20:42 2017 -0700

    Some minor updates to code comments on logging

commit 84ab4d6f489690fc6126c074b37abdf661aff8f5
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Sep 20 14:18:22 2017 -0700

    Fixed typo, was incorrectly zeroing fire disturbance instead of logging.

commit 2210b36a9a2fe8ff1c780e8bff3727164373550b
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Sep 20 12:28:09 2017 -0700

    Fix: forgot to close if structure when filtering woody and non-woody understory during litter fluxes for logging disturbance

commit a95915cc02d748f388a50217b156941bbafb4718
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Sep 20 12:24:01 2017 -0700

    Various improvements to syntax in logging litterflux.  Corresponded with Yi Xu and compared fixes to logging litter fluxes, showed agreement in our approach.  Yis fixes reminded me to add a filter, where woody understory plants have different mortality than understory grasses, during logging disturbance.

commit c4b92b979789c4f76ec55594c39a9d58ccb7c39b
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Sep 19 18:20:45 2017 -0700

    More changes towards rectifying carbon balance with logging.

commit 89231cfcb012996e57c8bad86981af55f153e74f
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Sep 19 11:55:31 2017 -0700

    Splitting out litter flux in logging to be handled for disturbance and impacts separate from other mortality, partially complete.

commit c8e6da573f31763685dca8b78c44d640fefa85a1
Merge: 0115fbc 9cb0d2e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Sep 18 17:14:05 2017 -0700

    Merge pull request #271 from rgknox/rgknox-test-layering
    
    bugfix on understory demotion

commit f3dc372c05ec17802b89ab5ce353e306c150e542
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Sep 18 16:08:12 2017 -0700

    Partial progress on rectifying mortality/disturbance litter fluxes and carbon balance.

commit d1e64b5cce2e014fedb780019bc3a5c2bcc5f3aa
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Sep 18 13:22:36 2017 -0700

    Mostly debugging efforts to understand carbon imbalances.

commit 9cb0d2e24e44b259da188b06b00cebbaaccf86a2
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 15 17:29:06 2017 -0700

    Removed unnecessary comment.

commit df47cfa2fb449614ce559a16f268548368f703ab
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 15 17:28:00 2017 -0700

    Added some functions for numerical checks.

commit bf5af9319fbb6ee4a8eee9bd93f7cb50ff9b8d11
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Sep 14 17:12:08 2017 -0700

    Minor fix: when disturbance rate is zero across all modes, a default must be chosen.

commit 21a91c9d26f233dfeea1409f65de67959d1c0a80
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Sep 14 16:50:48 2017 -0700

    Second pass through enabling survivorship in logging disturbed patches.  Also allowed logging mortality set on understory plants to be retained and impact number densities.

commit e0249ae6fa1463fe164d812629b4dfb11defea88
Merge: 1f82754 aace108
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Sep 14 11:29:43 2017 -0700

    Merging tag sci.1.3.0_api.1.0.0 into ncar release branch, trivial conflict resolution.

commit 800e502acf58600f4f468acb708a3972edc911d0
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Sep 11 17:34:31 2017 -0700

    Put an oft warned message about a biomass check behind a debug wall.

commit 40bc7e88e574ae7f1bfc8f419711132b6b4f4616
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Sep 11 17:34:01 2017 -0700

    Wrapped demotion, fusion, promotion and fusion within one checking loop in canopy_structure.

commit 33d959cd0bc969ca2c5948ac7b3c2d97580577f5
Author: ckoven <ckoven@gmail.com>
Date:   Mon Sep 11 11:02:18 2017 -0700

    removed code changes that were for size and age bin resolution from this branch, also some whitespace cleanup

commit e66a0a3d7fbbdfe6eb442ba4279fdb3cb0ed39e7
Merge: 0c33bb4 0115fbc
Author: ckoven <ckoven@gmail.com>
Date:   Mon Sep 11 10:19:15 2017 -0700

    merged in most recent master and resolved conflicts

commit 9432dd585c217c903fbd3626ee53c0d5f309914d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Sep 7 20:36:09 2017 -0600

    Removed ieee numerical library call, for compatibilty purposes.  Changed nan checks to self equivalence.

commit 7b997f6e19d2b7c049d9947a49b4f958cc154605
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Sep 7 20:30:55 2017 -0600

    Removed redundant parameter entries.

commit 949a66c6ad5931ddb0d644d68f133bcc5e15b9f4
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Sep 6 15:43:12 2017 -0700

    potential bug-fix to incorrect assesment of canopy areas gained and lost during demotion of the understory layer.

commit bd417ad52846aff2db502b00842e5012754b3215
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Sep 5 13:51:25 2017 -0700

    Added more reporting and loop checking to canopy structure.

commit d72f1d8fc422fd5932a4e332cf1c424f2be10cd1
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Sep 5 13:32:51 2017 -0700

    Added debug flags to canopy structure code.

commit 09bde0217932d900231d3b3bd572904b46c2dfb7
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 1 11:49:04 2017 -0700

    Some partial changes towards addressing survivorship with logging.

commit baa6eb6f84f31927494e832d19cc3a8ac46647fe
Merge: 65bd080 90d1ebe
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Wed Aug 30 23:46:48 2017 -0700

    Merge pull request #5 from rgknox/yi-logging-v3
    
    removed unused patch logging variables, initialized site logging variables

commit 90d1ebe317109b4b471257030a12449d842533b8
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Aug 30 19:36:31 2017 -0700

    Removed unused patch logging variables, added initializations for the site level logging variables and products.

commit 65bd080fdc0f88c50d46d3e94031c55d2bcf8b0a
Merge: 48b01dd 113fd8f
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Mon Aug 28 16:17:04 2017 -0700

    Merge pull request #4 from rgknox/yi-logging-v3
    
    Added disturbance index names and partial addition of logging NL entry

commit 113fd8f4f7ff591faf2fdb0ae6a3f82cf7f7169e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 28 15:44:09 2017 -0700

    Added disturbance index names

commit 0c33bb438cb4fad7e6e17607586c1277065da96b
Merge: 1caf2e6 cdd1f73
Author: ckoven <ckoven@gmail.com>
Date:   Mon Aug 28 15:17:45 2017 -0700

    first attempt to merge to merge master into prescribed_physiology branch

commit 48b01dd5e39cc8dec3a797ea44d563f0ad7d6d2f
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Thu Aug 24 15:46:22 2017 -0700

    Update FatesHistoryInterfaceMod.F90

commit 1f82754c74f52f6677b0c1215a2f3bcb1ec56a63
Merge: 8d92b7c 47fdb33
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Thu Aug 24 14:55:57 2017 -0700

    test of merging ncar/fates-release tag and ngeet/fates 8d92b7c

commit 68aba44619d5220446b962f40dec59fe348e80ec
Merge: f4a1b7b 6a7ddfe
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Mon Aug 21 14:49:38 2017 -0700

    Merge pull request #3 from rgknox/yi-logging-v3
    
    logging parameters and refactors

commit 6a7ddfe2dd97fe05af7308bb2b4c841fe6c04e75
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Sat Aug 19 14:41:01 2017 -0700

    Update FatesHistoryInterfaceMod.F90
    
    updating code format for hio_m7_si_scpf

commit 0e1fc0d3cd70c57a44e6f6ca965b69c554d023c8
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Sat Aug 19 14:15:25 2017 -0700

    Update EDPatchDynamicsMod.F90

commit 63471c4b207ad554a873864ae133956a3f056928
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Sat Aug 19 14:12:59 2017 -0700

    Update EDPatchDynamicsMod.F90

commit f9a5719b966d38105c56d942dd4264c0b987f2f1
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Sat Aug 19 13:48:36 2017 -0700

    Update EDLoggingMortalityMod.F90
    
    formatting codes

commit a5be480011389f4ab20d83f80ea2d0ca341a5f45
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Fri Aug 18 17:59:27 2017 -0700

    Update EDLoggingMortalityMod.F90

commit 22e4ecbafdb8649baacb3908ba6602f9e6d4ca60
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Fri Aug 18 17:01:00 2017 -0700

    update some comments

commit 920370cc48afd3a34fbc821b9a36212124b3b5fa
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 17 17:58:35 2017 -0700

    Fixed event code time calculation and added a log message when events occur.

commit e5ef57d6c8ef86ae1cc657f6b3a3caf29c55d295
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 17 17:20:25 2017 -0700

    Integrated new logging fates_params into the Yi s logging code.  Did some code cleaning.

commit e6da4b0af8b27ff62b2f38329f1d4e6219720357
Merge: 509b904 0115fbc
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 17 14:10:59 2017 -0700

    Conflict resolutions, merging logging with master.

commit 509b90496f70f16427b29955c91a5d28c6c0425a
Merge: f4a1b7b cdd1f73
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 17 11:54:10 2017 -0700

    Resolved merge conflict from Yis logging branch and master.

commit 0115fbc0f8cc5690208865132bc5648c857cfe48
Merge: cdd1f73 59c7c8d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 17 11:39:53 2017 -0700

    Merge pull request #262 from rgknox/rgknox-interface-dynamics-numpft
    
    dynamic numpft, dimension interface, removal of edecophyscon

commit 59c7c8d038ee97d383f2a76c07872f99e5afd1f1
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Aug 15 17:12:09 2017 -0700

    Removal of deprecated parameter structure EDecophyscon

commit 4667f15c5db7d143f82745dfd1684787015fcf36
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Aug 15 16:27:11 2017 -0700

    Added the passing of the hosts cap on how many patches it can accomodate.

commit da330551badd5539c773c4cfb8d44233b38e7b85
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Aug 15 15:23:01 2017 -0700

    Some small modifications on zeroing out some static arrays with pft indices. Exending the zeroing range to include maxpft instead of numpft where appropriate.

commit a12d2f8233ff5e91c492296f287eba110cbc0b55
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 14 19:13:31 2017 -0700

    Removed static numpft_ed from FATES. First pass and check of removal.  For static allocations, we now use maxpft exclusively.  A check exists to see if the dynamic numpft is lower than max.  All loops are now on numpft (dynamic parameter in FatesInterfaceMod).

commit cdd1f73111e766d1edef29bc8a68df0819e9cae7
Merge: 879e173 463c8f0
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 14 17:06:54 2017 -0700

    Merge pull request #240 from rgknox/rgknox-params-numpft-inventory
    
    updated default parameter file addition of a new variable

commit 91f2078f1593ece6ddc7e55e171519590a3b8225
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Jul 31 13:21:08 2017 -0700

    Removed protected status from dimension mapping tables in FatesInterface, for some reason it was confusing as an argument passed to nc_io routines.

commit 7404be796ba3b7c87a7fed72f11909f32a64d134
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Sat Jul 8 13:57:08 2017 -0700

    Cherry-picked changes from a deprecated branch onto a rebased branch. Anyway, had to resolve a conflict.

commit 463c8f0eb7b4b28ca02088e4575a75726db572f8
Merge: 932113d 879e173
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 14 14:43:56 2017 -0600

    simple conflict resolution on the use context in HistoryInterfaceMod.

commit 1caf2e6448a8b417f070b783c74743175776d863
Merge: cac245c 879e173
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Fri Aug 11 04:13:45 2017 -0700

    merged master and resolved conflicts

commit 879e1736a039a5d9d33e9eaa8b558964319959f5
Merge: aace108 c4ebadb
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 10 17:13:22 2017 -0700

    Merge pull request #245 from ckoven/koven_strict_ppa
    
    Addition of optional "strict PPA" mode

commit 932113dd756efa7b8d4d9bf3ce2857eefd885acd
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 10 15:00:18 2017 -0700

    Changing debug flag on parameter printing to off.

commit 5362f34a15396a4e9acb18c3b100cff82da272ae
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 10 14:24:34 2017 -0700

    Migrated spitfire alpha_SH parameter to pft dimension.  Fixed naming conventions of the new logging parameters.  Added some missing parameter read for hydr_pinot_node, and missing entry for hydr_kmax_node.

commit 2bfe750f1c4798b4224bda8f5d1ad52a81ff3f3c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Aug 9 18:20:16 2017 -0700

    Updated hydraulics parameters. Added logging parameters.  Added calls to report parameter values to the log file.

commit dd96bc8e96825f2a56df2c58b5610f43d872d403
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Aug 8 16:20:49 2017 -0700

    Added hydraulics parameters and wind_max parameter to fire.

commit 039c432cd603800c16be1be9c324a8da203228c5
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 3 15:03:18 2017 -0700

    Changed fire parameter names. Connected the mortality disturbance fraction parameter with the value that is read in.

commit 4b97df3f47b2c6273f641a6c2f2d63df4ea16171
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Aug 1 15:11:00 2017 -0700

    Migrated several module switches to the CLM/ALM namelist.

commit a78f8cf1a7fb698b975b566dfa933beabbf439a2
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jul 27 14:58:35 2017 -0700

    Removal of some unused parameters, name changes and bug-fix on agb allometry (bug fix on this implementation)

commit b35feebc9e1496538b5ff70e7b2fd01eca0b11ff
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jul 26 11:03:35 2017 -0700

    Some bug fixes related to allocation reading of new allometry parameters.

commit 1b063a5c1967279a053acb65a30572b364e7fa72
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Jul 25 18:37:17 2017 -0700

    Overhaul of allometry parameters. Changed naming convention, added parameters.

commit a674222b59928aa6a8f95b20eba54e8dfbc05673
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jul 21 13:51:14 2017 -0700

    Added fates_mort_disturb_frac to parameter reads.

commit 67c2430dff734fb82027f82bf253834568219859
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jul 21 13:21:10 2017 -0700

    Added size diagnostic scale switch to the parameter file.

commit b5b160540e1756130a7fb747bf730482146c84aa
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jul 21 11:58:25 2017 -0700

    Added trim_limit, trim_inc. Added some text to explain parameters. Removed instances of fnitr in the model code.

commit 92f4e5365b6f98016a43aebd2325b469efb9875c
Author: rgknox <rgknox@gmail.com>
Date:   Sun Jul 9 16:30:56 2017 -0700

    Bug fixes to accomodate arbitrary sized parameter files. One bug fix required a very band-aid like fix, where we were calling leaf-longevity from pft 7.

commit 496766443e70167eefd52f78b3eec98f6a08125c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jul 7 13:15:32 2017 -0700

    Added new variable to parameter file fates_do_inventory_init, with valid values 0 or 1 to optionally not-use or use an inventory intitialization on cold start.

commit a2a52cb93f22dbd45c48f01cec2903d4ebf2c12f
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jul 6 15:11:27 2017 -0700

    Removed unused parameters: alpha_stem, leafwatermax, ED_name_dispersal.  Changed fates_fnitr (parameter name in file) to fates_vcmax25top, and fates_crown to fates_crown_depth_frac, and fates_nfires to fates_nignitions.  Shifted the pft read index to be based on index 1, no ground included.

commit aace108d34eeb808928e8f59f799787f61397df6
Merge: 692a8b2 a39d658
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jul 28 13:54:03 2017 -0700

    Merge pull request #252 from ckoven/koven_disturbancechanges
    
    Alternative disturbance survival option

commit f4a1b7bef2fbf13bc61faabef6f3e8eba60f3214
Merge: 0a0e183 c4ebadb
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Wed Jul 26 12:30:40 2017 -0700

    Merge branch 'koven_strict_ppa' into yi-logging-v3

commit 0a0e1836c8a6b7f618814d8fed3befbfe57aecf3
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Wed Jul 26 12:27:17 2017 -0700

    balance check

commit 692a8b2ae1c1e9d9b9ed85ec155026a578be2f00
Merge: 03186af 4cf5aa9
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Jul 25 12:49:29 2017 -0700

    Merge pull request #249 from jkshuman/jkshuman-AreaBurnt
    
    Update AreaBurnt, add DEBUG, fix indexing

commit 4cf5aa93a80f95f5432e998d9ca33c2c89b7652d
Author: JKShuman <jkshuman@ucar.edu>
Date:   Mon Jul 24 14:49:10 2017 -0600

    Return numpft_ed to originial value
    
    Put EDTypesMod.f90 back to original value of 2
    as part of previous commit.
    
    User interface changes?: No
    
    Code review: JKShuman
    
    No testing

commit 03186af4f2a6c87217d5d86d7cc3d2d6a84d0b0d
Merge: ed915ea 7301abf
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Jul 24 13:31:56 2017 -0700

    Merge pull request #246 from ckoven/koven-biomasstendency_merge
    
    Bugfix on tendency terms and a few new vars

commit bdfbd9a4df6e1ee88b3aaebaae37761af93d2673
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Fri Jul 21 15:32:41 2017 -0700

    Change PFT number to 3 in EDTypesMod.F90

commit c62009c498203b1415a228136ab450baa44fc815
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Fri Jul 21 15:27:44 2017 -0700

    fix high CWD following logging in EDPatchDynamicsMod.F90

commit 864179590d7a8599c657dc1d6be730ecd8da63ea
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Fri Jul 21 14:58:18 2017 -0700

    updated EDLoggingMortalityMod.F90 for CWD issue

commit 97c3f736282980b242ce8e66c0f6a31e32712818
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Fri Jul 21 14:17:46 2017 -0700

    Improve logging rates in EDCohortDynamics for CWD issue

commit 7301abf9f298ec2398c196f7c30449c5255450a1
Author: ckoven <ckoven@gmail.com>
Date:   Wed Jul 19 17:07:49 2017 -0700

    bugfix on prior

commit d30002f20f8904251061d230a35673f15900c98a
Author: ckoven <ckoven@gmail.com>
Date:   Wed Jul 19 16:51:54 2017 -0700

    fixed impact mortaaity reporting for scag-dimensioned flux output too

commit 3746abbfd0c37c7a1956ac0c54702ac698b9b2d3
Merge: c7651b1 6c0ee5f
Author: ckoven <ckoven@gmail.com>
Date:   Wed Jul 19 16:48:38 2017 -0700

    Merge branch 'koven_understory_mort_bugfix' into koven-biomasstendency_merge

commit 6c0ee5fc141ed9885e91c96710bf16cdc19e7f45
Author: ckoven <ckoven@gmail.com>
Date:   Wed Jul 19 16:48:17 2017 -0700

    pulled in impact mortality bugfix and some other diagnostic variables form presecribed_physiology branch

commit cac245c9db855b2fc7b786b7d69b2e0a9fd398e7
Merge: 9be7a4b c4ebadb
Author: ckoven <ckoven@gmail.com>
Date:   Wed Jul 19 16:09:48 2017 -0700

    merged strict_ppa branch changes back into prescribed_physiology branch

commit 94bd85aaca51741278336fa935f3ba935de08025
Author: JKShuman <jkshuman@ucar.edu>
Date:   Wed Jul 19 13:59:36 2017 -0600

    Update AreaBurnt,add DEBUG, fix indexing
    
    Update calculation for area burnt to be in line with
    Thonicke etal 2010 Eq 2 for readability.
    
    Add "if (DEBUG)" to write statement for "SH currentCohort%c_area"
    in fire/SFMainMod to reduce log output.
    
    Add "if (DEBUG)" to write statement for "using high bl cap" in
    biobgeochem/EDPhysio to reduce log output.
    
    Fixes:
    
    User interface changes?: No
    
    Code review: JKShuman
    
    Test suite:
    Test baseline:
    Test namelist changes:
    Test answer changes: expect non-answer changing
    Test summary: compiles,

commit a39d6587233d6f383ceaf08d3ecaa5aab6557b68
Author: ckoven <ckoven@gmail.com>
Date:   Wed Jul 19 11:26:32 2017 -0700

    reset value of fates_mortality_disturbance_fraction to one to revert to prior behavior

commit 7b00fd51905794a81c27c06f22a7224b2ee79d07
Author: ckoven <ckoven@gmail.com>
Date:   Mon Jul 17 17:32:19 2017 -0700

    changing disturbance fraction to be equal to default fates_understorey_death value

commit 944315bcf8538224c6ba1d54200d658597e6480e
Author: ckoven <ckoven@gmail.com>
Date:   Fri Jul 14 16:15:29 2017 -0700

    first attempt to add fractional disturbance term for mortality (as hard-coded param)

commit c4ebadb6d68852abb3ea433738bb395eba5d062d
Author: ckoven <ckoven@gmail.com>
Date:   Wed Jul 19 09:05:03 2017 -0700

    unit fix on zstar metric

commit c7651b164a8a1e35fc2d75f722ab13362f6a6788
Merge: 6bd2ffc ed915ea
Author: ckoven <ckoven@gmail.com>
Date:   Tue Jul 18 21:09:58 2017 -0700

    Merge branch 'master' into koven-biomasstendency_merge

commit 82ea563ab3cdc5fef702ac422900cf15d06e230b
Author: ckoven <ckoven@gmail.com>
Date:   Tue Jul 18 16:26:12 2017 -0700

    pulled just the strict PPA logic from the prescribed physiology branch

commit 9be7a4b9281a8919df253ecd6378f2caaa193150
Merge: 595daed ed915ea
Author: ckoven <ckoven@gmail.com>
Date:   Tue Jul 18 15:45:23 2017 -0700

    Merge branch 'master' into koven_prescribed_physiology_licensed

commit 6bd2ffcca279fd9b15812620383b49b9e0f83c11
Author: ckoven <ckoven@gmail.com>
Date:   Fri Jul 7 09:42:30 2017 -0700

    adding all biomass tendency terms to cohort fusion handling

commit f0558b64628c27dc50cb0e8e0f16d92389771421
Author: ckoven <ckoven@gmail.com>
Date:   Thu Jul 6 11:44:52 2017 -0700

    added 6 new vars to track growth and mortality rates conditional on size, age, and canopy position

commit ed915ea7398b3f1ce4ae1af68e9e1f747ae0ad66
Merge: 791071f 9a7315d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jul 6 11:44:15 2017 -0700

    Merge pull request #235 from rgknox/rgknox-inventory-init
    
    Initialization from forest inventory

commit 9a7315d290a32fbc98c1352958ad0d97ac268926
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jul 5 17:28:38 2017 -0700

    Added some checks on basal area to the inventory init.

commit 752693663a1ba422a52b146435e8d16d84a112dc
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Jul 5 15:34:06 2017 -0700

    Modified unique cohort identifier to be a string. Added a cohort count function to check if inventory initialization actually generated any cohorts in model, as a check.

commit 9d481fd1cb4d7bcae28dbf0b6c5393fcf4aa9a83
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jun 28 11:37:53 2017 -0700

    Set do_inv_init back to false as default.

commit 566f8edefcf45efad6fd2d6db39006e69e267b40
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jun 28 11:35:12 2017 -0700

    Addressed various syntactical concerns brought up by Chonggang Xu for inventory intialization routine.

commit 2188931845a5a4aa35c394109d8f12f54263339d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Jun 26 14:44:00 2017 -0700

    Updates to inventory initialization code per ckoven review.  Includes changing the on/off flag to integer instead of logical, adding checks on model site proximity to inventory site, improved check on the inventory sites longitude designation. Removed a kluge on pft.

commit 116fc849c66e447c36c7084d7b7109f7e6a66eb3
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jun 23 14:24:25 2017 -0700

    Turned off inventory init by default and set debug to false.

commit 380eda153478739dd73fcf7f32f94e62df5fce06
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jun 23 14:13:24 2017 -0700

    Various syntatical and refactor improvemnets to inventory initialization. Module is generating expected results, have not submitted to regressino testing yet.

commit 26a87d00dd4a07ae714c44b643211b4bba6b0c3b
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jun 22 18:52:18 2017 -0700

    Completed first pass at reading in cohort data from inventory, as well as fusing, sorting and associating cohorts with patches.

commit 25519dda1d1436bbdee63ceda3fd3880a6dae5d6
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Jun 21 13:38:21 2017 -0700

    Started the process of reading PSS files.  Made some initial assumptions, probably poor ones about how stsc maps to CWD and litter. Introduced a file format parameter to the inventory_file_list.

commit 87680abdafc88ab14d17808deb88d99a3f9857bd
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Jun 20 15:19:30 2017 -0700

    Added ability to read in a list of css/pss file couplets and their coordinates. First task towards inventory initialization.

commit 791071f320dc8056f16f88e27d920fe55c6d85c0
Merge: e0fb384 40bbfec
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jun 15 11:41:35 2017 -0400

    Merge pull request #233 from ckoven/newlicense
    
    Changed to new FATES license file

commit e0fb3841ecd2dafa57b23bb444ec5f856c91451b
Merge: d8fcb44 f90a8d7
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jun 15 11:41:02 2017 -0400

    Merge pull request #232 from rgknox/rgknox-litterout-fix
    
    bug fixes to litterflux out and in

commit 40bbfec0da40f293295f6a51d070f5509baaafb7
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Wed Jun 14 14:56:47 2017 -0700

    added new FATES license file

commit d8fcb44f9427831ff02d2bb475b2568d20e75df8
Merge: fa488f1 d36a2a3
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Jun 12 17:33:45 2017 -0400

    Merge pull request #230 from jkshuman/jkshuman-ROSback-FD
    
    jkshuman-ROSback-FD

commit d36a2a3eb5a9be15a7c30d42bbe83be626b0ae1b
Author: JKShuman <jkshuman@ucar.edu>
Date:   Fri Jun 9 10:55:24 2017 -0600

    Update Spitfire FDI, area burnt & clean up
    
    Update d_FDI to FDI to be in line with Thonicke
    Update equation for number fires (Patch%NF) to include
    FDI to bring in line with Eq. 2 Thonicke and FireMIP.
    Clean up patch_area_in_m2 conditional of area burnt.
    Patch%frac_burnt capped at 1.
    Decommission Site%ab. %ab is only at patch level.
    Update fire_threshold to 50kW/m as in Pyne 1986.
    
    Fixes:
    User interface changes?:No
    Code review: JKShuman
    
    Test suite: Full suite ED, short for CLM45, cheyenne, intel
    Test baseline: fates-clm 601eb87 and clm4_5_15_r233
    Test namelist changes:none
    Test summary:  b4b non-fire
                   answer changing for fire as expected

commit 595daed84cfc4292394f6e6802b5781fa1bb91d2
Merge: 9af8838 f90a8d7
Author: ckoven <ckoven@gmail.com>
Date:   Thu Jun 8 13:20:38 2017 -0700

    resolved merge conflict from rgknox-litterout-fix

commit 9af8838b0e3beaa8b64306d932c2735890413c5e
Merge: 4374ee8 fa488f1
Author: ckoven <ckoven@gmail.com>
Date:   Thu Jun 8 13:15:53 2017 -0700

    Merge branch 'master' into koven_prescribed_physiology_licensed

commit 6b3941c0466af25dcfebfc1a9dc3b211fa9c14e4
Merge: b98035b fa488f1
Author: JKShuman <jkshuman@ucar.edu>
Date:   Wed Jun 7 12:11:14 2017 -0600

    Merge remote-tracking branch 'ngeet/master' into jkshuman-ROSback-FD

commit f90a8d7f14b086f00d0f6c17667e855e07b04b50
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Jun 7 09:50:39 2017 -0400

    Removed some whitespace changes and a temporary variable (ipa).

commit 2d48cf01d467d2bcd934892819c6408dd2328165
Merge: 363ff8f fa488f1
Author: xuyi02 <yi.xu@pnnl.gov>
Date:   Tue Jun 6 16:03:43 2017 -0700

    fixed conflict for fuse_cohort

commit fa488f1f41ee4f5bee2c660c7b9b18044b212be5
Merge: ff54f1a 3b7f067
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jun 2 17:05:29 2017 -0700

    Merge pull request #225 from rgknox/rgknox-bugfixes-layers-fusion-sizeindex-license
    
    Bug fixes: fusion loops, termination and layer indices

commit ff54f1a5ea98057b909175149dff51f8c4d3a722
Merge: b1befab 2ae46a6
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jun 2 16:31:37 2017 -0700

    Merge pull request #226 from ckoven/koven_revised_carbon_diagnostics_licensed
    
    history bugfixes and diagnostics on size/canopy-resolved carbon budgets

commit f8b15047f454357a14d837b252e22e6051dec0a1
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jun 2 15:51:14 2017 -0700

    bug fixes to litterflux out and in, mostly related to the patch fusion and creation process.

commit b98035bef279034f9f16a2b4f3578773525d1267
Author: JKShuman <jkshuman@ucar.edu>
Date:   Fri Jun 2 15:36:28 2017 -0600

    Spitfire wind site level
    
    Update converted input wind (m/min) in Spitfire to be site level
    for use in wind effect routine and rate of spread routine.
    
    Fixes:
    User interface changes?: no
    Code review: JKShuman
    
    Test suite:
    Test baseline:
    Test namelist changes:
    Test answer changes:
    Test summary: code compiles. no further testing.

commit a7021770e873bd234fbad2ff06325d513bae5621
Author: JKShuman <jkshuman@ucar.edu>
Date:   Thu Jun 1 15:20:55 2017 -0600

    Update ROS_back and fire duration
    
    Correct equation for fire duration (currentPatch%FD) to add one
    in the numerator to SF_val_max_durat per Thonicke et al 2010.
    Correct equation for ROS_back equation to use wind
    which is not reduced by vegetation as is effect_wspeed.
    Per Thonicke et al. 2010.
    
    Fixes: Spitfire development
    
    User interface changes?: no
    
    Code review:JKShuman
    
    Test suite:Full test suite ED, short for CLM 45, cheyenne, intel
    Test baseline:fates-clm-601eb87 and clm4_5_15_r233
    Test namelist changes:no
    Test answer changes: bit for bit non-fire
    Test summary: bit for bit for non-fire
                  answer changing for fire, as expected

commit 79c762d68b6ed029945fe741feda70e2c9567978
Author: JKShuman <jkshuman@ucar.edu>
Date:   Wed May 31 14:23:02 2017 -0600

    Update ROS_back equation
    
    Update Backwards Rate of Spread (ROS_back) equation
    to include patch area
    
    Fixes:
    User interface changes?: no
    Code review: JKShuman
    
    Test suite: Full test suite ED, short for CLM 45, cheyenne, intel
    Test baseline:fates-clm-601eb87 and clm4_5_15_r233
    Test namelist changes:no
    Test summary:bit for bit for non-fire
    answer changing for fire, as expected

commit 5809197ec7af3f48107bf116bc723db53f81f2d4
Author: JKShuman <jkshuman@ucar.edu>
Date:   Wed May 24 10:13:43 2017 -0600

    Update Spitfire CFA euqation
    
    Update equation of crown area affected by fire (cfa)
    to correctly calculate crown length
    
    Fixes:
    
    User interface changes?: No
    
    Code review:JKShuman
    
    Test suite: Full test suite Ed, short for CLM45, cheyenne, intel
    Test baseline: fates-clm 601eb87
    Test namelist changes: none
    Test answer changes: bit for bit with non-fire fates-clm
    Test summary: bit for bit for non-fire
                  answer changing for fire, as expected

commit 4374ee8e5d2b45049ac17256529806d7b0b9eb7a
Author: ckoven <ckoven@gmail.com>
Date:   Thu May 25 11:21:35 2017 -0700

    added ddbh by canopy/understory and size class (previously it ws just by scpf

commit 8391b34273949780b0ff2e0d0ee636ae43428192
Merge: 59b531b 3b7f067
Author: ckoven <ckoven@gmail.com>
Date:   Thu May 25 10:57:35 2017 -0700

    merged in rgknox_repo/rgknox-bugfixes-layers-fusion-sizeindex-license and resolved conflicts

commit 2ae46a6c8f896258b7b70065d6028b817d361155
Author: ckoven <ckoven@gmail.com>
Date:   Wed May 24 14:45:05 2017 -0700

    fixed unit error in size- and canopy-resolved AR fluxes

commit 363ff8fd8db0be7c2bd3a40c3cef4c68a0f033e9
Author: xuyi563 <yi.xu@pnnl.gov>
Date:   Tue May 23 16:48:52 2017 -0700

    update trunk_product in balance

commit f75c5283931ef732c25e2bfef3901743c6476814
Author: xuyi563 <yi.xu@pnnl.gov>
Date:   Tue May 23 16:47:49 2017 -0700

    update selective logging module for indivual numbers in new patch

commit b7378bae41fde301833c44a8fd5d76e7394d5688
Author: xuyi563 <yi.xu@pnnl.gov>
Date:   Tue May 23 16:46:37 2017 -0700

    update selective logging module for flux_out and c_area

commit 45ca63a795bb24bc94790ca8fe9ff4b9efcf7781
Author: xuyi563 <yi.xu@pnnl.gov>
Date:   Thu Apr 20 16:33:04 2017 -0700

    update selective logging module

commit daa7d79b3b4c7e21d8ab24fe73d82209d92168d7
Author: xuyi563 <yi.xu@pnnl.gov>
Date:   Mon Mar 27 16:21:14 2017 -0700

    Minor conflict resolutions merging in master.

commit 59b531bbb9c2bbf6ad02ad56742f24dfa20ad342
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Tue May 23 15:43:08 2017 -0700

    applied prior code mods on koven_prescribed_growth_mortality_recruit as a patch

commit 4e8c18cea4f2d6fc468eca7bbc5120ab234af37c
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Wed May 10 09:39:50 2017 -0700

    added new diagnostics on canopy trim as resolved by size and canopy level, as well as total crown area on same dimensions so that it can be used as denominator in carbon budgets to normalize across size classes
    
    fixed variable names on prior
    
    fixed dimension multiplexing on SCAG (size-class x age) dimension
    
    fixed unit error on CROWN_AREA_CANOPY_SCLS and CROWN_AREA_UNDERSTORY_SCLS
    
    adding diagnostics on canopy- and leaf-layered carbon balance and structure
    
    reorganized some of the diagnostics and turned on the gpp_understory field as default
    
    bugfix on history updating for two new fields

commit 3b7f067f333d3dde7a51dcd74fc34a8ae6dabdb3
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed May 17 20:25:31 2017 -0400

    Bug fixes. Fix to infinite fusion loop by allowing new recruites to fuse with each other.  Added the ability of the c_area function to suppress large or small canopy layer indexes, as the function is called during the logic which promotes and demotes canopy layers, and is expected to have layers that are outside the expected range.  Added cohort size and size-type indices to the copy cohort routine.
    
    Removed white-space changes from EDCanopystructure
    
    Split termination to allow the safe-math portion to be calculated prior to fusion.
    
    Removed the max(1,X) on canopy layer indices inside crown area calculations.
    
    Turning off cnaopy mortality carbonflux as a default as well.
    
    Turning off cnaopy mortality carbonflux as a default.

commit b1befab827e6f6d142d0226ab62a94827fe3305b
Merge: 1125349 ceee36e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri May 19 13:45:37 2017 -0700

    Merge pull request #223 from jkshuman/SFire_wind_max
    
    S fire wind max

commit ceee36e88a0a63033da5b9d0117d311a72a049bd
Author: JKShuman <jkshuman@ucar.edu>
Date:   Thu May 18 15:18:36 2017 -0600

    Update debug in Spitfire
    
    Update instances of "hlm_masterproc == 1" to hlm_masterproc == itrue"
    
    Fixes: none
    
    User interface changes? No
    
    Code review: jkshuman
    
    testing: none

commit dbb35a1c5914948a8db3b9cfaf31c5df1765ea29
Author: JKShuman <jkshuman@ucar.edu>
Date:   Wed May 17 14:20:58 2017 -0600

    SF Wind Max for ROS
    
    Max wind speed added per Lasslop et al 2014 used to reduce ROS for high wind speeds.
    High Wind speed determined by data.After this high wind speed an alternate equation
    for effective wind speed is used for calculation of ROS. Debug statment added to track
    the conditional.
    
    User interface changes?: no
    
    code review: JKShuman
    Test suite: Full test suite for Ed and short for CLM 45, yellowstone, intel
    test namelist changes: none
    test answer changes: bit for bit with non-fire, (ed-clm-89081b8) fates-clm 9ee8751
    test summary:        bit for bit for non-fire
                         answer changing for fire, as expected

commit 47fdb33f7840fcdd4287b476b9ed578dd0c951b1
Author: Ben Andre <andre@ucar.edu>
Date:   Thu May 11 23:41:13 2017 -0600

    Import the fates-clm-v0.3 tag from ed-clm repo and svn.

commit ad18acfe596ffdde1aaa48fce9286c48ca7058cf
Author: Ben Andre <andre@ucar.edu>
Date:   Thu May 11 23:12:50 2017 -0600

    Add license file for original UCAR work. Update README.

commit 1125349667ef27f718a88759155d2b67d7353176
Merge: 5da1040 354767c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed May 10 11:46:19 2017 -0700

    Merge pull request #219 from rgknox/rgknox-surfprof
    
    Migrated surfprof_exp to a local in flux_into_litter_pools

commit 8d92b7ca210c6058a11e0a75a7d7d540caa43dcd
Merge: d44ff9a 5da1040
Author: JKShuman <jkshuman@ucar.edu>
Date:   Mon May 8 15:43:46 2017 -0600

    Merge branch 'master' into SFire_wind_max
    
    Conflicts:
    	fire/SFMainMod.F90

commit 96f19a842079d0e8f2e947b24f545ba9c387bb3e
Author: Ngeetghub <ngeetghub@gmail.com>
Date:   Sat May 6 15:32:09 2017 -0700

    Initial commit

commit 354767cf1337f7c4cecbc45c94eff0883be64f1e
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed May 3 11:55:04 2017 -0700

    Migrated surfprof_exp to a local in flux_into_litter_pools

commit 5da1040f2eef152f2cb4c11e4ee6115da5011a9c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Apr 27 13:04:26 2017 -0700

    Create README.md

commit d44ff9a508fb1cf661fa03769632714e82b1b0c3
Author: JKShuman <jkshuman@ucar.edu>
Date:   Tue Apr 18 12:58:10 2017 -0600

    Spitfire updates to params and fuel moisture calc
    
    Development to correct equations to literature and code clarity.
    1.Litter moisture of trunk corrected from zero to calculated value
    of fuel_moisture/MEF. Confirmed ROS and intensity calcualtions
    do not use trunk, but calculated trunk litter moisture needed for
    fuel_consumption routine
    2.Remove 0.45 multipliers on fuel_bulkd. Needs to be in
    kgBiomass/m2. No need to convert to carbon and convert back to biomass.
    3.fuel_moisture corrected to (dg_sf:lb_sf) for fuel classes
    1,2,3,4 per Thonicke et al 2010.
    4.Add twig parameter tw_sf=2 (fuel class 2) and update instances
    of (dl_sf+1) to new twig parameter (tw_sf) where appropraite
    
    Fixes:
    User interface changes?: No
    Code review: JKShuman
    Test suite: SMS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline:ed-clm-8f2c36e
    Test namelist changes:no
    Test answer changes: bit for bit
    Test summary: PASS
    
    Test suite: ERS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edFire
    Test baseline:ed-clm-8f2c36e
    Test namelist changes:no
    Test answer changes: bit for bit
    Test summary: PASS for functionality,
                  FAIL: not bit for bit with ed-clm-8f2c36e as expected

commit 60e95312ee3990331e9a3fa9aea6e601ac58b4c2
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Apr 13 00:34:28 2017 -0700

    Simplified dleaf boundary condition calculation to preserve numerical consistency on ERS tests.

commit a33b8471daa6e264aaf7b1a9caa1bd5f3a420127
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Apr 12 22:36:15 2017 -0700

    Fixed some line truncation errors. Converted the dleaf, z0m, and displar boundary condition calculation to avoid HLM globals. The conversion needs a science evaluation in the long-run.

commit e11824973dc83aaf09b02ab32f7bac33c998085c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Apr 12 17:55:07 2017 -0700

    Added a boundary condition control parameter for is_restart(). Removed bounds from a patch counter.

commit 69281270e6345e0c158d5b99e29e98e82aea982e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Apr 12 17:25:15 2017 -0700

    Migrated ivis, numrad and inir to fates globals.

commit 895375e006a83aafdceeba6c4d49f088b0a35f1a
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Apr 12 16:53:24 2017 -0700

    Removed hlm global mxpft from FATES.

commit 9124c2ffefd1d0b2356c83cc4a35fe15bbdf081a
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Apr 12 16:23:01 2017 -0700

    Added control parameter boundary conditions for use_vertsoilc and use_ed_spitfire

commit b6b1075fb3c1973c09a8f4382e5421117abb9024
Merge: 72c7303 e75ce1e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Apr 7 13:17:42 2017 -0700

    Resolved merge conflict of plant hydraulics with the itypes fixes.

commit e75ce1ed60e826f1db2d9940447a6cb08b09dc70
Author: ckoven <ckoven@gmail.com>
Date:   Thu Apr 6 15:42:34 2017 -0700

    bugfix for restarting

commit c93938b4b914c681048ca9441e491ba45b19e77b
Merge: ef527aa 22f909d
Author: ckoven <ckoven@gmail.com>
Date:   Thu Apr 6 12:07:17 2017 -0700

    merged master and resolved conflicts

commit 72c7303ccf51c25fdb2682797128977340e59f7d
Merge: 2f64fe0 289da10
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Apr 5 17:23:44 2017 -0700

    Merge branch 'bchristo-planthydro-interface-clean' of https://github.com/rgknox/ed-clm into bchristo-planthydro-interface-clean

commit 2f64fe0f7102be3bbaab03662c6e569181e89a21
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Apr 5 15:46:41 2017 -0700

    Fixed bug where in non-hydraulics mode we were passing the total_plant_stored_h2o_col to the HLM, where a) it is not necessary and b) it was not being initialized to zero either.  Removed some unnecessary declarations of the vert_trans_sink local in SoilWaterMovement and added some diagnostics output to the error reporting in BalanceCheckMod.

commit 289da109d7fd4d1ef6b5cf6e16ca77bdca2c8cb8
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Apr 4 18:11:30 2017 -0700

    Bug fix, had inadvertently used zi_sisl instead of z_sisl while updating EDPhysiologyMod.

commit 5afb2c4c09242e73afe76cb65fa3b8a71990be1c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Apr 3 16:19:27 2017 -0700

    Fixed some circular dependencies related to the edecophyscon for hydraulics parameters was bypassed.

commit 22f909db77e4f34544a544d0d7a12498ad1add89
Merge: eba56a3 399902c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Apr 3 14:07:38 2017 -0700

    Merge branch 'master' into rgknox-clean-itypes

commit 728d5eed54ddca75dd8934730c3463828b4098d7
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Apr 3 13:48:31 2017 -0700

    Cleaned up some of the code that was hard-setting ecophyscon hydraulics parameters. I did not want to invest too much time in this part of the code, as it may become obsolete as we move to one unified parameter structure. Added in some warning language also for do_ed_dynamics and do_ed_phenology flags.

commit e01da617784895b328a6c8f85ca3ba760ade258a
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Apr 3 13:07:31 2017 -0700

    Fixed an error in the zeroing of some arrays during flux_into_litter_pools.  I had how the looping was structured to accomodate variable depth geometries at the site scale, but by accident I put the zeroing of the site-level arrays leaf_prof, froot_prof and stem_prof inside the loop. Badness fixed, I hope.

commit 03a5447be13ec9ac34992f29da4d0524b3388ddb
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Mar 31 17:50:57 2017 -0700

    Added and interface to FATES plant hydraulics. Added stubs for hydraulics.

commit ef527aa80721e019c3647caf79e000e80998b352
Merge: ac907f1 42bc086
Author: ckoven <ckoven@gmail.com>
Date:   Fri Mar 31 11:39:54 2017 -0700

    Merge branch 'newpftparams' of github.com:ckoven/ed-clm into newpftparams

commit ac907f1cd7255534a21ab4ba7ba25a01a7262d24
Author: ckoven <ckoven@gmail.com>
Date:   Fri Mar 31 11:35:41 2017 -0700

    cleaned up some parameter passing and also metadata on associated param file

commit 42bc086efe8bd51ac1ef1c3e6abf7277b5a6944e
Author: Ryan Knox <rgknox@gmail.com>
Date:   Thu Mar 30 18:17:25 2017 -0700

    Reduced a line-length to prevent compiler freak-out.

commit fee2fd9dcd18d750d5c3c98a3b462074bda8aecb
Author: ckoven <ckoven@gmail.com>
Date:   Thu Mar 30 10:08:53 2017 -0700

    added parameter to allow possible difference between bleaf and crown area exponents

commit d43bb96a169bd326a79281124f000df25063630f
Merge: 21bd96e 399902c
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 29 19:13:01 2017 -0700

    Merge branch 'master' into newpftparams

commit 21bd96eec7151a259b41e47a1488ff1567a632ad
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 29 17:03:05 2017 -0700

    finished off these changes for now

commit 01825acb7e6e2917c048304fbf07354b8145d3ac
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 29 13:04:04 2017 -0700

    threaded scalar parameters through interface calls

commit 399902c618056ace6b26a5ff27aa3a5faa2538de
Merge: c390e3a 7aaa2c9
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Mar 27 16:17:36 2017 -0600

    Spitfire cleanup
    
    Merge branch 'spitfire_cleanup'
    
    Spitfire cleanup, non-answer changing set
    
    Spitfire cleanup.  Added units, and reference equations, as well as
    variable name updates to be more descriptive.
    
    User interface changes?: no
    
    Code review: JK Shuman, R Fisher, rgknox
    
    Testing:
    
      jkshuman
        Test suite: ed suite, yellowstone intel
        Test baseline: ed-clm-0ea3fed
        Test namelist changes: no
        Test answer changes: bit for bit
        Test summary: PASS
    
        Test suite: clm-short suite, yellowstone intel
        Test baseline: clm4_5_12_r195
        Test namelist changes: no
        Test answer changes: bit for bit
        Test summary: PASS
    
      andre
        Test suite: ed - yellowstone gnu, intel, pgi
                         hobart nag
        Test baseline: ed-clm-8f2c36e
        Test namelist changes: no
        Test answer changes: bit for bit
        Test summary: all tests pass
    
        Test suite: clm_short - yellowstone gnu, intel, pgi
        Test baseline: clm4_5_12_r195
        Test namelist changes: no
        Test answer changes: bit for bit
        Test summary: all tests pass

commit e32b32bcef821f4890f12cc353dde7a118aabbc2
Merge: 9ddf213 c390e3a
Author: ckoven <ckoven@gmail.com>
Date:   Mon Mar 27 15:43:29 2017 -0700

    Merge branch 'master' into newpftparams

commit 9ddf21380c94b4cbd0779e3acf02cade9c11488f
Author: ckoven <ckoven@gmail.com>
Date:   Mon Mar 27 15:41:54 2017 -0700

    pulled fusion params to file, staged crown exponent param for file

commit c390e3a26148ac4ecb613b567b56549eb35185cd
Author: ckoven <ckoven@gmail.com>
Date:   Fri Mar 24 14:31:06 2017 -0700

    put named unit conversion factor in

commit 7aaa2c927c4c30d195a5b40531e041fd9629a604
Merge: 9f13fc9 554869b
Author: Ryan Knox <rgknox@gmail.com>
Date:   Fri Mar 24 12:37:38 2017 -0400

    Resolution of merge conflicts.  Resolutions either had to do with changing spit_fire to spitfire in the build scripts, or a conflict with the new parameter implementation where nfires were changed to nignitions.  Must check with jkshuman to see if fates_nfires is still an appropriately named parameter in the ffiles namespace.

commit 187de27b6304c27c1c260cbd27489974faf4a471
Merge: d143558 554869b
Author: ckoven <ckoven@gmail.com>
Date:   Thu Mar 23 09:26:30 2017 -0700

    merged in changes from master

commit 554869b8958c4010307bb24f87c1bc2ccf235409
Author: ckoven <ckoven@gmail.com>
Date:   Mon Mar 20 15:05:32 2017 -0700

    got rid of leap_year calendar constant and also gave the dim-name character length a proper name

commit b1d180b34f283bdac7dd9609e15df4760fc50b67
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Mar 17 17:35:55 2017 -0700

    Addressed leap-year issue with the days-per-year constant. CLM/ALM have not leap day, corrected accordingly.

commit eba56a3a6a6f31b2a706917c8cf81e74c92c89ae
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Mar 17 17:30:38 2017 -0700

    Added in the dleaf, zom and displar fates parameters.

commit 01a7a6c24824c02952ed755f27ea103e81136123
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Mar 16 19:21:48 2017 -0700

    Some bug fixes for the new dimension addition.  Also set all multi-plexed dimensions to defautl inactive.

commit 2c1bab62678800967c9fc4ef9ff1c4ba07f75bad
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Mar 16 19:14:42 2017 -0700

    Added in the size x age dimension.  Moved around and added functions that help identify size, age and type classes.

commit eab6544ca3b81bcf9494c43a537ac156bed17542
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Mar 16 16:45:41 2017 -0700

    Renamed dimensions for fates history output.  Also renamed some fates-side dimension arrays.

commit 40b22e3e0b10df707d6e38a1473048b34d93284f
Author: Ryan Knox <rgknox@gmail.com>
Date:   Thu Mar 16 13:06:17 2017 -0700

    Converted a list of hard-coded numbers to defined parameters. Likewise, pre-divided parameters when possible.

commit 9f13fc9e3ac1467f8c98b3377d80310ae7d299e7
Author: JKShuman <jkshuman@ucar.edu>
Date:   Thu Mar 16 10:45:48 2017 -0600

    Update to use_spitfire after merge with master
    In merge a mismatch between master and branch was identified.
    (use_spit_fire updated to use_spitfire)
    This was found in failed testing and corrected.
    With this change passed the full test suite.
    
    Fixes:
    User interface changes?: No
    Code review: JK Shuman
    Test suite: full suite, yellowstone
    Test baseline:clm4_5_12_r195
    Test namelist changes: no
    Test answer changes: bit for bit
    Test summary: PASS

commit 37b8a546f6f08eb5b102738865c85fb59343fa4d
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 15 22:15:35 2017 -0700

    bugfix on merge; needed to register heretofore-NLSC-dimensioned parameters

commit 5876b262b95f5a7693efa852bcd97f0a1038d8cb
Merge: b9c224a 4cd374f
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Mar 15 18:13:15 2017 -0700

    Trivial merge conflict resolution in FatesParameterDerived.

commit b9c224a5e5d64e9db2ea4b0a96eedfe37ba63425
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Mar 15 18:05:37 2017 -0700

    Finished first pass of converting z0, displar and dleaf to boundary conditions. Added the is_fates patch level logical filter.

commit d936a323c3f824e0a8d15fd2ec0e92d09af467a7
Merge: e3c1869 4cd374f
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 15 14:26:58 2017 -0700

    merged in new parameter infrastructure from master. resolved conflicts that arose from NLSC dimension no longer existing on this branch

commit 76b83eadbad56b1927738c9793740d86c8ed0bec
Merge: 1cf2716 4cd374f
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 15 12:27:15 2017 -0700

    merged in changes on andre-ed-params (1992685)

commit 4cd374f0895fbb8622c2a16730abfaea2d95f8f3
Merge: 7f5d61c fdec6aa
Author: Ben Andre <andre@ucar.edu>
Date:   Tue Mar 14 20:21:29 2017 -0600

    Merge master, commit '0ea3fed', into andre-ed-params
    
    Testing:
    
      Test suite: ed - yellowstone gnu, intel, pgi
                       hobart nag
      Test baseline: 0ea3fed
      Test namelist changes: addition of fates_paramfile
      Test answer changes: bit for bit
      Test status: all tests pass
    
      Test suite: clm_short - yellowstone gnu, intel, pgi
      Test baseline: clm4_5_12_r195
      Test namelist changes: none
      Test answer changes: bit for bit
      Test status: all tests pass

commit 8aaaf1a10f5ff3bf24d7e95aa55ce869a7bef91b
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Mar 14 18:44:51 2017 -0700

    Migrated dleaf, z0 and displa to the bc_out structures. Part way through forcing itypes to be incompatible. Next step is to implement two new filters, is_fates_patch and is_fates_active_patch filter.

commit 7f5d61c826bd2699d42259b45d185a7711481aed
Author: Ben Andre <andre@ucar.edu>
Date:   Tue Mar 14 16:42:10 2017 -0600

    Rename EDSharedParams to FatesSynchronizedParam
    
    Test suite: ed - yellowstone gnu, intel, pgi
                     hobart nag
    Test baseline: ed-clm-cdb9db7
    Test namelist changes: add fates_paramfile
    Test answer changes: bit for bit
    Test summary: all tests pass
    
    Test suite: clm_short - yellowstone gnu, intel, pgi
    Test baseline: clm4_5_12_r195
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: all tests pass

commit 9657affcaff0cc8c153f24d529224aa699524085
Merge: f6f2d10 fdec6aa
Author: JKShuman <jkshuman@ucar.edu>
Date:   Tue Mar 14 16:08:44 2017 -0600

    Merge branch 'master' into spitfire_cleanup
    
    Conflicts:
    	components/clm/src/ED/biogeochem/EDPhysiologyMod.F90
    	components/clm/src/ED/fire/SFMainMod.F90
    	components/clm/src/ED/main/EDInitMod.F90

commit b1f51a37f1cc1a652ff370a2b12184b5e183a609
Merge: fa9cd87 fdec6aa
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Mar 14 15:04:20 2017 -0700

    Merge branch 'master' into rgknox-clean-itypes

commit e3c186900c0311179bdb23290715f6d83457ccf2
Merge: a846aed fdec6aa
Author: ckoven <ckoven@gmail.com>
Date:   Tue Mar 14 10:45:56 2017 -0700

    Merge branch 'master' into track_cwd_in_fluxes

commit f6f2d10860e46ec5672e9988a9e0255b5e91c0f2
Author: JKShuman <jkshuman@ucar.edu>
Date:   Mon Mar 13 15:21:36 2017 -0600

    Spitfire fuel_bulkd update
    Replaced 0.45 multiplier for fuel_bulkd due to previous test failure.
    With fuel_bulkd multipliers returned, passes bit for bit testing.
    
    Fixes: general spitfire cleanup
    User interface changes?: No
    Code review: JK Shuman
    Test suite: yellowstone
    Test baseline:ed-clm-5c5928f
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary:

commit 1cf27161c617de79bd7ed5492fef814a0b1ea93b
Author: ckoven <ckoven@gmail.com>
Date:   Mon Mar 13 11:50:17 2017 -0700

    added hooks to a couple other parameters

commit a846aed8f32ca0673ebef9cda43f7d82f045321f
Author: ckoven <ckoven@gmail.com>
Date:   Mon Mar 13 11:14:40 2017 -0700

    added same set of vars for each canopy dimension and moved all vars on cnlfpft dimension to be default-off

commit 7ed0236b23afb832b69598b4d151d53da8e215b3
Author: JKShuman <jkshuman@ucar.edu>
Date:   Mon Mar 13 11:31:02 2017 -0600

    Add Spitfire equation & var descriptions & units
    All changes were assocaited with Spitfire routine.
    Additonal documentation of spitfire varaible units
    and equation sources were added to spitfire routine.
    Some variable names were updated for clarity.
    
    Fixes:
    User interface changes?: No
    Code review: JKShuman
    Code was tested by creating cases until successful compile.
    No further testing was completed.
    Test suite:
    Test baseline:
    Test namelist changes:
    Test answer changes:
    Test summary:

commit fa9cd871f9be0c78bd0c2d12d5251e16f6f0e80a
Merge: 89344a0 90f21d2
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Mar 10 16:14:55 2017 -0800

    Merge branch 'master' into rgknox-clean-itypes

commit fdec6aa1561fedfa84391ecff20b315fbf92a028
Merge: 316bf25 90f21d2
Author: ckoven <ckoven@gmail.com>
Date:   Fri Mar 10 13:47:41 2017 -0800

    merged in master

commit f0b45f6e42a42a64c2fddfa375a971a073b12a5d
Author: ckoven <ckoven@gmail.com>
Date:   Thu Mar 9 16:58:52 2017 -0800

    pulled out more numbers into parameters

commit 89344a0a25f9cc0c560659e33213402889941b2d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Mar 9 16:10:45 2017 -0800

    Added some logic to controlMod in CLM. Forcing checks on hydstress, crop and methane along with existing use_cn checks. Forcing use_voc off.  I would rather a check that forces a failure when VOC is not set correctly (like the others), however megan does not seem to be a namelist parameter (just xml) and is defaulted to true.

commit 1ab6d2abff5dbecbbaba8cddd15e1025a4e00168
Merge: d270ddc bf12034
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Mar 9 15:12:45 2017 -0700

    Merge bufix branch into parameter refactor branch.
    
    Merge branch 'fnitr-bugfix' into andre-ed-params
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: cdb9db7
    Test namelist: add fats_paramfile to namelist.
    Test status: running expect all tests pass
    
    Test suite: clm_short - yellowstone gnu, intel, pgi
    Test baseline: clm4_5_12_r195
    Test namelist: none
    Test status: running expect all tests pass

commit bf12034ca3c5f2f0734604dc61258d92c5130fec
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Mar 9 15:07:14 2017 -0700

    Bugfix in FatesParameterDerivedMod
    
    FatesParameterderivedMod was introduced during a merge, and was using the host verison of fnitr from pftcon. It needed no be updated to point to the fates version in EDPftvarcon.
    
    Testing: Manual testing of fates_params_c170308.nc in an
             SMS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest is
             bit for bit with cdb9db7.

commit c7a137b4ce8491f93e9d8d01cfd7153bf9f64189
Author: ckoven <ckoven@gmail.com>
Date:   Thu Mar 9 13:45:11 2017 -0800

    fixed line length issues

commit 96f83969ee4abcdce43c1af6f0260cc31d7fb988
Merge: a55011d 90f21d2
Author: ckoven <ckoven@gmail.com>
Date:   Thu Mar 9 12:08:45 2017 -0800

    Merge branch 'new_mort_diagnostics' into track_cwd_in_fluxes

commit 90f21d21aff0a59bac01c77895cdc6daf28cf3f4
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Mar 8 21:16:46 2017 -0800

    Fixed some overly long line lengths.

commit a55011dbaa5daa320e4bb89848646baa179de5fc
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 8 20:29:13 2017 -0800

    bugfixes on prior

commit b86ba3ead22fdf9bd5d66d156d33d68d6a7e9ceb
Merge: 91ab92a 8850d63
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 8 20:15:01 2017 -0800

    merged and resolved siteptr changes

commit 8850d63517ef64687886c1d8f7c8a89eaf4bbf3e
Merge: 0a56f79 442306c
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 8 20:06:37 2017 -0800

    Merge branch 'new_mort_diagnostics' into morenewdims

commit 0a56f79d4b1789d84151c58921d920588e47729e
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 8 20:06:21 2017 -0800

    fixed some patch%siteptr by replacing with actual currentsite insts

commit 442306ca60966f31fc137ffa18ef044543d67023
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 8 19:07:35 2017 -0800

    cleaned up site pointer issues

commit d1435589443b8b8c58a241bb0ce18aa45c50c77c
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 8 09:05:25 2017 -0800

    reinstated fixes to litter_in and litter_out fluxes

commit 91ab92a6e2bd2816a3ff66ec2fc7188687609811
Author: ckoven <ckoven@gmail.com>
Date:   Tue Mar 7 20:51:26 2017 -0800

    bugfix on the prior

commit 1460c0e310a9b8fdf134dc107ea46b202546c257
Author: ckoven <ckoven@gmail.com>
Date:   Tue Mar 7 20:26:05 2017 -0800

    reverted changes to litter_in and litter_out variables so as to pass tests

commit c4ccd474cbcc3d3ee0928ec5d84e1b72bd02ffab
Author: ckoven <ckoven@gmail.com>
Date:   Tue Mar 7 20:19:56 2017 -0800

    assorted unit fixes

commit ffdf8916dbd5cd0766e08d6a6302f7781da0478f
Merge: db44ea9 366e73f
Author: ckoven <ckoven@gmail.com>
Date:   Tue Mar 7 18:24:30 2017 -0800

    Merge branch 'morenewdims' into track_cwd_in_fluxes

commit 366e73f87ad5d27033dfb0ce200f2cc60d24867c
Author: ckoven <ckoven@gmail.com>
Date:   Tue Mar 7 18:23:49 2017 -0800

    changed nlevcan to nlevleaf to avoid a name conflict with CLM's own different nlevcan

commit db44ea9170fd5bea397c4f9ce87e1a8918564750
Author: ckoven <ckoven@gmail.com>
Date:   Tue Mar 7 16:41:33 2017 -0800

    added site-level variables to track CWD_in from disturbance

commit 4fdb22a620d15d3dac351e79e8820c9f9d8f781b
Author: ckoven <ckoven@gmail.com>
Date:   Mon Mar 6 20:37:37 2017 -0800

    fixed unit error in CWD flux variables

commit 316bf25e59ac8437e986491d1d69e2d517bf4818
Merge: 1a54324 66f9f4f
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Mon Mar 6 15:05:11 2017 -0800

    merged changes into lower_termination_threshold

commit 65b92e86bf4628b555506cd7c0e531e4e2f859e6
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Mon Mar 6 14:48:21 2017 -0800

    resolved some naming conflicts from merge of Ryans PR

commit be6efbf24d06965b7857a38bc1940d2a07f7de6d
Merge: dda6ff7 66f9f4f
Author: ckoven <ckoven@gmail.com>
Date:   Mon Mar 6 14:14:00 2017 -0800

    merged new_mort_diagnostics into morenewdims

commit 66f9f4f45a2c9ff9b7f43b7cfe5f2fcebbe180be
Merge: 8df637e 5d0267f
Author: Charlie Koven <ckoven@users.noreply.github.com>
Date:   Mon Mar 6 14:05:46 2017 -0800

    Merge branch 'master' into new_mort_diagnostics

commit 9c639ec0b5f59e2cd42a5f7ec39d46243e4c8480
Author: ckoven <ckoven@gmail.com>
Date:   Mon Mar 6 09:27:40 2017 -0800

    added first set of params (allometric only)

commit dda6ff75d4e282b2db9096d6d9f34d74787c0f62
Author: ckoven <ckoven@gmail.com>
Date:   Sun Mar 5 19:46:25 2017 -0800

    added more cwd vars to understand size-resolved fluxes & turnovers

commit 95df6b5a30efe25c2ca72844fa632c70ac4bb1aa
Author: ckoven <ckoven@gmail.com>
Date:   Sun Mar 5 17:06:38 2017 -0800

    fix to units and history updating

commit 1119938d190164a977c3759bdb37e5af01754b5d
Author: ckoven <ckoven@gmail.com>
Date:   Sun Mar 5 14:38:46 2017 -0800

    bugfixes to loop over patches correctly and also a variable definition

commit a6860d8bc7bb3f92bfcccda52ceeabe6dd6b449a
Author: ckoven <ckoven@gmail.com>
Date:   Sun Mar 5 11:06:19 2017 -0800

    added vars on new canopy vertical radiation dimensions

commit 8e02e77b05a02cd659ac1be5281e8ea90add1eaa
Author: ckoven <ckoven@gmail.com>
Date:   Sat Mar 4 22:27:17 2017 -0800

    first attempt to put in canopy, canopy*leaf, & canopy*leaf*pft dimensions

commit f8f9918ac7417b737467f6d24439cda2f285032d
Author: ckoven <ckoven@gmail.com>
Date:   Sat Mar 4 14:22:11 2017 -0800

    new dimensions for fuel and cwd, with new vars and code cleanup

commit 8df637eb1a86e16ac8e8162fba41d7e6431a5f3d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Mar 3 11:23:43 2017 -0800

    Swapped indices on terminated_nindivs array, bugfix.

commit 5d0267fe0aba9350f6c01f270428219f94dfd63f
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Mar 2 14:24:40 2017 -0800

    Changed endrun in EDPhysiology to point to fates_endrun() in FatesGlobals.

commit d1be5a26510e85173342079516005caaa5d58661
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Mar 2 13:53:56 2017 -0800

    Cleaned up endrun use statements in EDAccumulateFluxes, also removed unnecessary call to IEEE arithmetic.

commit b52f091a598021a5c7e9e3f348bb99d8cd299482
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Mar 1 12:06:47 2017 -0800

    Made a fix to indexing and storage of water-memory.

commit 1a54324ca3b28594e110519055536aa688feb424
Merge: 117b083 e93fdc8
Author: ckoven <ckoven@gmail.com>
Date:   Thu Feb 23 13:06:39 2017 -0800

    Merge branch 'dont_terminate_in_canopy' into lower_termination_threshold

commit 117b083886105b7ee2e9b56677c147fa9525f7e0
Merge: 40f10ee cc1b341
Author: ckoven <ckoven@gmail.com>
Date:   Wed Feb 22 20:31:07 2017 -0800

    Merge branch 'new_mort_diagnostics' into lower_termination_threshold

commit cc1b341d36803ceb52e3527dfbda2d5694a5d839
Author: ckoven <ckoven@gmail.com>
Date:   Wed Feb 22 13:49:07 2017 -0800

    fixed a unit error on the canopy/understory-reoslved tissue npp fluxes, which was traced back to a wrong description in EDTypesMod.  Also cleanup.

commit bb6b472fe149f9a7a7283958fc41ec19aae42fe7
Author: ckoven <ckoven@gmail.com>
Date:   Wed Feb 22 12:47:33 2017 -0800

    fixed unit error on mortality_carbonflux_canopy and mortality_carbonflux_understory

commit d270ddc84a8c90a9ea7208b010123024660b8ce4
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Feb 22 13:46:24 2017 -0700

    Dead code removal of edpftconrd
    
    EDpftconrd was commented out in a previous commit, but it is no longer
    needed and should have been completely removed.
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: ed-clm-3f3f16f
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: all tests pass

commit e93fdc837ba357d7f3567be91d92a05e44cc4c64
Author: ckoven <ckoven@gmail.com>
Date:   Wed Feb 22 11:04:27 2017 -0800

    removed calls to terminate_cohorts in EDCanopyStructureMod.F90

commit 40f10eeaef80feba84da6d315830112c181195ac
Author: ckoven <ckoven@gmail.com>
Date:   Wed Feb 22 10:26:45 2017 -0800

    reduced thresholds for cohort termination due to small number densities to allow cohorts to demote successfully

commit fb3548534e1cf2224621368434535b0f00d409b2
Author: ckoven <ckoven@gmail.com>
Date:   Wed Feb 22 09:45:03 2017 -0800

    bufix and some cleanup

commit 11bd0485a8f04d68d9b6c1f99b06d8af90b7a539
Author: ckoven <ckoven@gmail.com>
Date:   Tue Feb 21 22:01:19 2017 -0800

    fixed unit error and also added new diagnsotics on carbon fluxes from mortality and promotion

commit 73ae2082b21424bd17665e70c719a0eff1bc0c2a
Author: ckoven <ckoven@gmail.com>
Date:   Tue Feb 21 12:19:53 2017 -0800

    added new vars on demotion rates and updated prior canopy level to allow fusion

commit 120c8e27c0ae344b944f79be6144b53d8380b195
Author: ckoven <ckoven@gmail.com>
Date:   Thu Feb 16 13:42:15 2017 -0800

    added a diagnostic to track the relative fraction of understory individuals of a given size class who were demoted on a given timestep

commit 9677bf9beeab807fbadcd07d76b113e54f891780
Merge: a8e75f9 ac0a2a5
Author: Ben Andre <andre@ucar.edu>
Date:   Tue Feb 14 16:34:50 2017 -0700

    Merge remote-tracking branch 'ngeet/master' into andre-ed-params
    
    Note: both the branch and master have changed answers, so there is no
    easy way to test the merge against a baseline.
    
    Test suite: ed - yellowstone gnu, intel, pgi
                   - hobart nag
    Test baseline: none
    Test namelist changes: yes, add fates_paramfile
    Test answer changes: yes
    Test summary: all tests pass
    
    Test suite: clm_short - yellowstone gnu, intel, pgi
    Test baseline: clm4_5_12_r195
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: all tests pass

commit 684e7ab7c35e5d53bd7ab1245e3394b269699a16
Author: ckoven <ckoven@gmail.com>
Date:   Tue Feb 14 16:22:02 2017 -0800

    fixed 2 bugs: one unit and one restart

commit 4efca1b8b99ec9cc738c8bb8142a8c7b5627497c
Merge: d8b7d08 805d046
Author: Charlie Koven <ckoven@users.noreply.github.com>
Date:   Tue Feb 14 11:24:39 2017 -0800

    Merge pull request #1 from rgknox/new_mort_diagnostics
    
    Fixed some long-names in SCPF type history variables.

commit d8b7d08dc5cf9a893cadfd2efbfd34ce86f9476c
Author: ckoven <ckoven@gmail.com>
Date:   Tue Feb 14 11:23:05 2017 -0800

    added yet more diagnostics to disaggregate the canopy/understory and size-resolved cohort carbon budgets

commit 805d046096c077456dc7057e4358789c83575006
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Feb 14 10:41:43 2017 -0800

    Fixed some long-names in SCPF type history variables.

commit a8e75f999cbf7b58c48a6624e40f9002dc64a126
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Feb 10 13:12:07 2017 -0700

    Apply fates_ namespace to fates parameters.
    
    Fates parameters and dimensions have are now namespaced with 'fates_'
    in the input parameter file. This allows fates and clm to share an
    input file without name collisions. Update to new default parameter
    file with proper namespace.
    
    User interface changes?: yes, all fates input via the netcdf input
    parameter file must be namespaced with 'fates_' for both parameter and
    dimension names.
    
    Test suite: ed - yellowstone gnu, intel, pgi
                   - hobart nag
    Test baseline: a651a4f
    Test namelist changes: yes, add fates_paramfile
    Test answer changes: bit for bit
    Test summary: all tests pass
    
    Test suite: clm_short - yellowstone gnu, intel, pgi
    Test baseline: clm4_5_12_r195
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: all tests pass

commit 9f3d6a68b4bc42e7cae5049b5ae5aaa21f1f949f
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Feb 9 16:13:19 2017 -0700

    Dynamic allocation of fates pft parameters.
    
    Dynamically allocate pft parameters based on the input data size from
    the parameter file instead of a hard coded dimension size..
    
    Test suite: ed - yellowstone gnu, intel, pgi
                   - hobart nag
    Test baseline: a651a4f
    Test namelist changes: add fates_paramfile
    Test answer changes: bit for bit
    Test summary: all tests pass.
    
    Test suite: clm_short - yellowstone gnu, intel, pgi
    Test baseline: clm4_5_12_r195
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: all tests pass.

commit 5a34ab826769dd4db7c56c5f8da925ec046293ac
Author: ckoven <ckoven@gmail.com>
Date:   Thu Feb 9 19:41:32 2017 -0800

    indexing bugfix

commit 7730bc137fcf37645462850443ca84c380d41625
Author: ckoven <ckoven@gmail.com>
Date:   Thu Feb 9 16:04:02 2017 -0800

    turned off seed homogenization

commit b2509eeb9c55276a4b856ed78a0a6f1c5aace781
Author: ckoven <ckoven@gmail.com>
Date:   Thu Feb 9 15:06:25 2017 -0800

    cleanup, new default-on scls summary vars, and aggregation of canopy/understory scpf mortality rates

commit df550ccecade2be62faf91469d64457327874451
Author: ckoven <ckoven@gmail.com>
Date:   Thu Feb 9 13:20:29 2017 -0800

    added a recruitment rate variable to history so that we can ensure conservation of individuals

commit c5f9e016990378e00a0c96a4d14521f86428d10d
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Feb 8 15:06:16 2017 -0700

    Check fates parameter dimensions when reading from file.
    
    Automatically check the number of dimensions and their names when
    reading fates parameters from the file. Compare the data on file
    against what is expected by the code.
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: a651a4f
    Test namelist changes: add fates_paramfile
    Test answer changes: bit for bit
    Test summary: all tests pass

commit 3f683df40b0f45c9e23be849bc54aaa0502ffbe1
Author: ckoven <ckoven@gmail.com>
Date:   Wed Feb 8 15:20:55 2017 -0800

    added new mortality term to report terminated cohorts and also redefined the newish canopy_area_by_patch_age variable

commit 33bb9deea25417228b13da772c115b341c2a34ab
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Feb 8 14:54:28 2017 -0700

    Update some fates scalar parameter representations.
    
    The fates input file has two ways of indicating scalars, true scalars
    and 1-D arays with length 1. Inorder to check dimensions and compare
    code expectations vs what is on the file, we need to more clearly
    distinguish between these two ways or represeting scalars.
    
    Test suite: SMS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: a651a4f
    Test namelist changes: addition of fates_paramfile
    Test answer changes: bit for bit
    Test summary: pass

commit e5cd3a0e04e8ccc0c1604f30a4b06104297edf57
Author: ckoven <ckoven@gmail.com>
Date:   Tue Feb 7 14:34:55 2017 -0800

    fixed a unit error

commit 610128d9030e1e48337b9deaf41ca5ea1b91e366
Author: ckoven <ckoven@gmail.com>
Date:   Tue Feb 7 13:33:32 2017 -0800

    added more canopy/understory diagnostics on ddbh, gpp, and ar

commit 043099be6c1bd2cd436b3c0b4d437b035ae9ee73
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Feb 6 14:17:50 2017 -0800

    Some calls to fates_endrun() were not passing messages.

commit c0d352e61aeefd4123a1d64b5c383c15550c23e8
Author: ckoven <ckoven@gmail.com>
Date:   Mon Feb 6 13:58:08 2017 -0800

    added new diagnostics on canopy/understory plants, carbon storage, and carbon mortality

commit cd39de95c9c4e3ab2bb8253fb3e6a8e6e25b5905
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Feb 6 12:41:57 2017 -0800

    Changed endrun() to require a message.

commit 5f0b43bcc5a7e07b094f4b83aba0b3868699507b
Merge: d94d062 ac0a2a5
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Feb 6 12:36:51 2017 -0800

    Conflict resolutions on merge with master.

commit 33f8bd6e0d8aed9787adfc56693f849bedc83979
Merge: 641e0e9 ac0a2a5
Author: ckoven <ckoven@gmail.com>
Date:   Mon Feb 6 11:10:54 2017 -0800

    Merge branch 'master' into homogenize_seeds

commit ac0a2a51f20267a81e72f29034bd89bc56d935fe
Merge: eec3a50 c24bf50
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Feb 3 11:04:53 2017 -0700

    Fixes to carbon accounting and lr2 machine files
    
    Merge branch 'rgknox-leafnpp-diag-fix'
    
    This pull request mostly deals with some bug fixes to carbon
    accounting. @jenniferholm noticed that the diagnostics for leaf_npp
    were periodically showing negative values. Through #164 we identified
    that this occurred because daily carbon balances during the allocation
    sequences were sometimes negative to to high respiration and low
    gpp. The model was correctly using storage carbon to "pay" the
    negative daily carbon balance and allow maintenance respiration to
    occur, it was not however correctly diagnosing this flow. The
    accounting of this process is a little complicated because storage can
    be used to pay for maintenance respiration as well as maintenance
    turnover demand.
    
    During the process of verifying that carbon accounting errors were
    low, I triggered spurious values of output variables that triggered
    netcdf write errors, this lead to the identification that
    cohort%npp_accum was not being properly copied during copying of
    cohorts during patch fission.
    
    A fix was needed to lawrencium machine files for its lr2 partition for
    serial runs. While these changes are unrelated to carbon accounting,
    they are trivial and simple, so I bundled them here.
    
    Fixes: #164, #169, #168 and possibly #154
    
    User interface changes?: no
    
    Code review: requesting @jenniferholm and @serbinsh for evaluation in
    their science algorithms.
    
    Testing:
      rgknox:
        Test suite: lawrencium lr3 (baseline) and lawrencium-lr2 (non-baseline) edTest, Rapid Science Check tool (single site multi-decadal analysis)
        Test baseline: 5c5928f
        Test namelist changes: none
        Test answer changes:
        Test summary: all PASS
    
      andre:
        Test suite: ed - yellowstone gnu, intel, pgi
                         hobart nag
        Test baseline: 30f84d7
        Test namelist changes: none
        Test answer changes: bit for bit
        Test summary: all tests pass
    
        Test suite: clm_short - yellowstone gnu, intel, pgi
        Test baseline: clm4_5_12_r195
        Test namelist changes: none
        Test answer changes: bit for bit
        Test summary: all tests pass

commit eec3a50ff12c15d4b8b0caaa4858b8971ebb5337
Merge: f31a2fe 706df0a
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Feb 2 14:34:05 2017 -0700

    Added three new history variable dimensions
    
    Merge branch 'switch_pftvars_dims'
    
    Added three new history variable dimensions: size, age, and PFT.
    
    Previously you could add variables on a multiplexed size x PFT
    dimension, but not just size, and just PFT was using the levsoi
    dimension instead of its own dedicated dimension. Also there was no
    way to output things binned by patch-age, and the multiplexed
    dimension is a bit unwieldy such that none of those variables are
    default-on. Since the dimension definitions straddle the FATES-HLM
    interface, fixing these will be trickier to change once the interface
    is in place; also we will soon want the mxpft that sets the length of
    the PFT dimension to be a runtime-set parameter, so separating it from
    nlevsoi removes a currently-implied dependency that mxpft must be less
    than nlevsoi. In addition to adding these dimensions, I also pulled
    all the old PFT-resolved variables off of the nlevsoi axis and onto
    the new PFT axis, and added some new variables on the size and age
    axes. These include a default-on basal area by size class diagnostic,
    and some new diagnostics about the patch age distribution, npp, gpp,
    and canopy and leaf areas resolved by patch age.
    
    Fixes: #145
    
    User interface changes?: No
    
    Code review: went over most of the code with @rgknox
    
    Testing:
      ckoven:
        Test suite: ed test suite on lawrencium-lr3, intel
        Test baseline: a5dc8da
        Test namelist changes: n/a
        Test answer changes: bit for bit
        Test summary: ALL PASS
    
      andre:
        Test suite: ed - yellowstone gnu, intel, pgi
                         hobart nag
        Test baseline: a1c3d20
        Test namelist changes: none
        Test answer changes: bit for bit - see note
        Test summary: ok, functionality tests pass, baselines ok.
    
        Test suite: clm_short - yellowstone gnu, intel, pgi
        Test baseline: clm4_5_12_r195
        Test namelist changes: none
        Test answer changes: bit for bit - see note
        Test summary: ok, functionality tests pass, baselines ok.
    
        NOTE: cprnc does not compare variables when the dimensions have
        changed. Since the dimensions of some varibles have changed with
        this work, those variables can not be confirmed to be bit for
        bit. Depending on the version of cprnc that is installed this
        skipping of variables is either silently ignored or triggers an
        error resulting in a test failure. The cprnc on hobart (and I
        assume lrc) ignore this difference. The cprnc on yellowstone
        reports these a test failures. Passing baseline comparisons on
        hobart and no RMS differences on yellowstone support that this is
        still bit for bit for the checked fields.

commit c24bf50fbee81381f3d730ef42500bc5a32159be
Merge: 8eafe07 f31a2fe
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Feb 2 14:18:41 2017 -0800

    Merge conflicts resolved.  Nastiest conflicts were insdie allocate_live_biomass() where the day frequency was updated in master and the head had some pretty drastic overhaul on order of operations.

commit 256550a500e282d1790426377b55c3156fda3370
Author: Ben Andre <andre@ucar.edu>
Date:   Sat Jan 28 14:58:20 2017 -0700

    Convert ed pftvarcon to use new parameter interface.
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: a651a4f
    Test namelist changes: fates_paramfile
    Test answer changes: bit for bit
    Test summary: all tests pass
    
    Test suite: clm_short - yellowstone gnu, intel, pgi
    Test baseline: clm4_5_12_r195
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: all tests pass

commit 3f4249df1f251618ffb40497c25de5dec11c4b31
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Jan 27 14:46:22 2017 -0700

    Add hooks to read host parameters used by fates from the host file.
    
    Add logical flags to read infrastructure to distinguish between host
    files and fates files. Host and fates parameters are read from the
    correct file to avoid read errors with invalid dimension ids. Read
    EDSharedParams with new infrastructure.
    
    User interface changes?: no
    
    Test: SMS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: a651a4f
    Test namelist changes: addition of fates_paramfile
    Test answer changes: bit for bit
    Test summary: pass

commit 79ffbdaea758a5cc0a5d0905aac8f1e56d2583eb
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Jan 26 10:00:25 2017 -0700

    New infrastructure to read fates array parameters.
    
    Register and receive array parameters in fates with the host
    reading. Host allocates the data buffer based on the size of the
    largest used parameter dimension. Tested with spitfire array
    parameters. Some error checking of dimension sizes read from file vs
    memory size that fates is expecting.
    
    User interface changes?: no
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: a651a4f
    Test namelist changes: fates_paramfile
    Test answer changes: bit for bit
    Test summary: all tests pass
    
    Test suite: clm_short - yellowstone gnu, intel, pgi
    Test baseline: clm4_5_12_r195
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: all tests pass

commit f493ad8bb690bb04c26fcd34ec90fd3ddfc28a6e
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Jan 20 12:56:19 2017 -0700

    Start reading spit fire scalar parameters with new infrastructure.
    
    User interface changes?: no
    
    Test: ERS_D_Ld5.f10_f10.ICLM45ED.yellowstone_gnu.clm-edFire
    Test baseline: a651a4f
    Test namelist changes: fates_paramfile
    Test answer changes: bit for bit
    Test summary: pass

commit 9ed4d8c53fef1bb536c5f5b7ac07c6f1dc287aa2
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Jan 20 10:27:21 2017 -0700

    Move grperc parameter into EDPftvarcon
    
    EDParams is primarily scalar values, grperc was the only pft
    parameter. This moves grperc into EDPftvarcon with the other pft
    parameters.
    
    User interface changes?: No
    
    Code review: andre
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: a651a4f
    Test namelist changes: yes, addition of fates_paramfile
    Test answer changes: bit for bit
    Test summary: all tests pass

commit 8f8396971a129d4822e85f1b4d97be9b613c9d7a
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Jan 19 13:36:00 2017 -0700

    First pass at FatesParametersInterface
    
    First implementation of FatesParametersInterface to allow fates to
    request a parameter set be read by the host. Implementation is used
    for scalar parameters. Initial implementation of 1d and 2d arrays is
    done, but not used (and not expected to work) until further refinement
    of array dimension bounds is implemented.
    
    User interface changes?: No
    
    Code review: andre
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: a651a4f
    Test namelist changes: yes, addition of fates_paramfile
    Test answer changes: bit for bit
    Test summary: all tests pass
    
    Test suite: clm_short - yellowstone gnu, intel, pgi
    Test baseline: clm4_5_1_r195
    Test namelist changes: no
    Test answer changes: bit for bit
    Test summary: all tests pass

commit 6cc76bd17d218282f641239a261d4406b8b2b621
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Jan 18 12:55:46 2017 -0700

    Read fates parameters from their own file.
    
    The fates parameter file is now specified via a separate namelist
    fates_paramfile. This variable may or may not point to the same netcdf
    file as the host parameter file. All fates parameters are read from
    this file, including the pft level variables, which are now stored in
    EDpftvarcon instead of pftcon. Note that some parameters are shared
    between the host and fates. These are 'host' parameters, not fates
    parameters and are read from the host file.
    
    Work for NGT-ED Github issue #155
    
    User interface changes?: Yes. Users who have custom parameter files
    will need to set namelist varible 'fates_paramfile' to point to their
    file instead. Host parameters are still read from the file specified
    by namelist variable 'paramfile'. If users have modified host
    parameters in addition to fates parameters, they will need to update
    both namelist variables.
    
    Code review: andre
    
    Test suite: clm_short
    Test baseline: clm4_5_12_r195
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: all tests pass
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: a651a4f
    Test namelist changes: yes, new namilest var fates_paramfile
    Test answer changes: bit for bit
    Test summary: all tests pass

commit d94d0629803f9bf05534e6c859eec106dbefdc97
Author: Ryan Knox <rgknox@gmail.com>
Date:   Fri Jan 27 12:31:32 2017 -0800

    Removed the necessity of allocating fates sites when fates is not running.  Combined clm_fates%init and clm_fates%init_allocate.  Created a trivial cohort dimensioning scheme for non-fates runs.

commit 641e0e90622a1959c4d086e1645859011ce02405
Author: ckoven <ckoven@gmail.com>
Date:   Thu Jan 26 21:45:49 2017 -0800

    added seed homogenization mode to prevent compettive exclusion

commit cb6b124292523a4bb065ad7a2256ad7001eedaef
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Jan 25 15:05:45 2017 -0800

    This commit completes the re-shuffling of global variables in fates in this phase. The difference is that scalars dictated by the hlm going into fates are now living in FatesInterface mod where their wrappers are. Likewise, the varialbes that are dictated by fates and are destined for the HLM are also in this module, as are the wrapper call functions.  The wrapper call functions to set fates_maxElementsPerPatch and fates_maxElementsPerSite are called during Initialize1(), and fates_maxElementsPerSite is now used during decompInit instead of the ed_vec_cohort structure.

commit f79e3b7d3340ef212ea7f7f9387f20bddebbfde2
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Jan 24 14:04:12 2017 -0800

    Removed the ed_vec_cohort structure.

commit 5cb6a871044235336d2da2b47af3ef08d7bcef8d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Jan 23 17:31:21 2017 -0800

    First pass of creating maxElements, having it live in FatesGlobals and having it a dependent variable that goes on to set HLM allocations.  This pass also simplifies how HLM cohort<->grid,lu and column mappings are calculated. This is done by removing ed_cohort_vector. In this phase we have not removed that memory structure, but we are bypassing it.

commit 5900af9088e3774a1e9c7c7120a760137bf02db3
Author: Ryan Knox <rgknox@gmail.com>
Date:   Mon Jan 23 11:34:38 2017 -0800

    Partial changes to fixing update sequence of cohort and patch dimension globals.

commit 706df0a03f05c9068263b7a1d5272b615d76efb9
Author: ckoven <ckoven@gmail.com>
Date:   Fri Jan 20 19:19:53 2017 -0800

    as it turns out, the testing scripts don't like the changed PFT variable names. reverting.

commit a1b9d69420e4334bb6762d1a786e1d47af2d46a9
Author: ckoven <ckoven@gmail.com>
Date:   Fri Jan 20 18:14:11 2017 -0800

    fixed some issues that rgknox pointed out in PR

commit 5088bc889dec11bea73b7c17af47ba4af91d9f25
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jan 19 18:02:04 2017 -0800

    Converted global calls to abortutilsmods endrun to fates endrun.  Also did some light cleaning of some other calls to the cime shares, mostly just for readability.

commit 9cfb73b772413a95fae11a08ab4637d255cc0f67
Merge: 0b2c163 f31a2fe
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jan 19 17:29:32 2017 -0800

    merging in the veg dynamcis refactor brought a conflict in FatesGlobals. Fix was trivial, both branches added a subroutine there, both subroutines are still relevant and orthogonal.

commit 8eafe07c7ec819e1eed5597ca1174b6c85313b26
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jan 19 17:22:13 2017 -0800

    Typo fix in setting updated root biomass during growth.

commit 0b2c1630075134ef05ef4dd5a271d5cf1fdf6b44
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jan 19 17:19:08 2017 -0800

    Added a FATES wrapper to the CIME shared endrun

commit 6890a686c11dd587d72dc04793c4172e7b2af0e8
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jan 19 15:52:35 2017 -0800

    A fix was added to properly account for the npp flux to roots and sapwood in cases where there were no leaves.  This case was not being triggered in typical testing, as there were no deciduous trees entering this condition. Its still not entirely clear why we are encountering trees that have no leaves yet are carbon positive, but that is not completely within the scope of this fix.  This fix was tested using a multi-year f45 simulation and a special PFT set that jaholm developed that includes some temperate species, total of 5 pfts.  This configuration also tripped a false positive warning message that occured while processing output boundary conditions in btran. It was assuming that transpiration uptake weighting was summing to unity after receiving conductance weighting from different pfts. I think previously we were getting unity just by luck of all pfts having the same root extinction parameters.  The warning message complained and re-normalized. I simply removed the complaint, as the re-normalization was required for most cases. I also removed a pesky LHP log message by binding it in a debug.

commit 9d70ed6769f5d8ba1d496b24c8ce154d1bdd21df
Author: ckoven <ckoven@gmail.com>
Date:   Thu Jan 19 13:40:39 2017 -0800

    moved the old pft variables to the new pft dimension

commit aedee0c02d9dd64e8967f060fadd2f2ef781077c
Author: ckoven <ckoven@gmail.com>
Date:   Thu Jan 19 11:58:52 2017 -0800

    added npp and gpp by age class diagnostics

commit 146ddd1fbcb6fce46eb1605027ddc020a103544d
Author: ckoven <ckoven@gmail.com>
Date:   Wed Jan 18 17:09:47 2017 -0800

    added a couple new diagnostic variables on age class dimension

commit 21bb9944ec01bd581212af9a43b5bffb2843cdc3
Author: ckoven <ckoven@gmail.com>
Date:   Wed Jan 18 14:54:00 2017 -0800

    fixed an error in pft biomass calculation and also a metadata issue on the patch age axis that made ferret display time weirdly

commit 87ea4e78095a7a353983eda444d2517bce3ee025
Author: ckoven <ckoven@gmail.com>
Date:   Tue Jan 17 14:55:09 2017 -0800

    removed the patch x size shape since it isn't used and could be buggy

commit ae206fe01dc003758cecbb71bbad33a63ec61a6d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Jan 17 11:49:54 2017 -0800

    Removal of ieee_ nan and inf checks. There was concern that many compilers have not adopted ieee_ checking functions and we would lose compiler compatibility.

commit fed50d4baa319ae4a3ce1edbb3347739bd248b00
Merge: d8a8191 28d782e
Author: ckoven <ckoven@gmail.com>
Date:   Fri Jan 13 15:41:36 2017 -0800

    Merge branch 'master' into sizeclassdim

commit d8a81915e2da439a7c6e30e1b15d872b1aaaa37f
Author: ckoven <ckoven@gmail.com>
Date:   Fri Jan 13 15:39:36 2017 -0800

    changed page to age throughout to clarify meaning

commit f31a2fe9ede8cfbcf99e9e9037ed870b75c3b9d2
Merge: 84f0d13 28d782e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jan 13 11:32:59 2017 -0800

    Conflict resolution on merge. EDtypes on HEAD had the new cp_masterproc variable, while master had the use_fates_plant_hydro variable, both added to same section. Both are valid in the merge.

commit 394159c7cbeda10829549233b577e54e7e22e157
Merge: 8a37384 28d782e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jan 13 11:24:06 2017 -0800

    Trival merge conflict resolution.  Both head and master had the bugfix in the copying of npp accumulation during cohort copying.

commit 84f0d13cd64f74ac2ec054852bb836f12fe73f5a
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jan 12 17:30:34 2017 -0800

    Removed the use of the HLMs grid area global ldomain(g)%area from SF.

commit 6f76add8d91dbeae80d01bb1c77d165a7fef189b
Author: ckoven <ckoven@gmail.com>
Date:   Thu Jan 12 17:20:27 2017 -0800

    actually with debug off it doesn't crash. reinstating new variables.

commit ecff740377a4b7d02ee2357b9f7dc65965086d1d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jan 12 16:35:04 2017 -0800

    Finished first pass of time-control refactor.

commit 8c82daffc08e003a09390d2eac63d76ed1355841
Author: ckoven <ckoven@gmail.com>
Date:   Thu Jan 12 16:10:21 2017 -0800

    fixed one bug but still crashing

commit 03375f4eddc9f8e980f5b6f2baf51b96aec628e1
Author: ckoven <ckoven@gmail.com>
Date:   Thu Jan 12 15:52:35 2017 -0800

    added age and pft dimensions to history; however it is crashing in subgridAveMod.F90

commit 1307cd56cfbea6a6d1d9f676db581ae5475c656b
Author: ckoven <ckoven@gmail.com>
Date:   Wed Jan 11 20:48:17 2017 -0800

    added size class only dimension and a basal area variable on that dimension

commit 5730ebe63b6ec8674ed8c702d7b6cef6c67661f4
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jan 11 19:04:35 2017 -0800

    Partial re-working of time-control from host to FATES.

commit 55817d1c292ec979ff2748d2fd108b84a025a441
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jan 11 17:25:50 2017 -0800

    Missed a fix on the merge with master: in FatesInterfaceMod, allocation of boundary conditions was using numPatchesPerCohort while master changed that to maxPatchesPerCohort.

commit 47f46a1a91aef3c0a8799742cb4d631c96eb26fe
Merge: d7f4066 613a301
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jan 11 17:18:44 2017 -0800

    Trivial merge conflict with master. Both branches slightly modified the globals at the top of FatesInterfaceMod. master had a slightly different variable name, while the head had added cp_masterproc.

commit d7f4066da05ac4ca5fa0f006c1f401950f494cfb
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jan 11 17:15:18 2017 -0800

    Added masterproc (used in firemod for log messaging) to the control parameters passed during initialization. Tracked down other instances of use, and also fixed calls to clm version of r8 or iulog when found.

commit f7a2c16969275bc21925cf792ab8657d2fd2eee2
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jan 11 15:13:44 2017 -0800

    Removal of CLM boundary conditions to fire model and some CLM globals.  ldomain%area(g) is still called in fire model, as well as masterproc and use_spitfire.

commit 39d59b27978ae4be6494cf35960276b5ebdc620a
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jan 11 14:26:36 2017 -0800

    Clean up of globals in EDPhysiology

commit 34664237e5e7f26db9cda36ca6fa30bba6fc31e2
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Jan 10 17:23:35 2017 -0800

    Purging waterstate_inst, soilstate_inst from calls to dynamics and replacing it with bc_in.  Temperature_inst for all calls but fire are also purged. Compiles and runs, not regression tested.

commit 28d782e7c44a2a9237d397fae1599e508eb44489
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Jan 9 14:06:31 2017 -0800

    Small bug fix on previous merge conflict.  Changed index ordering on temp photosynthesis arrays for performance.  Added in a fix currently in another PR to help with testing (npp_acc in copy cohort).

commit 3d34bd2cb013613217531b32df74dad5b5c47e37
Merge: 66781e0 613a301
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Jan 9 12:07:37 2017 -0800

    Merge branch 'master' into rgknox-more-photo-refactors

commit 0e9476e373a5180a06c0ccfcb2f3fd0c97d895ea
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Jan 8 21:39:55 2017 -0800

    Converted 24 vegetation temperatures used in phenology to bc_in

commit 195a0b24105c93d485ad296351a2684b22d5c184
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jan 6 16:05:00 2017 -0800

    Initial changes to timing boundary conditions, mostly directed towards the calculation of model-day for phenology.

commit 8a373846fd390366ec23be6ec9400804a141f37b
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Jan 6 12:46:13 2017 -0800

    Bug fix: in copy cohort, npp_acc was not being copied! Now it is.  This was leading to NaNs later on in runs and causing lots of problems. I added some numerical inquiry intrinsics to catch bad values, but I am considering putting them in a different place.

commit b3493b84d1e6143cd82063e0932db09ad0c54433
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jan 4 13:30:47 2017 -0800

    CHanged the carbon accounting to when bleaf(cohort)<=0 to a failure. Added some print statements (temporarily).

commit 7d36492182245de083bf1d8f0b29ef337c63a956
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jan 4 12:00:45 2017 -0800

    Potential fix to the negative leaf npp accounting problem. Still working on some diagnostics.  Diagnostics are generating a floating point error.

commit 66781e013fd68815723a6639ef5693b820747e6e
Merge: a8766bf 6d31307
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Dec 21 13:48:00 2016 -0800

    Merge branch 'rgknox-more-photo-refactors' of https://github.com/rgknox/ed-clm into rgknox-more-photo-refactors

commit 6d31307d3095d51a131fef3e505ad125930023aa
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Dec 21 11:40:23 2016 -0800

    Some minor optimizations in leaf layer photosynthesis; including the commenting out of debug calls, setting the initialization of a loop earlier in the code to remove a logic call, and adding an optional fast quadratic solver that simply removes error checking.  The fast solve was left out, as this PR changegroup is not targetting optimization.

commit a8766bf946752f1a52730c2824d366cd166ccf1c
Merge: ad82d9a d9a27df
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Dec 20 14:57:40 2016 -0800

    Merge branch 'rgknox-more-photo-refactors' of https://github.com/rgknox/ed-clm into rgknox-more-photo-refactors

commit d9a27df96da7b8f94083233f4607e049f29bb2da
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Dec 20 14:56:48 2016 -0800

    Adding the parameter derived module to version control.

commit ad82d9ab8f5beb2358860116c7b704ade4178749
Merge: 11e122f 57888d9
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Dec 20 14:38:31 2016 -0800

    Merge branch 'rgknox-more-photo-refactors' of https://github.com/rgknox/ed-clm into rgknox-more-photo-refactors

commit 57888d9ea04ee7d46d8b9af32c96fdabfc66584d
Author: Ryan Knox <rgknox@gmail.com>
Date:   Mon Dec 19 14:55:50 2016 -0800

    Correction of minor typo.

commit 04b503e8eea2230e1e236a65d577d92991b567ff
Author: Ryan Knox <rgknox@gmail.com>
Date:   Mon Dec 19 14:54:06 2016 -0800

    Removed some unnecessary boundary conditions (LMR,PSN,GC). Reduced the scope of what is flushed in the photosynthesis mask to speed things up.

commit 11e122f18d5c5dc5db61daad42687a71a7372510
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Dec 9 14:52:19 2016 -0800

    Fixed index order on the rate_mask_z array.

commit 9af057a30794ce2f7731641af22116353913553d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Dec 6 15:27:29 2016 -0800

    Changed the name of the photosynthesis module to reflect that it is fates, not ED, and that it handles respiration as well as photosynthesis.

commit 95596ced44611c07b81f0291a38044f4a4507d08
Merge: e347c54 29b03dc
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Dec 6 15:21:55 2016 -0800

    Merge branch 'master' into rgknox-more-photo-refactors

commit 21c11c2deab9769ef9bca57c2c66364fe54ec397
Author: Jacquelyn Shuman <jkshuman@yslogin4.(none)>
Date:   Tue Dec 6 14:33:38 2016 -0700

    complete update of var 'use_ed_spit_fire' to 'use_ed_spitfire'

commit e347c545ebcbf989ef90618a562d63b1cf28273b
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Dec 6 11:22:23 2016 -0800

    More minor syntactical changes to photosynthesis, some comments.

commit 613a301272d1a3526dba53705a3f1326bdb57cf0
Merge: fc3f10a 29b03dc
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Dec 5 16:20:10 2016 -0800

    Conflict resolution: re-named gpp and npp accumulation/hold variables needed to be applied to the new restart variable list.

commit daa2aeb73244bf141183cb78c85bd4b01d3b13a7
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Dec 5 15:23:26 2016 -0800

    Some minor format refactors, mostly line length truncation and removing unused variables.

commit 682a17f1dad0dda6a309c7bc16b8790a1fdd2823
Author: Jacquelyn Shuman <jkshuman@yslogin4.(none)>
Date:   Mon Dec 5 15:25:03 2016 -0700

    variable change per spitfire cleanup
    updated 'use_ed_spit_fire' to 'use_ed_spitfire'
    Fixes: part of spitfire cleanup to variables
    user interface changes?: No
    Code review: JK Shuman
    Testing: none, will test following further variable cleanup

commit 021d2f19d2bfa6ef82076f5c31ba1565ec6b61a7
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Dec 4 16:17:41 2016 -0800

    Photosynthesis refactors: mostly formatting changes in this commit group.

commit 6fe1c217ac90527e68ba07b9adbcd1183b6a4fa5
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Dec 2 17:48:39 2016 -0800

    Modified the looping structure in photosynthesis to accomodate leaf layer variability at the cohort and pft level.  Also modularized the scaling of leaf-level fluxes back to cohorts.

commit 606998a9429e3db84257baf97812a2ea394e7e78
Author: Rosie Fisher <rfisher@yslogin1.(none)>
Date:   Fri Dec 2 14:59:40 2016 -0700

    first two non answer changing diffs. (nignitions and patch_area_in_m2)

commit 0c851895303bfd3d23fed353ff56ef692bd2162e
Author: Ryan Knox <rgknox@gmail.com>
Date:   Fri Dec 2 12:36:42 2016 -0800

    Added some documentation to the photosynthesis refactoring.

commit 14cda7a0f3d7e63ea01ce152df4eff284ae3fa5f
Author: Ryan Knox <rgknox@gmail.com>
Date:   Fri Dec 2 00:05:39 2016 -0800

    Turns out sapwood in photosynthesis is sometimes out of phase with that which calculated in the dynamics time-step. I removed the check during photosynthesis.

commit bffdbeb2d10d2198bffdd91ce4fb9f51608a48c0
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Dec 1 18:41:55 2016 -0800

    Photosynthesis refactor: most of the code has been re-organized. Next step is careful step-by-step pass through comparing with existing version.

commit 29b03dcc18a871d1908049929baccf1fc7021d69
Merge: 0bdf0d3 3982efd
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Dec 1 16:25:54 2016 -0700

    Resolve merge conflict with master.
    
    Merge branch 'master' into rgknox-warns-threadtests
    
    Resolve a trivial merge conflict in testlist_clm.xml
    
    Test: SMS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: none
    Teststatus: passed

commit 0bdf0d31830795dedf4c824357448d551737f496
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Dec 1 13:30:31 2016 -0800

    Reduced more line lengths to be compatible with nag. Also added a maximum line length to the eddi machine settings to help catch these before I submit.

commit 8b1e63ffda04ca576a59eccfd0bf0bcd5a78d34a
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Dec 1 13:14:55 2016 -0800

    Partial refactors on photosynthesis.

commit 242520955256d301e1087f59331406f730297ddd
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Dec 1 11:54:20 2016 -0800

    Reduced a line-length in EDCohortDynanicsMod.F90 to appease the nag gods.

commit 3982efd1fd909658c980226697e9a075a505e719
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Dec 1 11:59:29 2016 -0700

    Remove temporary_SF_switch
    
    Remove temporary_SF_switch. Spitfire is runtime configurable via name
    list and is now off by default. This switch was only used to disable
    spitfire at compile time.
    
    Fixes: 140
    
    User interface changes?: spitfire configured at runtime instead of
    compile time.
    
    Code review: self
    
    Test suite: SMS_D_Mmpi-serial_Ld5.5x5_amazon.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: 2ac7960
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: pass

commit fc3f10ad8e9fef4b6e10fd442d4aacd87a539bff
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Nov 27 16:48:46 2016 -0800

    Cleaned up restart variable names, long names and units.

commit 0c1d833e6c8678060325247a17cf668f59a75cb3
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Nov 23 15:56:00 2016 -0800

    During the call to pass vectors to linked list, I had the seed_bank passing reversed. Fixed.

commit 8aef388bfc1a17fbe058d7572f3d2c0047802ab0
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Nov 22 18:08:08 2016 -0800

    Changed to a flushing and initialization system that enables different flush types. The main reason for this is to enable strict comparisons with baseline restart files.

commit 2e6aabe0b0a30028e9ff2f09db24f690a4f83654
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Nov 21 14:56:29 2016 -0800

    Reverted some changes to test if the restart files created during ERS testing match with the baseline.

commit 5a35f70f247e5252fb8c2770c2e45feb265d998c
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Nov 20 14:36:20 2016 -0800

    Renamed a variable, some minor reformatting, changed mapping calculation.

commit 0efd21af8b8a46d0308f11f6f1dd273294e8a90c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Nov 17 17:09:01 2016 -0800

    Removal of old EDRestartVectorMod and some stail use calls to it.

commit 2201bac0cf0dd097637a745cb125de63530cd5e0
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Nov 17 16:21:58 2016 -0800

    Subroutine SetThreadBounds was a procedure in two different classes doing two different things, changed the name of one procedure to reduce confusion.

commit dfb7d4c54ee772b3545bfec46deeeea73503cb0e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Nov 17 15:14:19 2016 -0800

    Updated some variable names and tried to make naming conventions consistent across subroutines.  This mostly addressed how global indexing in the restart files was named.

commit e3760b29172ccc0520c02a322c769f20ae3fde2d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Nov 17 14:02:35 2016 -0800

    Some commenting and documentation. Removed a nann-ing of lat and lon in zero site.

commit d6654f3c5c67c6f681ef514e28902e9adaf2b570
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Nov 16 14:29:18 2016 -0800

    Forgot to add the new files to vc.

commit 6ad237e4420841f1ab48135c0dc21600c74d5285
Merge: d054d3b 09f3f11
Author: Rosie Fisher <rfisher@yslogin4.(none)>
Date:   Mon Nov 14 14:12:29 2016 -0700

    re-added testlist file that acidentally got deleted
    
    Merge branch 'master' into rosie/spitfire_cleanup
    
    Conflicts:
    	components/clm/cime_config/testdefs/testlist_clm.xml

commit d054d3bfb347d9f0fde560d48b7475597527c4ce
Author: Rosie Fisher <rfisher@yslogin4.(none)>
Date:   Mon Nov 14 13:50:12 2016 -0700

    Changes to namelist defaults to turn spitfire off

commit 65ef98405273d54509310a6d974d4c84bc8387a8
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Nov 13 15:14:06 2016 -0700

    Intial re-factoring of restarts to have object like variable, dimension and variable-kinds like history output has. This pass has not performed any checking, nor has it evaluated the call sequence or implemented updating or setting the array spaces.

commit 4c8232a8d765caf2c0a099dff066b8f5926426c0
Merge: 0dd05d1 09f3f11
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Nov 7 15:41:38 2016 -0800

    Merge branch 'master' into rgknox-warns-threadtests

commit 09f3f1168c6a94c93f35de4e840ec30926fe2349
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Nov 2 15:54:31 2016 -0600

    Fix typo and naming issue found during code review.
    
    Testing:
    
        Test: SMS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
        Test baseline: 53bbb9d
        Test status: pass
    
        Test suite: ed - yellowstone gnu, intel, pgi
        Test baseline: 53bbb9d
        Test status: all tests pass
    
        Test suite: ed - hobart nag
        Test baseline: none, previous master did not run under nag.
        Test status: all tests pass
    
        Test suite: clm_shorts - yellowstone gnu, intel, pgi
        Test baseline: clm4_5_12_r195
        Test status: all tests pass

commit 0dd05d11b801d60ee15c90b4a077f0bd7cb6b3c3
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Nov 2 15:30:06 2016 -0700

    Moved more print statements that were reporting when not in debug mode.

commit e22f5efe0dd74a5177655ff6d91d6bf0749c2dca
Merge: b5c20af a481ece
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Nov 2 15:32:48 2016 -0600

    Merge branch 'master' into andre-hist-io-refactor
    
    Test: SMS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: 53bbb9d
    Test status: pass

commit edf670046adbf90fbeadd289c119e19f9dae118c
Author: Ryan Knox <rgknox@gmail.com>
Date:   Mon Oct 31 17:58:09 2016 -0700

    Fixed the logic on a warning statement in create cohort.  The logic was tripping true for all restart initialization cases and producing false positive warnings.  I changed the logic to only trip in cases where the arguments passed into the routine signaled something was unusual, and in that case to kill the run instead of simply report.

commit a2a29ad47177e5959875b7dfbb313a8ee30006ad
Merge: 458f24d a481ece
Author: Ryan Knox <rgknox@gmail.com>
Date:   Mon Oct 31 16:39:54 2016 -0700

    the updating of dynamic history output variables had a conflict.  Resolution was straightforward.

commit a481ece4bb1afa0cf987a1b97176fb71c1bf2752
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Oct 27 15:56:34 2016 -0700

    Various syntactical fixes including: making rgas more explicit in its name, adding _r8 to local constants, adding an unset integer to global constants, removing some text that explained a constant.

commit b5c20af051152869c8e48d7d018b248c9264da88
Author: Ben Andre <andre@ucar.edu>
Date:   Tue Oct 25 11:58:10 2016 -0600

    Code cleanup for history names and whitespace
    
    Note: ammend commit, compilation errors with openmp on.
    
    Test: ERS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: 44aac42
    Test status: pass

commit 61ffe7cfa56f04affed7fd068e5a2869231daabc
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Oct 21 11:19:39 2016 -0600

    Source changes renaming the history interface module.
    
    Rename the history interface class and corresponding instance.
    
    Note: ammending commit, test was not a clean build, may not compile.
    
    Test: ERS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: 44aac42
    Test status: pass

commit 9a9e180e39f2440b36db17d064479dcb38f9cb70
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Oct 21 10:58:22 2016 -0600

    Rename HistoryIOMod.F90 -> FatesHistoryInterfaceMod.F90
    
    Rename the history interface file to have a consistent name other
    history related files. no source changes.
    
    Test: ERS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: 44aac42
    Test status: pass

commit d2c2a75cba0d9cad751b3e5f1c990e31c4a05100
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Oct 20 12:26:12 2016 -0600

    NAG bugfix: break line that exceeds 132 characters.
    
    Test: ERS_D_Ld5.5x5_amazon.ICLM45ED.hobart_nag.clm-edTest
    Test baseline: none (master didn't compile and run on nag)
    Test status: pass
    
    lease enter the commit message for your changes. Lines starting

commit 3e1e40f60f293a4e3bca2f8f24bc98017959c18d
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Oct 20 11:13:13 2016 -0600

    Refactor history output
    
    Move some history initialization details out of the clm fates
    interface and into the history module. Convert another pointer into an
    allocatable.
    
    Test: ERS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: 44aac42
    Test status: pass

commit ede4b914e59a94f02c1394bbae6d5e3010b7bf17
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Oct 19 17:02:40 2016 -0600

    Remove the pointers to fates history dims
    
    Remove the pointers to the fates_history_dimensions stored in the
    iovar_dimension kind types. Replace them with integer
    indicies. indicies point into an array of dimension types. The indices
    - name mapping and dim array is stored in the top level fates history
    io object passed into subroutines as read only data as needed.
    
    Test: ERS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: 44aac42
    Test status: pass
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: 44aac42
    Test status: all tests pass

commit 6e12b9f2d5dc3b275c904263d7b3726b32b1de9e
Author: Rosie Fisher <rfisher@yslogin5.(none)>
Date:   Wed Oct 19 08:22:38 2016 -0600

    turn temp_sf_switch on

commit 458f24d51efabc672014a6c9207d6d141d76559b
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Oct 18 20:33:28 2016 -0700

    Converted %npp and friends to %npp_acc_hold and friends. Documentation included. One free gpp with any resp of equal or lesser value.

commit ffa9315359d8e80b908ce98b092bbfe7aec69314
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Oct 18 14:47:02 2016 -0700

    Added cohort type variables size_class and size_by_pft_class. These variables were added to reduce the number of times these are re-calculated.  They are in some cases needed for history diagnostics updated at the finest model time-scale on cohort variables, this was likely a very expensive calculation, so it was moved to be calculated only on the dynamics timestep.

commit f1f92469b9a7abef643bef2a662e8098d2c0e917
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Oct 18 13:33:47 2016 -0700

    renamed some local variables related to nitrogen content.

commit 4073c329650beabdf687e9044132dde79233bf89
Merge: 62dad1c f9776d6
Author: Rosie Fisher <rfisher@yslogin4.(none)>
Date:   Mon Oct 17 14:27:15 2016 -0600

    Merge branch 'master' into rosie/spitfire_cleanup

commit 7324d84c43bd2e36edc399b85885de499bbdf5e7
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Oct 14 15:54:39 2016 -0600

    Refactor fates history to class and module for hist variables.
    
    Test: ERS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: 44aac42
    Test status: pass

commit 9e0a69ead3ab31feb415ca35ba37bb1bc23bba9a
Merge: 03e22fa f9776d6
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Oct 14 10:44:51 2016 -0600

    Merge branch andre-hist-io-refactor up to 44aac42
    
    Test: ERS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: 44aac42
    Test status: pass

commit 62dad1c1ccafa6027c4de70d8c214a044f6de63c
Author: Rosie Fisher <rfisher@yslogin6.(none)>
Date:   Fri Oct 14 10:14:45 2016 -0600

    turned off SPITFIRE temporary switch for testing

commit 03e22fa1883d8fa4af6b4b0f2f328977f5e6fad2
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Oct 14 09:46:40 2016 -0600

    Refactor fates history variable kind
    
    Refactor the fates history dimension kind struct, move it into its own
    module, create init function to remove copy-paste variable
    initialization.
    
    Test suite: ERS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: 49733e8
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: pass

commit 3185d951d5834cf5791ae3c36fe9fd42845afea0
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Oct 13 18:29:11 2016 -0700

    intercellular co2 in photosynthesis was being represented as an array that was unnecessary, a scalar was sufficient.  It was also calculated twice in the call sequence, where the first calculation was unnecessary and unused.

commit b831c63cf6bcaa732901990df7065362f8d432b7
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Oct 13 18:12:53 2016 -0700

    added some more global constants and uses in photosynthesis. Also, fixed a unit conversion error in maintenance respiration.

commit b154f718195d4e35b43876d59d3adc9c633c2ee9
Merge: 393875b f9776d6
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Oct 13 14:51:51 2016 -0700

    Merge branch 'andre-fates-constants' into rgknox-ckoven-froot-mr

commit 393875b48aa93fc76550789f8cab0edb6acdb775
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Oct 13 14:51:34 2016 -0700

    fixed hard-coded pft index in grperc found in photosynthesis

commit 552842b8fe153ff4318b0ec0e30e35a7939fdded
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Oct 12 16:35:39 2016 -0600

    Refactor fates history dimensions into standalone module
    
    Move the fates history dimensions class into a standalone module,
    along with the procedures for initialization and setting threads.
    
    Test suite: ERS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test baseline: 49733e8
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: pass

commit f9776d6047876c8f9eeed72a534f9085e189f6e3
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Oct 12 16:28:57 2016 -0600

    Remove special value constants from FatesConstantsmod
    
    The special values added int FatestConstantsMod weren't used at this
    time, and it's unclear if we need a fates specific set of special
    values, or if we only want to use the host value. Removing until
    needed.
    
    Testing: since this only removed unused code, compiled and ran:
        SMS_D_Ld5.f45_f45.ICLM45ED.yellowstone_intel.clm-edTest - passed

commit 05f6b6474df5405b2b0dba4afc24cdd8260d1903
Author: Ben Andre <andre@ucar.edu>
Date:   Tue Oct 11 16:18:35 2016 -0600

    Create FatesConstantMod to hold global constants
    
    Create FatesConstantMod to hold global cosntants for things like
    string length, kind types, spval and other immutable data. Initial
    values based on similar constants in CLM.
    
    Fixes: #135
    
    User interface changes?: none
    
    Code review: self
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: 49733e8
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: all tests pass
    
    Test suite: clm_short - yellowstone gnu, intel, pgi
    Test baseline: clm4_5_12_r195
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: all tests pass

commit e517f348beece1712544c3813bb82ef8d2a9602a
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Oct 11 21:37:58 2016 -0700

    minor fix, livecrootn was still in a print statement that I overlooked. I removed it.

commit c6a126c6c2aa4f3f74f8aa2cc31db99f33451aa7
Merge: fdcd695 ab20b12
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Oct 11 21:29:01 2016 -0700

    Merge resolution. EDCLMLinkMod was removed in master.  That file had once been used to calculate and update livecrootn, but the calculation had been moved to EDCanopyStructure.  To resolve the conflict I had to remove the calculation of livecrootn and livestemn from its new home.

commit fdcd6953965523dbe69c2b4b71e642b27884f691
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Oct 11 21:22:20 2016 -0700

    minor fix to update the pft index during the scpf output for photosynthesis

commit 79be4212d4dadd68a5934779fd046f71d73ae9af
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Oct 10 16:42:22 2016 -0700

    Added several AR diagnostics.  Also changed the units of dark-respiration to be consistent with the other maintenance pools.  However, the unit of kgC/plant/sec is likely to be a very very small number that is wasting precision. Contemplating changing units to umol/sec or kgC/yr.

commit 101f01dd438f783fcb930c040266b81dc75c740b
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Oct 7 17:02:50 2016 -0700

    fixed typo where MR of bg sapwood was double multiplied by bg root fraction

commit c89563c41aa26ce3512cc2ec2287961a736c4420
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Oct 7 16:52:56 2016 -0700

    Science fixes on sapwood and fine root respiration. First pass, no testing, compiles.

commit 6ec1211e85ffedb99e16f5f7399c928db66212bd
Merge: 1aebf3e cb2d8d0
Author: Rosie Fisher <rfisher@yslogin4.(none)>
Date:   Fri Oct 7 14:06:28 2016 -0600

    Merge branch 'master' into rosie/spitfire_cleanup

commit 1aebf3e6a1b74de1f89d3dde2b8bfb34de4cfcb2
Author: Rosie Fisher <rfisher@yslogin4.(none)>
Date:   Fri Oct 7 14:02:33 2016 -0600

    Modified two bugs in effective windspeed and in livegrass moisture found in SPITFIRE.

commit ab20b12b0de857ab998a6cfe193d6d79667f47d9
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Sep 27 16:40:34 2016 -0700

    Added a check to total_canopy_area that was omitted while clearing out ed_clm_link.  Fixed some diagnostic messages that were describing the originating file as EDCLMLinkMod.

commit 45bd765a232e0518064932abffa9faf4647c9970
Merge: 75310f1 cb2d8d0
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Sep 27 15:26:18 2016 -0700

    Merge conflicts were trivial, were all related to the fix on the macro to __FILE__.  EDCLMLInkMod had changes to that macro, but that file is completely deprecated.  EDCanopyStructure also needed an update on that call.

commit 75310f10557b9a4a339d768230336580f33e68bd
Author: Ryan Knox <rgknox@gmail.com>
Date:   Mon Sep 26 23:17:35 2016 -0700

    re-integrated clm_pno. Will remove its set when its use is no longer necessary.

commit d269731eba5de04f045e55607422c71fba47246d
Merge: 2e72266 d35425c
Author: Ryan Knox <rgknox@gmail.com>
Date:   Mon Sep 26 15:41:32 2016 -0700

    Merge branch 'master' into rgknox-CLMLink2

commit cb2d8d0913381fa30a2381461ec740a90534fa0b
Merge: d35425c b263948
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Sep 21 10:24:28 2016 -0600

    Merge ed-clm to clm4_5_12_r195, daded96
    
    Merge to more modern clm trunk tag.
    
    Testing:
    
      andre:
        Test suite: ed - yellowstone gnu, intel, pgi
        Test baseline: 1d86ab8
        Test answer changes: potentially answer changing
        Test status: all tests pass functionality, baselines pass for ed
                     compsets. answer changing for pure clm tests
          ERI_D_Ld9.f09_g16.ICLM45BGC.yellowstone_*.clm-default
          SMS_D_Ld3.f10_f10.ICLM45BGC.yellowstone_*.clm-default
    
        Test suite: clm_short - yellowstone gnu, intel, pgi
        Test baseline: clm4_5_12_r195
        Test answer changes: bit for bit
        Test status: all tests pass

commit d35425cb3f16a73c977e10ce238f319f32182ef1
Merge: d952171 cfec5d8
Author: Ben Andre <andre@ucar.edu>
Date:   Tue Sep 20 14:04:05 2016 -0600

    Refactor to incorporate EDCLMLinkMod into the fates interface
    
    Merge branch 'rgknox-CLMLink'
    
    This changegroup is the first of two parts to convert the contents of
    EDCLMLinkMod into the interface. Notable changes in this part:
    
    1) SummarizeNetFluxes and ED_BGC_Carbon_Balancecheck are refactored to
    use FATES memory structure
    
    2) history output variables in SummarizeNetFluxes and
    ED_BGC_Carbon_Balancecheck are migrated to the new scheme
    
    3) restart variables in EDCLMLinkMod are migrated to EDRestVectorMod
    
    Code review: rgknox
    
    Testing:
      rgknox:
        Test suite: ed, clm_short_45, clm_short_50 - lawrencium-lr3 intel
                    ed - yellowstone pgi, gnu, intel
        Test baseline: 0c8090b (rgknox-HIO)
        Test namelist changes: none
        Test answer changes: b4b
    
        Test summary: all PASS with expected fails for gnu compiler comparing
          clm history baselines, #122, fixed in #124:
            SMS_Ld5.f19_g16.ICLM45ED.yellowstone_gnu.clm-edTest
            SMS_Ld5.f10_f10.ICLM45ED.yellowstone_gnu.clm-edTest
    
      andre:
        Test suite: ed, clm_short - yellowstone gnu, intel, pgi
        Test baseline ed: 9f2b41c
        Test baseline clm_short: clm4_5_12_r193
        Test namelist changes: none
        Test answer changes: b4b
        Test summary: all tests pass
    
        Test suite: hobart-nag - not run, #123

commit 2e7226610d7e9bef95d3feffabfa208a8bfe9fbc
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Sep 20 08:59:38 2016 -0700

    depth to soil layer interface is needed while setting root fraction. This was previously using the col%zi() global, it is now passed as a boundary condition.

commit d952171fa3aac9f8fa62f7e62d73ed912a9676f9
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Sep 19 11:08:58 2016 -0700

    zeroing patch level seed variables during patch creation, potential bug fix.

commit c2820620b508ab4872de1912cbbfb2005ea51ce2
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 16 17:32:33 2016 -0700

    Partial progress passing in layer depths to sites.

commit 55ccdfa6a41a451c479d346ac8ee757a08ac852b
Merge: 034a1b9 cfec5d8
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 16 13:29:53 2016 -0700

    Merge branch 'rgknox-CLMLink' into rgknox-CLMLink2

commit cfec5d82e1108404b64b740d9bd1db3cae6b423d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 16 13:14:03 2016 -0700

    modified file name argument of error message calls during restart array allocation. The changes are designed to prevent line-length overflows, per recommendation by Ben Andre.

commit 034a1b95b8364be4c601c1330906642973b4d872
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Sep 14 17:37:02 2016 -0700

    fixed some patch loops that were not updating the patch pointer! Would had made for slow runs;)

commit 2ed2719baa69edbd2a71a963d22e994948d54028
Merge: 61618e9 e0dec3e
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Sep 13 16:00:17 2016 -0700

    merged CLMLink into CLMLink2

commit e0dec3e08c750bae01892596006ed2a60b895462
Merge: aed9976 645142f
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 9 13:02:55 2016 -0700

    Merged rgknox-HIO up

commit 645142f57dd12a1d5328a90a5a24354b5305ab4a
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 9 12:06:15 2016 -0700

    Identified that the filter_soilc used in SummarizeNetFluxes is different from fcolumn in that it contains crops.  The ideal looping structure should be over fates sites, which will be addressed in a later change group.  For this changegroup, we should still get the same effective result, as the crops are not even represented with non-zero area weighting.

commit 89317998a7752ca1fcf7c14f2c91d26ee12a7a6f
Merge: 931fb82 dbbe6cb
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Sep 8 16:47:03 2016 -0700

    Resolution of merge conflict mostly revolved around the site level seed-bank term.  Initialization of the seedbank was also added to the cold-start.

commit 931fb8221d8d12ee6be9cb07cff694e6154bb4f8
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Sep 7 17:06:52 2016 -0700

    Fixes: Added zero initialization to site_in%total_burn_flux_to_atm = 0._r8 for cold-starts. Added flushing to hio variables on initialization (future proofing). Testing if setting area plant to 1.0_r8 is different from 1._r8.

commit dbbe6cba18a84f5dabac9ec6a9c5faca0c30d387
Author: ckoven <ckoven@gmail.com>
Date:   Tue Sep 6 19:04:55 2016 -0700

    reinstated patch fusion of seeds_in, seed_decay, and seed_germination fluxes

commit c54e538b48d42915b015d09fe1cf9c91300e1076
Author: ckoven <ckoven@gmail.com>
Date:   Tue Sep 6 16:49:19 2016 -0700

    fixed line-length issue

commit 61618e9756c8eaae3fdb9082e50824b97183d1e0
Author: Ryan Knox <rgknox@gmail.com>
Date:   Mon Sep 5 23:52:29 2016 -0700

    fully removed EDCLMLinkMod.F90. first clean build.

commit a188ed6aac112dd3195fb9e944245512736f7288
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Sep 5 16:45:12 2016 -0700

    Have most of the code moved around, towards removing ed_clm_link. Have not tested compilation yet.

commit aed997695281a748173f436c06cd60e71655bfd9
Merge: e341edf 7533a65
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sat Sep 3 13:05:59 2016 -0700

    Merge branch 'rgknox-HIO' into rgknox-CLMLink

commit 7533a65556425a803a8532e633bf1aee99aae61e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 2 17:17:21 2016 -0700

    added implicit none to FatesInterfaceMod. Corrected the name of the global variable cp_hio_ignore_val

commit e341edf609e2aa9a79372e93ff6e27e84ec2f8c5
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 2 16:57:00 2016 -0700

    Cleaned up checks and balances routines and moved them to their own module.

commit cd9b4b9efd6c8dcde094695798c3f7adb216fecc
Merge: 6551589 0e98032
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Sep 2 16:16:31 2016 -0700

    Conflict resolutions, mostly accepted HEAD

commit d81a6aa4539e07dad188a9ab0578c615f1eb2e3b
Merge: 66c1819 5f2491c
Author: ckoven <ckoven@gmail.com>
Date:   Fri Sep 2 14:03:47 2016 -0700

    Merge branch 'master' into ckoven_sitelevelseeds

commit 66c1819049104d076274bff88905a2389e9c79eb
Author: ckoven <ckoven@gmail.com>
Date:   Fri Sep 2 14:02:28 2016 -0700

    cleaned up some some patch%site pointers and made them explicit site arguments

commit 0e980328b7a35dd03c876c9fe76691a0ae719dff
Author: Ryan Knox <rgknox@gmail.com>
Date:   Fri Sep 2 13:36:32 2016 -0700

    As suggested by bandre-ucar, 1) changed iulogs in HistoryIO to use fates internals, 2) removed excessive code for string parsing and now using the scan() intrinsice and 3) changed argument order on nsites so that it comes first (for NAG).

commit 5f2491cd2cb74b71fa916e36926cc9d4823ae593
Merge: 3dd2311 190d01e
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Sep 1 16:35:29 2016 -0600

    bugfix - updated cohort siteptr during patch fusion
    
    Merge branch 'rgknox-sitetype-ptr'
    
    This is a bugfix that updates the cohort's site pointer while is
    undergoing patch fusion. Specifically, the cohort may be transferred
    to a new patch, and while its old patch was used to point to its site,
    but that old patch is gone.
    
    Fixes: #111
    
    User interface changes?: no
    
    Testing:
      rgknox:
        Tested changeset: 2478de6
        Test suite: edTest
        Test baseline: 8e8ebca
        Test namelist changes: none
        Test answer changes: none in tests, potential changes in long runs
        Test summary: all PASS
    
      andre:
        Tested changeset: final merge to master
        Test suite: ed - yellowstone gnu, intel, pgi
        Test baseline: 235feda
        Test answer changes: bit for bit
        Test summary: all tests pass
    
        Test suite: clm_short - yellowstone gnu, intel, pgi
        Test baseline: clm4_5_12_r193
        Test answer changes: bit for bit
        Test summary: all tests pass
    
        Test suite: SMS_D_Ld3.f10_f10.ICRUCLM50BGC.hobart_intel.clm-default
                    SMS_D_Ld3.f10_f10.ICRUCLM50BGC.hobart_nag.clm-default
                    Test baseline: none
                    Test summary: compiles and runs, passes test functionality

commit eeac550bac357e49ef324f3f79456e564592c39c
Merge: ff1e3f4 3dd2311
Author: ckoven <ckoven@gmail.com>
Date:   Thu Sep 1 16:52:16 2016 -0700

    Merge branch 'master' into ckoven_sitelevelseeds

commit 6cb32555182836e27128b8431f56deff91764f99
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Sep 1 16:00:23 2016 -0700

    somehow the order of sites, nsites and fcolumn got swapped on the call to SummarizeNetFluxes, fixed it

commit 2f80b832e3a3ba63ff9ae68ff94a8d858404bd26
Merge: 95ffe48 3dd2311
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Sep 1 15:51:43 2016 -0700

    Resolved conflicts. Most conflicts were set to the HEAD (history branch), with the exception of a long line in EDCLMLinkMod and the subroutine set_fates_ctrlparms, which was heavily modified in both branches and needed special attention.

commit 3dd23114744aa341e996c822bc5e44c5399bd527
Merge: eb79782 f32c216
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Sep 1 14:21:29 2016 -0600

    Pull in the ed-fates changes from clm trunk r192 and r193
    
    Pull in the clm trunk r192 and r193 tags containing ed-fates dev
    work. These should be almost identical to the ed master with the
    exception of a few changes needed to pass the full clm tests but
    weren't discovered until after the code was moved back to svn:
    
    * nag runtime dangling pointer in ed
    * build-namelist unit tests for ed
    * cmake issue for clm pfunit tests
    * revert potentially answer changing tolerance change in BalanceCheckMod.F90
    * reenable endrun call in BalanceCheckMod.F90
    
    User interface changes?: none
    
    Code review: andre
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: 10ad43b
    Test answer changes: bit for bit
    Test summary: all tests pass
    
    Test suite: clm_short - yellowstone gnu, intel, pgi
    Test baseline: clm4_5_12_r193
    Test namelist changes: none
    Test answer changes: bit for bit
    Test summary: all tests pass
    
    Test suite: SMS_D_Ld3.f10_f10.ICRUCLM50BGC.hobart_intel.clm-default
                SMS_D_Ld3.f10_f10.ICRUCLM50BGC.hobart_nag.clm-default
    Test baseline: none
    Test summary: compiles and runs, passes test functionality

commit ff1e3f4c2f93ca69d4aaa41018d66ccdf9ad9c79
Merge: 47005a5 eb79782
Author: ckoven <ckoven@gmail.com>
Date:   Thu Sep 1 13:39:38 2016 -0700

    merged 10ad43b

commit 65515899210040b5ee1f091cbbaf24aba2dcbd38
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Sep 1 13:13:23 2016 -0700

    Syntax cleaning, zerod sites(s)%fates_to_bgc_this_ts which may had been uninitialized on cold-starts

commit 47005a52cdd4dd35e56fad9515440236af45a8d5
Author: ckoven <ckoven@gmail.com>
Date:   Thu Sep 1 11:39:32 2016 -0700

    fixed old patch fusion issue and also moved patch fusion threshold parameter to EDTypesMod

commit 79a2b0aa7a02133be1e46db84fdd834a931eff1a
Author: Ryan Knox <rgknox@gmail.com>
Date:   Thu Sep 1 11:34:31 2016 -0700

    cleaning out unused subs and funcs and their calls

commit b26394847a5b9c976228fc02876c6a149856ba73
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Sep 1 12:14:33 2016 -0600

    'pull clm4_5_12_r194 tags from svn'

commit c6d553ec54ca3373c823f124f8a3e1f1759cd51e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Aug 31 17:58:27 2016 -0700

    commented out unused code (will delete prior to PR).

commit 420c52a3f49f4d8eb6d055c1f0685ca0b24ef90f
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Aug 31 17:53:17 2016 -0700

    bgc summary and bgc carbon balance check have been converted to the site system. First pass, no cleaning or compilations have been attempted yet.

commit be9d73f6dd49c76a0a6efebb79ab6d2982b1edd3
Author: ckoven <ckoven@gmail.com>
Date:   Wed Aug 31 15:15:53 2016 -0700

    runtime bugfix

commit c1d442f6a165327414e9cfdbb0ddd6ce1b160e48
Author: ckoven <ckoven@gmail.com>
Date:   Wed Aug 31 14:19:08 2016 -0700

    compile-time bugfixes

commit b19c113a600b7770f23fd62463a0cf1f62da0039
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Wed Aug 31 13:38:17 2016 -0700

    first attempt to move seed_bank from patch to site level

commit f32c216e27e700bbd1ebf4b85352b89cf9c0cb96
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Aug 29 14:57:06 2016 -0600

    'pull clm4_5_12_r192 tags from svn'

commit eb7978267641489bafdb9dc9acb8307b5a25c195
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Aug 26 08:29:20 2016 -0600

    Bugfix nag: fix danging pointer runtime error
    
    Fix a nag dangling pointer runtime error during ED restart that was missed in
    9b079f5.
    
    Testing: ERS_D_Ld5.f10_f10.ICLM45ED.hobart_nag.clm-edTest
             ERS_D_Mmpi-serial_Ld5.1x1_brazil.ICLM45ED.hobart_nag.clm-edTest
    
    Test status: pass

commit 0e052a40872e5a789b737c64fd020f6fb96e36c9
Author: Ben Andre <andre@ucar.edu>
Date:   Sun Aug 21 22:15:30 2016 -0600

    Start refactoring to control fates output to stdout.
    
    Create a new global variable to control output unit used by fates
    modules, and a new control flag to manage output. Only used in a
    couple of modules that are writing to stdout (cesm.log).
    
    Test suite: SMS_D_Ld3.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    Test status: passed functionality test.

commit 190d01e28aa0aaa1a3fe2d4ae0585c53e5482e26
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 25 17:27:58 2016 -0700

    Added an update to a cohorts site pointer when cohorts are transferred from a donor to recipient patch during fusion.

commit 95ffe48cd840376fd00afd38d4ed08c768cce9fd
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 25 15:06:13 2016 -0700

    Updated some comments

commit 4a54ac31b849ab76311e870a83b18f9a722d7a7c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 25 12:42:17 2016 -0700

    Reverted some variable names for testing consistency. Added the use_ed check the the history_io_vars initialization (to avoid doubled variables) and fixed an OPENMP pragma.

commit 4572841e0ef233f0f7bd956cf96ccc2908a65f89
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Aug 25 11:47:13 2016 -0600

    Bugfix for nag: dangling pointer to fates sites
    
    Creating a pointer to an object, such as currentCohort%siteptr, requires
    that the target be defined as a target or pointer. Since sites are a
    dynamic array inside a derived type and 'allocatable, target' doesn't
    appear to be a valid variable attribute, the only way I see to make this
    work is with change fates sites to a pointer.
    
    Tests: SMS_D_Mmpi-serial_Ld5.5x5_amazon.ICLM45ED.hobart_nag.clm-edTest
    gets past the danging pointer runtime error.

commit c554d4e05b49ffc9858276a7bd0188c453f9aa09
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Aug 24 20:42:10 2016 -0700

    Temporary modifications to maintain b4b regressions with NEP.

commit a755c470de0be822d1601399e10c9ab96230fdf9
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Aug 24 16:05:12 2016 -0700

    added the new cohort filter to the migrated calculation of npp_col.

commit 5d7180b055b9be5b48b7337d67f5cca4682ff502
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Aug 24 15:16:49 2016 -0700

    removing obsolete EDCLMLInk code that is deprecated by the history io functions. Moved npp_col(c) calculation to summarizenetfluxes from summarizeproductivity fluxes.

commit ef879353a7219486bfd7ed203e0f6410ee834152
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Aug 24 10:27:14 2016 -0600

    Fix nag compiler errors
    
    NAG is a much stricter compiler than our usual development and testing
    compilers. Shorten a bunch of excessively long lines to meet the 132
    character limit. When passing a sized array and a size,
    e.g. sites(num_sites), into a subroutine, the array size arguement
    must be first so it is properly declared before the array referencing
    the size.
    
    Testing: SMS_D_Mmpi-serial_Ld5.5x5_amazon.ICLM45ED.hobart_nag.clm-edTest
             compiles but dies at runtime.
    
             intel and pgi versions of the above test run to completion on
             hobart.
    
             SMS_D_Mmpi-serial_Ld5.5x5_amazon.ICLM45BGC.hobart_nag.clm-default
             runs to completion.

commit a4c6baa2c8c94b21ec53a7d67f7b16b5068b80ce
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Aug 23 16:23:08 2016 -0700

    Implemented history updates to dynamics and productivity. Testing prior to removing existing code

commit f700b8f8782a3e762938fc47d42c19e9f7e49d7e
Author: Ryan Knox <rgknox@gmail.com>
Date:   Mon Aug 22 22:33:02 2016 -0700

    Prototype for rapidly updating history variables complete, ie those in summarizeproductiveityfluxes. Tests seem to think it works.

commit 74743bacc8f190153ffc247bcc49fdb8b58c01ae
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 22 18:43:19 2016 -0700

    partial progress on rapidly updated diagnostics in summarizeproductivity fluxes.

commit 837fdd639f6a1d5a49e16cefd97ac66186edeb9b
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 22 17:48:15 2016 -0700

    Added block of biomass variables, tests passed.

commit 471187c6957d1029f8f654eba63599b3b6c08ffa
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 22 17:24:48 2016 -0700

    added litter flux variables (1dpatch). Tests passed.

commit f3e3728bd29e2c76332a5a3f6fd5b339901fa688
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 22 16:36:05 2016 -0700

    added a block of fire history variables. Tests passed.

commit c3717f07455baa2329942ca96a1c5525e558e5f8
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 22 15:37:35 2016 -0700

    intoduced some 2d variables. Testing started by comparing new variables with old.  Simple python script was created to go through each variable and calculate an RMS, much like cprnc, but just more simple.

commit f9ad677096d139242b7e923867f073e71ed2d2ca
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 22 14:31:43 2016 -0700

    Added patchxpft variables to the update function, added aliases to the update function. Testing'

commit 0051af736f3a33e2f8f90af7d155c28565c7be34
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Aug 19 14:40:40 2016 -0700

    incremental changes towards adding more variables, and adding a flushing specifier.

commit e4098b528f9607bfbe23f3aabbf18d61b7f4adf7
Author: Ryan Knox <rgknox@gmail.com>
Date:   Fri Aug 19 00:19:35 2016 -0700

    Added some functions in the interface for setting dimension info.

commit 0d67859b47f8d9c797b98b11828d0c52298cc07d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 18 17:52:00 2016 -0700

    Made some syntactical improvements, also expanded dimensions to accomodate 2d variables, including ground and the scpf as registered types.  1x1 case builds and runs, no new variables entered or tested yet.

commit 8856ba0827d0dc9fd84e5ce75ad3dc91f0f2221a
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Aug 17 23:31:29 2016 -0700

    First pass at interfacing the histor IO. Includes a vector of history output variable objects, and dimensional objects.

commit 6984517999a41a63b2bf785f3952e5a16ada2eed
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 15 16:09:11 2016 -0700

    added cp_numlevdecomp to control parameters and added it to the HLM passing function

commit 48febca49b9ee868205afe435cf67bd7a5745a6b
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Aug 14 13:46:47 2016 -0700

    merge fixes: somehow the definition of calc_areaindex was dropped in surface albedo, I also mis-spelled the name of the cp_numlevdecomp_full in litterflux_out

commit dfae34c93ebd32358df1908b49fc8f065672643a
Merge: 9109ed3 81e01c6
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Aug 14 13:25:55 2016 -0700

    Some minor merge conflict, minor complications related to control parameters for number of decomp levels

commit 81e01c681fc09924614b5a6adc2cee360ccf090f
Merge: 2b8efbf d7b4893
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 11 13:23:46 2016 -0700

    merging in litter-flux interface, conflicts resolved in EDCLMLink, clmfates_interfaceMod.F90 FatesInterfaceMod.F90

commit 9109ed321d0dab29fdaca7d21da1aeb8b2063e5a
Merge: 90b1600 2b8efbf
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 11 12:15:14 2016 -0700

    merge of photosynthesis interface and clm tag 188, minor conflicts related only to use statements at the header of modules.

commit 2b8efbfffcd3c6107867fc25f77075611268b6c2
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Aug 10 12:42:08 2016 -0700

    reverting bug-fix on cinput_rootfr for testing purposes, Charlies bgc interface work has the same fix.

commit 0df5cc9cbbae3f97589cc1440648c0d2cf534649
Merge: 942a150 9d2648e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Aug 10 12:37:25 2016 -0700

    Merge branch 'master' into rgknox-photo-accum

commit 942a1508e342078a9f8b0d8c37eed36aaf0024e2
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Aug 10 12:36:50 2016 -0700

    removed explanation of conversion of rscanopy to rssun that is no longer valid.

commit d7b4893d36dd7acad85168e882c4a6a195d5fb63
Author: ckoven <ckoven@gmail.com>
Date:   Wed Aug 10 11:04:38 2016 -0700

    some further cleanup of EDCLMLinkMod

commit 92ffdef39408f3c9445e0a106f25439ad6bf3f69
Merge: 2abacf9 9d2648e
Author: ckoven <ckoven@gmail.com>
Date:   Wed Aug 10 10:14:43 2016 -0700

    merged 20da593 and resolved conflicts

commit e2d07e7e8a3022adac5c6e26a3e1c12682ed3bdb
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Aug 9 17:17:19 2016 -0700

    As per discussions with Rosie F, we realized that sunlai and shalai were not summing to elai.  If we do ensure that these sum to elai, then the math that converts rscanopy into rssun and rssha becomes trivial, like not-there type trivial.  I added a function for calculating area indices for consistency in different subroutines.

commit 9d2648e61cad0a4a3ff10cc0cd37c04d0d596364
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Aug 8 18:54:53 2016 -0600

    Merge clm4_5_11_r188, commit '5af45b2', into andre-clm-integration.
    
    Testing:
        ed - yellowstone gnu, intel, pgi
            baseline: none
            status: all tests pass
    
        clm_short - yellowstone gnu, intel, pgi
            baseline: clm4_5_11_r188
            status: all tests pass
    
        clm - yellowstone gnu, intel, pgi
            baseline: clm4_5_11_r188
            status: expect all tests pass except BFAIL ICLM45ED (not
            maintained in trunk) and SSP (known failure, see issue #81)

commit b1ccb099ed9096b00b85d0a2a06fdb996bf762ad
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Aug 8 17:45:58 2016 -0600

    Merge clm4_5_10_r187, commit '869ed5a', into andre-ed-clm-16x
    
    CLM has changed how the vertical rooting profile code is
    handled. EDLinkMod.F90 now relies on some parameters that were removed
    CLM.
    
    Test suite:
        ed - yellowstone gnu, intel, pgi
            baseline - 14d0e61
    
        clm_short - yellowstone gnu, intel, pgi
            baseline - clm4_5_10_r187
    
    Test status: clm_short all tests pass, bit for bit with baseline. All
    ED tests in ed test list pass, bit for bit with baseline. clm tests in
    ED test list fail bit for bit with baseline because clm changed
    answers between r186 and r187, not expected to pass.

commit 2abacf944603e74fbdfd1b3fa4ba84dceded11e0
Author: ckoven <ckoven@gmail.com>
Date:   Mon Aug 8 16:53:58 2016 -0700

    fixed an uninitialized variable bug and also streamlined some code, both in flux_litter_out

commit cc03c9dbb8e8a2bd15d70a0d5bf4d27c7c41c0bf
Merge: e83bc9a a0e17ec
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 8 16:49:06 2016 -0700

    Merge branch 'rgknox-rootfr-index-bugfix' into rgknox-photo-accum

commit a0e17eca90e180577fa8770309c7ecb5b736754f
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 8 16:46:36 2016 -0700

    uninitialized index for calculating rootfr in CLMLinkMod

commit c362cc7d5eefd9999d600d50330686c24ed47cd1
Author: ckoven <ckoven@gmail.com>
Date:   Mon Aug 8 14:35:40 2016 -0700

    compile-time and runtime bugfixes

commit 90b160050ad80c0b68bbf782bf2798da35f78bbc
Merge: dc7f21d e83bc9a
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 8 13:57:29 2016 -0700

    Merge branch 'rgknox-photo-accum' into rgknox-radiation

commit e83bc9ad6b03960f8142e3daa205844e9f76f57e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Aug 8 13:22:15 2016 -0700

    added explanation text of calculating rssun and rssha

commit 6142551deeaea836e323bdb6655ea9b9ff2b8ae8
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Mon Aug 8 09:49:34 2016 -0700

    moved host-side receivers of the litter fluxes onto the soilbiogeochem_carbonflux type from the ed_clm_link type

commit dc7f21d2f8149b4a190ecc43de43738215e52d92
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Aug 7 17:40:59 2016 -0700

    radiation part 3: cleaned up several global variables and sent them from CLM to FATES. Also found that patches were not being deallocated properly when terminated, in that the allocated vector spaces and the cohorts were not being deallocated. This was found because I had to convert some vectors on patch pointers to dynamically allocated memory, during which I found that other dynamically allocated memory on patch pointers were never deallocated.

commit 6fb0a067bd704152ae6e49efb137a6302764c151
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Aug 7 14:42:19 2016 -0700

    canopy radiation interface 2: bc_out structures implemented and tested

commit 0e508cf4e014fda93483d7da6193495e10abd7a5
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Aug 7 12:51:06 2016 -0700

    photosynthesis interface 1: wrapper in place, bc_in in place, 1x1br tests running, results forthcoming

commit 04294b2a1f92bfa5636010ca48ab141192cecb27
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sat Aug 6 13:32:07 2016 -0700

    partial commit towards first phase of radiation interface

commit 1db3cc3c1cf4e1610284f1aee85a5e4aadfe58e8
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Fri Aug 5 19:29:15 2016 -0700

    more litter refactorization

commit 771e145e4068ef5bad5c53174fb5993679758afd
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Aug 5 18:12:11 2016 -0700

    incremental change towards interfaceing canopy radiation

commit 6bae5bb8c2b8e6906f5105336b83d2bd3c56eb4d
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Aug 5 16:29:36 2016 -0700

    cleaned up how we zeroed and set non-values in unused photosynthesis arrays in FATES, and implemented a wrapper around EDAccumulate (as well as changed the variable names of the time-step accumulators

commit a4ec8c95ca35fa41538bfb89030fdef202d7591a
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Fri Aug 5 13:54:00 2016 -0700

    start of some changes to pull flux_into_litter_pools out of EDCLMLinkMod and into EDPhysiologyMod

commit 44b0fba20c06273e52f142f5176bbb298dc47772
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Aug 5 12:49:46 2016 -0700

    photo interface 6: made local copies of photosynthesis response and inhibition functions (Jinyun's)'

commit 0dc0614092505f04c01c001d4cb36739c74559c6
Author: Ryan Knox <rgknox@gmail.com>
Date:   Fri Aug 5 12:29:05 2016 -0700

    photo interface 5: migrated internal lai calculation to photosynthesis and timestep as argument, 1x1br regressions pass

commit 3e538535ae8b20daeccab322ecdc8bee57164a23
Author: Ryan Knox <rgknox@gmail.com>
Date:   Fri Aug 5 10:46:45 2016 -0700

    testing introduction of interally calculated LAI to photosynthesis

commit 381edc39bd799da072470385fc70f9000fd2c490
Author: Ryan Knox <rgknox@gmail.com>
Date:   Thu Aug 4 22:44:17 2016 -0700

    photo interface part 4: added rssun and rssha as output boundaries so we conform with the CLM method of calculating transpiration flux in CanopyFluxes

commit b6561108e8b6154b84368939e03c98ec5cef9200
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 4 17:29:08 2016 -0700

    incremental photosyns interface 3: removed lmrcanopy,psncanopy and gccanopy from _inst structures and maintained in FATES.

commit b94041c83bd238767d1dd8cce30664dd24995996
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 4 17:10:32 2016 -0700

    incremental change 2 for photosynthesis interface, 1x1br passes science regression, these changes added the output boundary conditions (although temporary)

commit eb19fdebb0225efdfc45aa81d2f8331bd354fd3f
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Aug 4 16:15:49 2016 -0700

    incremental change 1 for photosynthesis interface, 1x1br passes science regression test on transpiration, npp and biomass

commit 7d9976d24c11703b79f4c7e3d37a04e991d08603
Merge: 22b9f4c 328cac2
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Aug 1 18:25:02 2016 -0600

    Merge boundary condition passing, commit 'bd4719b', into
    andre-ed-clm-16x.
    
    Test suite: ed - yellowstone intel, gnu, pgi
                clm_short - yellowstone intel, gnu, pgi
    
    Test baseline: none, orginial branch was answer changing.
    
    Test status: all tests pass. expected fail in #88, ERS_D
    ICLMED yellowstone_gnu unexpectedly passed.

commit 22b9f4cbbc800cedea82b9bb399ee09ee7989323
Merge: d4ee17a 9393283
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Jul 28 16:33:06 2016 -0600

    Merge bugfix for bb_slope, carea, and icefilter, commit 'c0654db',
    into andre-ed-clm-16x based on clm-r181
    
    Test suite: ed - yellowstone gnu, intel, pgi
                clm-short - yellowstone gnu, intel, pgi
    
    Testing: all clm_short tests pass. One new expected failure in the
    'ed' test suite. Coupler history file is no longer bit for bit on
    restart, see #88.

commit 328cac2ceba5f7dc7cec2642cbb5901a108768f7
Merge: 9393283 0e6f6ee
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Jul 22 17:39:29 2016 -0600

    Introduction of boundary condition passing in host<->fates
    
    Merge branch 'rgknox-bcs'
    
    New structures were created in FatesMod: bc_in(s) and bc_out(s), these
    structures hold boundary conditions, where for FATES input they are
    filled during the interface, and for FATES output they write to their
    corresponding host's variable.
    
    The new structures were prototyped with the calculation of the
    sunshade fractions and btran. Wrappers were created in the interface
    to call edbtran and the sunshade fractions.
    
    Some of the boundary condition arrays needed dimension info, some of
    these dimensions are dictated by the host, and so a scheme was
    implemented to pass these "control parameters" from the host to FATES
    as well. (see line ~230 of
    components/clm/src/ED/main/FatesInterfaceMod.F90, and line 211 of
    components/clm/src/utils/clmfates_interfaceMod.F90)
    
    Fixes: none
    
    User interface changes?: no
    
    Code review: code discussion and review with @bishtgautam and
    conferencing with @rosiealice @ckoven @bandre-ucar @mvertens and D
    Lawrence
    
    Test suite: ed - lawrencium-lr3 intel, yellowstone intel, gnu, pgi
    
    Test baseline: answer changing, (hydrologic calculations of suction
    were moved from FATES to the host)
    
    Test namelist changes: none
    
    Test answer changes: answer changing
    
    Test summary: PASS except for known failures: #14, f09 and f19
    restarts

commit d4ee17a9b3cc416273774239e766fdd249a47748
Author: Ryan Knox <rgknox@gmail.com>
Date:   Fri Jul 22 00:21:14 2016 -0700

    a calculation of the column index was moved to be prior to its use (thats a good thing), and the f2hmap_type might need to be public (pgi compiler error).

commit e39b097c5c1667cb4d692f3fa46373a01b8a7c0e
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Jul 20 21:44:16 2016 -0700

    bug fix, removed rogue if statement

commit 780d5d1e8edb5be5a20c781d372ee8d35193be67
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jul 20 21:18:04 2016 -0700

    multithreading potential fixes.

commit 0e6f6ee0a45fdac7226a2f7185572d16d2ac5162
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Jul 20 02:39:33 2016 -0700

    modified some print statements

commit 678e3df4834f81eb2d5f1836fda21ea10d6cf83f
Author: Ryan Knox <rgknox@gmail.com>
Date:   Mon Jul 18 14:56:27 2016 -0400

    Added an input filter to the wrap_btran that operates on the exposed veg filter.

commit f42826d77b31978a1362ab454f4aab3bdf357984
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed Jul 13 16:39:29 2016 -0400

    migrated to a restart IO allocation scheme where cohorts are only allocated on naturally vegetated columns. this should reduce the memory footprint of restart files considerably, and also works with the layout of the subroutines in the host model more cleanly.

commit 36fbb223e01d1967355b097f04d4d404e3c2f660
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Jul 3 20:12:05 2016 -0400

    optimized the logical function that tests if liquid soil water is present for uptake.

commit 34822f97fdef3d29438348bded03a748a904b2bb
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Jul 3 18:10:03 2016 -0400

    Added a call to determine active layers with plant water uptake.  Could not embed this logic inside the btran because the active layer filters are also needed for determining which layers suction can be calculated for, but this is outside of FATES perview, so a call before btran was made.

commit 3ee5771a3225b49250689ebfe5d9a1f90242c2a8
Author: Ryan Knox <rgknox@gmail.com>
Date:   Fri Jul 1 09:38:47 2016 -0700

    1) Changed naming convention of some boundary condition variables per suggestion by D Lawrence. 2) moved a logical step related to btran to be inside the fates btran calculation, to do this I moved the soil volume and temperature variables to boundary conditions and removed the active flag logical

commit cd8d469d83d5e9f9b67aa7ff8dcd9b0e82e09611
Merge: 26f43e5 8a7dc59
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Jun 29 10:04:52 2016 -0600

    Merge fates columnization, commit '18613d14', into andre-ed-clm-16x
    
    Runtime error in restarts. Error is at
    EDRestVectorMod.F90:1516. Potentiall related merge conflict in
    subgridMod.F90::subgrid_get_info_netveg() and how ncohorts is set.
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    
    Test status - runtime failure in restart tests. all other tests pass.

commit ff2d1ff7f9e1406da20b2f77222695317b98de9f
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Jun 28 08:52:22 2016 -0700

    boundary condition work on Fates: prototype working for 1) allocation of bc structures, 2) use of bc structures in sunshade_fracs and btran, and 3) use of control parameters sent from host through a dictionary to allocate bc structures

commit 26f43e574a7ad94c0903acab3dc6f057040aeda6
Merge: 1926705 231fba7
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Jun 27 16:05:37 2016 -0600

    Merge self-contained fates phenology, commit '57c533c4', into andre-ed-clm-16x
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test status: all tests pass

commit 192670552cbcff6934e35438121af3592b7a79c6
Merge: 1afd57c 786f69f
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Jun 27 14:46:23 2016 -0600

    Merge fates init refactor, commit '1fc68114', into andre-ed-clm-16x
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test status: all tests pass

commit 1afd57ce7b3ab8af2fc46f44868a8d8edc4ad334
Merge: fabfef9 5edd0a9
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Jun 27 12:42:41 2016 -0600

    Merge move contents of ed_driver to fates interface, commit '94118a5', into andre-ed-clm-16x
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test status: all tests pass

commit fabfef922040717e747695397fc663461e09e775
Merge: 196d4ab 3eb784a
Author: Ben Andre <andre@ucar.edu>
Date:   Sat Jun 25 11:31:26 2016 -0600

    Merge bugfix zeroing and grperc, commit '1aaba89', into andre-ed-clm-16x
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test status: all tests pass

commit 196d4abc018b280755f5352dcdbfff4f622d3e37
Merge: f9d8076 081925b
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Jun 24 22:29:23 2016 -0600

    Merge fusion long term stability bugfix, commit '5421da59', into andre-ed-clm-16x
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test status: all tests pass

commit f9d8076c312db7cdf4f8533dedd90070e7b1910a
Merge: 1b7cf92 5be200c
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Jun 24 19:34:09 2016 -0600

    Merge start of fates interface, commit '0471ef9e', into andre-ed-clm-16x
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test suite: all tests pass

commit 1b7cf9218a4fec77943654efd323aba188c5f6ae
Merge: 5ca7624 7d1883a
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Jun 24 17:28:55 2016 -0600

    Merge fast flux output and canopy bugfix, commit 'f881721', into andre-ed-clm-16x
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test status: all tests pass

commit 5ca7624ea1143ce070ddce7f616fa7d739dc24c1
Merge: a870ef4 aa71e92
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Jun 24 15:23:51 2016 -0600

    Merge bugfix for ed gdd time args, commit '584f2a1', into andre-ed-clm-16x
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test summary: all tests pass

commit a870ef4c1a4102ae11251b7baa5fb062764fb796
Merge: 2ce2121 d20439a
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Jun 24 14:10:09 2016 -0600

    Merge lbl gnu floating point error checking, commit '89b8709', into andre-ed-clm-16x
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test status: all tests pass

commit 2ce212197b0a3c0a37ef4dbcfc14016aee1b4d12
Merge: 5a7f1c8 ec64fad
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Jun 23 22:27:17 2016 -0600

    Merge uninitialized cohurt fusion bugifx, commmit '534d152', into andre-ed-clm-16x
    
    no science conflicts. Updates lanl machines, need to be tested.
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test status: all tests pass.

commit 5a7f1c852b0c5d572fb1fb9e3ab653d935a550e5
Merge: fdc80e1 3da8a77
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Jun 23 17:29:21 2016 -0600

    Merge initial linkages to below ground bgc, commit 'c23cf02e', into andre-ed-clm-16x
    
    Manual resolved sciences conflicts. needs further science
    review. Areas of concern: use of century decomp when ed is on but
    bgc_mode is sp (see FIXME comment in CLMBuildNamelist)? How should
    EDBGCDynMod.F90 be integrated with CNVegetationFacade.F90, especially
    the use of cnveg_state_inst and friends.
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test status: all tests pass

commit fdc80e17d2075ce2260244350620286cedd64a7b
Merge: ba7663b 2c3e52d
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Jun 22 21:20:13 2016 -0600

    Merge removal of redundent fusion, commit 'd8a9ee5', into andre-ed-clm-16x
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test status: all tests pass

commit ba7663bdddf6121a2eec2c1f54b93103b2a54d81
Merge: 54c7685 0d7d6dd
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Jun 22 18:51:43 2016 -0600

    Merge wolf and conejo changes, commit '19fe5678', into andre-ed-clm-16x
    
    conflict in BatchUtils.pm
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test status: all tests pass

commit 54c7685da5c68e9f5e8ec1a856c7043ab00b599b
Merge: e47b9f5 d04b83e
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Jun 22 12:24:49 2016 -0600

    Merge the r153 ed snow fix from Rosie Fisher into main clm-ed merge branch.
    
    Merge branch 'andre-r153-restart-work-around' into andre-ed-clm-16x
    
    Test suite: ed - yellowstone gnu, intel, pgi
    Test baseline: none
    Test status: all tests pass

commit 91ff6e51191e2508b654363aaba7fc784c0e2825
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Jun 21 18:43:55 2016 -0700

    incremental changes to bc passing, mostly related to btran

commit 86e4bd38fb612973e556592b501157a75384152c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon Jun 20 17:32:53 2016 -0700

    First pass of adding the bc_in and bc_out memory structures. Prototyped on sun/shade fraction call.  Compiled, untested.

commit 230e3a8159759a9f47bf5f7324006d4d74a365ad
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Jun 16 14:58:52 2016 -0700

    pruned unnecessary variables from EDBtran, removed some confusing redundant calls to zeroing and initializing energyflux_inst%btran_patch in EDBtran

commit d04b83e4664b162ce5fea2694535554f8c299ba2
Author: Rosie Fisher <rfisher@yslogin2.(none)>
Date:   Wed Jun 15 16:29:19 2016 -0600

    Commit appears to fix snow fraction restart errors by moving the elai_profile and esai_profile calculations INTO SurfaceRadiationMod. This means that we now need a new array to track the mean height in m of each of the (CL,FT,iv) layers, so that the SR routine knows whether they are buried in snow. The new calculation is simpler (each layer is either buried or not) but can be extended. The important point is that the calculations occur with updated snow fields. This should pass 6/2x3 day restart tests.  There is a lot of redundant code in the EDCLMLINK pertaining to snow and elai that still needs removing.

commit 9393283264580d134615f0ea4c8675e566d5534e
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Jun 14 14:05:07 2016 -0700

    moved calculation of c_area to happen before its used.

commit 4b974a86411f4728bf623f67ea1d6a27c01b31b2
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Jun 14 14:01:35 2016 -0700

    1) removed hard-coded stomatal slopes (mbbopt), and pushed bb_slope to be used directly instead of mbb, which was a redundant variable.  2) removed redundant conductance and interstitial co2 calculations.

commit e47b9f58d7d66f6498e32e06afe752562e5556de
Merge: 85af502 01b7e65
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Jun 13 15:22:59 2016 -0600

    Merge clm4_5_8_r178, commit '17ae361c', into andre-ed-clm-16x

commit 8a7dc59eae9df375395f4f86bdf6c63e9e9cf7a4
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue Jun 7 12:33:00 2016 -0700

    fixed a bug where site to patch pointers were being flushed, but by accident I got all excited and started flushing patch pointers before patches had been initialized.  I de-wronged it.

commit 5592785d4c9d35efdde9887447f7f2c09c6032cd
Author: Ryan Knox <rgknox@gmail.com>
Date:   Mon Jun 6 11:18:39 2016 -0700

    added a check to see if any unallocated site vectors exist

commit 34a3beefdca4fc12b826adf1f0fbecbcbe97c0aa
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Jun 5 13:33:34 2016 -0700

    various bug and syntatical fixes for previous two commits

commit b08b42ea4b612fc8d0011a8a6bc0e21a947b4372
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Jun 5 12:50:56 2016 -0700

    removed procedure declaration of init_coldstart from the Fates public (bug from previous commit).  Updated CanopySunShadeFracs to be called from clm_fates, and also fixed how that function accesses the correct site.

commit 96c0759f02afa028fbe780c3f62f3c93cb29bc5e
Author: Ryan Knox <rgknox@gmail.com>
Date:   Sun Jun 5 12:30:52 2016 -0700

    moved init_coldstart from FATES public to clm_fates, also added conditional to prevent prevent passing of unallocated arrays

commit 6a3c432116e29f3b50c576b75ec6719d22935bd9
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed Jun 1 18:09:21 2016 -0700

    rectifying how to allocate ed-sites with the potential of dynamic column status. 1x1br cold-starts running with what appears to be non-nonsense results.

commit 141b7745a034f1ee7497b0a56234d61235c2fcaf
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue May 31 22:56:07 2016 -0700

    columnization first pass, build success

commit 0a64b45b3ec3e1b4c2f23a637d1c5c1eac51d778
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue May 31 15:27:16 2016 -0700

    completed first pass of code for columnization. WOrking through compiler errors

commit 8c60f9ac3e696cd921d75089db78851de8035370
Author: Ryan Knox <rgknox@gmail.com>
Date:   Mon May 30 13:59:19 2016 -0700

    columnization on some patch routines.

commit 20a40a1acabc0116362b12f8668c0b315ea8cf95
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri May 27 17:10:55 2016 -0700

    finished pass on EDCLMLinkMod, finished pass on EDBGCDynMod, working on EDAlbedoMod

commit 5afc8812ce70fa0821a0ce23035e6542a13f6fcc
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri May 27 15:52:58 2016 -0700

    finished first pass through EDCLMLinkMod

commit 1750efa47385da965bc82d5ee65482c8e8d371d0
Author: Ryan Knox <rgknox@gmail.com>
Date:   Fri May 27 13:57:16 2016 -0700

    working through litter-flux linking, column migration

commit 9a818c4c128a61d35613c188c04be394fcb44339
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu May 26 18:52:50 2016 -0700

    working through the lai profile subroutines, adding some checks too.

commit f4771aaf7deff6a91d30475639ab499deb82fe2a
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed May 25 19:55:15 2016 -0700

    first pass changing the clm_ed_link to column indexed.

commit b08945d797419d1e7e160dc42ef53a36babb9f81
Merge: a246d0f 231fba7
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed May 25 19:39:36 2016 -0700

    conflict resolutions on merging with master, mostly related to the removal of phenology_inst

commit a246d0f9603f203474c5eae491b153d745fe9d80
Author: Ryan Knox <rgknox@gmail.com>
Date:   Wed May 25 19:08:28 2016 -0700

    starting conversion of EDCLMLink to columns.

commit dcc1c56d8f42cfd7faad99b5f2f5a37d0174bc88
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed May 25 17:41:47 2016 -0700

    modified call sequence to restart initialization, passed clm_fates%f2hmap(nc)%fcolumn

commit d522948842aed04b63af011f2347730482de7e67
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed May 25 15:20:18 2016 -0700

    first pass complete at converting EDRestVectorMod to columns.  Variable colWithPatch was removed because it is offers no information beyond what is provided by numPatchesPerCol (which is more information rich.  Also, old_stock,cd_status,dd_status,ncd,leafondate,leafoffdat,dleafondate,dleafoffdate and acc_NI are stored in the restart as column indexed, as they are site level variables.  If these variables are converted to patch-scale, then they need large restart vector allocations.

commit b81fab5409897836023d4303a1c8f6fc4ba7ff0c
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue May 24 20:09:10 2016 -0700

    more partial progress, working through restart list to vector and vector to list procedures.  Currently on convertCohortVectorToList().

commit 03bd77ffec91c71d15119cd2dde2a06fba195602
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue May 24 18:19:22 2016 -0700

    more partial progress, most of work on subgrid decomposition for cohorts on columns hashed out.

commit 51290d3b64e315867ab0daba715340d40f133ac2
Author: Ryan Knox <rgknox@gmail.com>
Date:   Tue May 24 15:04:52 2016 -0700

    partial progress

commit 231fba7d845c613697d35f86c31fdfbe45e2287a
Merge: 8e2c9c5 786f69f
Author: ckoven <ckoven@gmail.com>
Date:   Tue May 24 10:04:56 2016 -0700

    merge master into pheology branch

commit 5189fde6389f585c3fdbaa4b13d322faaab68752
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon May 23 18:01:54 2016 -0700

    partial progress (early) on columnizing sites

commit 8e2c9c597ce8f51c2c2215ce24c10ae5cb04311e
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Mon May 23 15:29:39 2016 -0700

    fix typos etc

commit a190de1d2e3118eda6755f21cf18b0f25e7880bd
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Mon May 23 15:26:26 2016 -0700

    moved GDD calculation into edphysiology phenology and added site-level LL GDD restart variable

commit ba93a192e879055c49432a67ebc20d9ddf74e7a5
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Fri May 20 17:14:01 2016 -0700

    yet more cleaning out of phenology code

commit 6d81821d206bd2d595d4dcd9e675fbc7bfde1a3c
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Fri May 20 17:00:08 2016 -0700

    more removal of phenology code out of interface, and addition of GDD variable onto the ED site type

commit 4e6e3ccf0d163bad79c247b8adbaa192c88988ee
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Fri May 20 16:58:46 2016 -0700

    more removal of phenology code out of interface, and addition of GDD variable onto the ED site type

commit 786f69f50cb2c94977f827fd0b3b7fda99e359a4
Merge: 33b22f7 5edd0a9
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri May 20 14:04:42 2016 -0700

    Merge branch 'master' into rgknox-init-cleanups

commit 5edd0a9e448061397a9300f6205a8e164944308f
Merge: 3eb784a 99e0036
Author: Ben Andre <andre@ucar.edu>
Date:   Fri May 20 10:27:08 2016 -0600

    Moved contents of ed_driver to the clm_fates interface
    
    Merge branch 'rgknox-eddriver-clean'
    
    ed_driver performed a variety of operations. Along with calling the
    main ED dynamics routines, it also performed timing calculations and
    the mapping and prepping of FATES/ED state variables into CLM
    compliant formats for boundary conditions and IO (vi
    clm_ed_inst%ed_clm_link). These commits migrate the latter functions
    to live in the clm_fates interface, where CLM calls are appropriate
    and the mapping functions and calls are supposed to live.
    
    changes were also added to the udata% timing structure, which was
    updated in ed_driver. Two notable changes are the migration of the
    n_sub global to be included with the udata%, and removing
    udata%cohort_index from regulating the cohort_fusion process. We have
    found that udata%cohort_index is not threadsafe (along with the rest
    of that structure), and an alternative means using
    .not.associated(currentcohort, nextcohort) was implemented instead to
    avoid self fusion.
    
    Note: These changes were also built off of PR #59, if those changes
    aren't up to snuff, this branch needs to update first.
    
    Fixes: n/a
    
    User interface changes?: No
    
    Code review: rgknox
    
    Test suite: ed - lawrencium-lr2 intel; yellowstone gnu, intel, pgi
    Test baseline: 1aaba897
    Test namelist changes: none
    Test answer changes: b4b
    
    Test summary: pass except for expected fails - #14 f19 f09 restart,
    and #43 gnu f10 restart

commit 3eb784a4c544e8e2da81d9b195a7dbf6fc50fd9e
Merge: 081925b 224e662
Author: Ben Andre <andre@ucar.edu>
Date:   Thu May 19 12:56:59 2016 -0600

    Bugfix for zeroing data and indexing grperc
    
    Merge branch 'rgknox-bugfix36-bugfix4'
    
    Simple fixes that address issues #36 and #4. The fix to issue #4 was
    trivial. In the fix to #36 I also checked through the code to assess
    under which conditions zero'ing variables such as tlai and tsai would
    affect other non-ed parts of the code. The fix allows the zeroing of
    the LAI/SAI variables and htop/hbot variables at the patch level
    because ED is the only submodule that will currently touch
    them. However, moving forward we must be very careful of how other
    modules potentially use these patch vectors. It is possible that a
    crop model may exist on the same column, and therefore we don't want
    to interact with those patches. Although, as far as I know, ACME for
    instance may put crops on another column (now, future). Either way,
    the changes here should make that zeroing procedure more future proof
    by only zeroing natural vegetation, and should also be more efficient
    by not constantly zeroing things that don't need zeroing.
    
    Fixes: #36 #4
    
    User interface changes?: No
    
    Code review: rgknox
    
    Test suite: ed - lawrencium-lr3, intel; yellowstone, gnu, intel, pgi
    
    Test baseline: 5421da59
    Test namelist changes: none
    Test answer changes: b4b
    
    Test summary: pass except for expected fails, f19 and f09 restarts

commit 33b22f7fb276713efe8cfbfc12d04b57610bed16
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu May 19 15:21:19 2016 -0700

    Forced FATES initializations during clm_inst to all go through clm_fates%init().  Allocation of the fates() vector and some updated naming of subroutines accompany.

commit 99e003694c21bc7ae9a99c221cdad5c639e77815
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Wed May 18 13:52:38 2016 -0700

    Reverted the pre-mature removal of udata%cohort_index and cohort%cohort_index. This
    variable will be evaluated in a seperate issue.

commit c456862bcd2a2ca4b9042227e681a32855c2775f
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon May 16 18:31:02 2016 -0700

    Migrated calls to ecosystem dynamics into the clmfates interface, moved timing calls out of FATES code and into the interface.
    Evaluated udata%, which is not thread-safe, yet at the same time, all threads should be re-writing the same values.  However,
    udata had been incrementing a cohort index number that had been used to test for identity during fusion (so a cohort doesnt
    fuse itself). The indices could had gotten jumbled if two threads simultaneously incremented the udata structure before
    assigning the index to the cohort variable.  If this happened it would not had affected the fusion process, but would had been
    a problem if these variables were compared in output.  Also, the cohort indices could start to get vary large.  The variable
    was stored as an integer, and udata% was incrementing for every new cohort created per thread.  So threads with many gridcells,
    and many patches, with many cohorts over a long time could generate very large number which could overfill the integer.
    
    So the index number was removed from the cohorts and from udata.  Test to prevent self fusion now utilize the two argument
    associated() intrinsic, which tests to see if two pointers are on the same address (in a scalar).

commit 224e662bbac688d3eb9bafd4ae70c4c668409cee
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon May 16 13:55:59 2016 -0700

    Modified zeroing range during the clmed linking to only affect the soil patch and non-crop patches.  FATES/ED only appears to operate on these patches, we should not be affecting the other patches, that is up to either another module, or should have a switch in a clearly defined space.

commit 3b0d436dcada20e60bdc26ea7788932de73853c1
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon May 16 11:54:55 2016 -0700

    removed comments

commit 2e68d07c6916462668c70465056caeff451113ee
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri May 13 16:13:27 2016 -0700

    Address bug #36, effective LAI, total SAI and effective SAI were being zero'd strangely in ed_clm_link.
    
    It appears that this part of the code is responsible for zero'ing the bare-ground portion of the code.  There is also the
    assumption that patches that are not within the perview of ED should be zero'd here too. This would be crop patches, as well as the
    bear-ground patches (grrr) just mentioned.

commit f5a986aa1db4a7af35e3d376d7432926581596c9
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri May 13 14:58:01 2016 -0700

    Addressed issue #4:  changed vector indexing of parameter ED_val_grperc to use the PFT of the current cohort.

commit 081925b9a6c3057f13d1f03cc631efcf08168615
Merge: 7ac6e14 5be200c
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Tue May 10 15:12:11 2016 -0700

    Merge branch 'master' into ckoven/fusebug

commit 5be200c5197bd587fdd3a3c950a5ef4172c868c3
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Mon May 2 10:49:25 2016 -0700

    removed comments, commented code is deprecated.

commit 1a5ef7c4498264ff7a870a9e2746151ea2e6dba7
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Apr 29 12:31:06 2016 -0700

    This commit introduces several new features:
    1) the clm_fates API (where munging between CLM and FATES occurs).
    2) the fates API (where fates presents to the clm_fates API is publically accessible bits
                      which includes the head of its state structure sites(:) and
                      boundary condition vectors, although the latter is not yet coded)
    3) some starter work on removing ED sun/shade calculations from CLM code.  Although,
       this still needs more work because some boundary conditions for this procedure
       should now be defined in the fates(nc)%fatesbc public and populated in the clm_fates
       munging API, yet this functionality is not yet introduced yet.
    
    *Note, there are sill many only partially introduced features.  For instance:
    1 the fates API is still being accessed by CLM code, and not only through the clm_fates API.
    2 the fates API still has access to CLM types
    3 the fates(nc)%sites(:) vector is still allocated using the bounds_clump type, and it
      propogates well into the FATES/ED code.
    
    Lots to do still.

commit 01b7e65726e1167309a2b162524d01e490858965
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Apr 21 16:06:21 2016 -0600

    'pull clm4_5_8_r178 tags from svn'

commit 7ac6e14ac879e4e5f7e5863ddd835aa6cea3ac9e
Author: ckoven <ckoven@gmail.com>
Date:   Tue Apr 19 15:04:54 2016 -0700

    changed min_patch_area fusion logic to now force fusion when tiny patch is the oldest on the site

commit 0c6d18db3a0efb3d610f3e8bbe6703739cd21e4c
Author: ckoven <ckoven@gmail.com>
Date:   Tue Apr 19 11:11:55 2016 -0700

    put in check of patch area before canopy structure calculation to prevent runtime hang due to infinite loop in arealayer calculation

commit 3426189e9aeeccb2f6febda20a83bbcf5743ddf2
Author: ckoven <ckoven@gmail.com>
Date:   Fri Apr 15 14:35:31 2016 -0700

    changes to fuse_2_patches to avoid crashing bug

commit 7d1883ad961f92d6c6a66aeb2286427fbba8b0be
Author: ckoven <ckoven@gmail.com>
Date:   Wed Apr 13 15:51:44 2016 -0700

    added a bunch more patch diagnostic variables to ED restart file

commit f23b1881f475e16219c8154d28039f42dea4501f
Merge: 460209c aa71e92
Author: ckoven <ckoven@gmail.com>
Date:   Wed Apr 13 13:37:41 2016 -0700

    Merge branch 'master' into ckoven/fastfluxoutput

commit 460209c7c468f03eab88181084a5f110673794e1
Author: ckoven <ckoven@gmail.com>
Date:   Tue Apr 12 16:32:01 2016 -0700

    removed ncd_log from ncdio_pio use statement in EDRestVectorMod.F90

commit 309b245ccb2980a481ae0d9485b9d9ef69f6562b
Author: ckoven <ckoven@gmail.com>
Date:   Tue Apr 12 10:57:17 2016 -0700

    changed summary1 and summary2 to SummarizeProductivityFluxes and SummarizeNetFluxes

commit b574ba49fc7a34a72984d6aa6d0b94d796642914
Author: ckoven <ckoven@gmail.com>
Date:   Tue Apr 12 10:47:25 2016 -0700

    changed cohort%isnew integer magic numbers to module-level parameters

commit 35b4f8727a8b8fbef0aa2cd20b01f6d462969772
Author: ckoven <ckoven@gmail.com>
Date:   Mon Apr 11 15:22:13 2016 -0700

    removed some now-redundant new diagnostics and added correction term for patch-native C terms

commit 2fd592a9d83edb1fa61aa99c5e0cfa7942d51fcf
Author: ckoven <ckoven@gmail.com>
Date:   Mon Apr 11 14:44:04 2016 -0700

    compile-time bugfix for patch%isnew to convert memory logical to/from integer in restart file

commit 97d5eb169a3e6450f336fb0df32f844af1cb0fa4
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Mon Apr 11 11:49:49 2016 -0700

    added cohort%isnew to restart

commit 89f4c98631b487c85441e22071e1cd605d7a13fa
Author: ckoven <ckoven@gmail.com>
Date:   Sun Apr 10 19:55:43 2016 -0700

    added canopy_closure diagnostic and also fixed runtime bug in npp_col from reorganization. now failing some restart tests in NPP, possibly because cohort%isnew is not being restarted

commit 1d826faf046a3079d0ec046e1d45adc8d20054d1
Author: ckoven <ckoven@gmail.com>
Date:   Sun Apr 10 14:39:02 2016 -0700

    compile-time bugfixes

commit 6e17d6838e15c8c0b78e8ca67b04a1938ac768ab
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Sun Apr 10 13:56:36 2016 -0700

    splitting edclm summary routines into two parts: Summary1, which covers productivity fluxes and goes between canopyfluxes and ed_driver, and Summary2, which covers non-productivity fluxes and goes after both the BGC routines and ed_driver

commit 2918dec7d692629860001451b4012074b27d9933
Merge: 94351d4 c61950f
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Sun Apr 10 10:06:02 2016 -0700

    Merge branch 'ckoven/fastfluxoutput' of https://github.com/ckoven/ed-clm into ckoven/fastfluxoutput

commit 94351d4f76ccde534033f8789449328299b28688
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Sun Apr 10 10:05:56 2016 -0700

    adding diagnostics of the number of patches and cohorts to the history file because thats eems like  auseful thing to be able to track

commit c61950fce88feeed8e4810267a06c512bdfe972a
Author: ckoven <ckoven@gmail.com>
Date:   Sat Apr 9 20:29:03 2016 -0700

    reverted compile flags to original

commit 4b4a2818a4944beff6a5e19c4539e9c6b472300e
Author: ckoven <ckoven@gmail.com>
Date:   Fri Apr 8 15:39:55 2016 -0700

    changed patch weighting of all carbon variables on history file to make them consistent with the patch weighting infrastructure use din albedo code

commit aa71e92fc201b6ec0e73b8fc459928a14f7bd83a
Merge: d20439a 7976f15
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Apr 8 08:56:46 2016 -0600

    Bugfix: time arguments to ED's GDD incrementer had badness
    
    Merge remote-tracking branch 'ryan/rgknox/phenology/gdd0-accum'
    
    Summary: Bill Sacks identified that the month, day and second
    arguments are uninitialized in clm_driv when it calls ED's
    accumulateAndExtract subroutine. See issue #23 for discussion.
    
    This PR issues a call to retrieve the current time prior to calling
    the accumulateAndExtract, and corrects inconsistent ordering of the
    time variables in calling function and called function.
    
    Fixes: #23
    
    User interface changes?: No
    
    Code review: Ryan Knox, Bill Sacks (identified original issue),
    discussion with @bandre-ucar , @rosiealice and @xuchongang
    
    Test suite: ed - yellowstone intel, pgi, gnu
    Test baseline: 89b8709
    Test namelist changes: None
    Test answer changes: bit for bit
    Test summary: pass except for f09 and f19 restarts, #14.
                  Interestingly, no failures associated with #43.

commit 85af50224d3f7ce532e4a718457c8bab7b41d730
Merge: ea9c6de ec4f58f
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Apr 7 17:07:16 2016 -0600

    Merge clm4_5_6_r155, commit 'a6d830b', into andre/ed-clm-r16x

commit 16d8524c9be21e733bfa7cc98288fc2107665b70
Author: ckoven <ckoven@gmail.com>
Date:   Thu Apr 7 15:26:06 2016 -0700

    compile-time bugs, cleanup, and a first, partial attempt to resolve patch to column issues

commit 6d315c530326aa40ae5dc62e457750f8783ebb51
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Thu Apr 7 13:52:56 2016 -0700

    second set of changes to summary fluxes

commit 9e533cdec52c5f1cbd8363e59cb2a4d1b53c5a01
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Wed Apr 6 21:24:41 2016 -0700

    first set of changes to summary fluxes

commit 7976f15d95ee2ad2effff4d31055703e9237fcd1
Merge: 83b8ff2 ec64fad
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Tue Apr 5 11:27:08 2016 -0700

    Merge branch 'master' into rgknox/phenology/gdd0-accum

commit d20439a8526e39230de6ed127dbbf840033d59b1
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Thu Mar 31 23:29:48 2016 -0700

    modifications to enable fpe_traps to pass on gnu

commit ec64fad607e21f4539cf8cc244191596e519ecdf
Merge: 3da8a77 970d9ab
Author: Ryan Knox <rgknox@lbl.gov>
Date:   Fri Mar 25 16:29:31 2016 -0700

    Merge pull request #39 from xuchongang/master
    
    Summary: this change resolves a conceptual and numerical bug by preventing uninitialized cohorts from fusing.  Changes were relatively isolated, and testing was by broad majority successful.  One test yellowstone-gnu returned an unexpected baseline fail on the f10_f10, but it is unclear if this is an artifact of existing issues that merely surface in a new context.  After discussion, we voted to pull.

commit 3da8a77f65bdb43fc93c86f0330155ef7cf78c70
Merge: 2c3e52d 4230198
Author: Ben Andre <andre@ucar.edu>
Date:   Tue Mar 22 16:53:09 2016 -0600

    Initial carbon linkages between ED and soil BGC
    
    Merge andre-ed-v0.1.0-buggy-science into master
    
    initial implementation of the carbon linkages from ED to the CLM soil
    biogeochemistry cycle. I originally did this in the CLM SVN, which Ben
    pulled into the NGT github on the "buggy science" branch. The purpose
    of this code is to take all the litter that flows out of ED,
    aggregated onto column-level variables and disaggregated vertically
    and into litter decomposability pools, and then send this to the BGC
    code that is shared with the rest of the model.
    
    The code behavior should be identical to the master for the variables
    that are output in master, but there is now a much larger set of
    carbon cycle variables that were not output before. New output
    variables include soil and litter carbon pools, combined ED + BGC
    pools (TOTECOSYSC), and a bunch of fluxes (heterotrophic respiration,
    NEP, NBP, etc). I've also included some extra diagnostics, including
    high-frequency NPP on the column level (current standard NPP is
    daily-averaged on patch level, which I've left as-is). For carbon
    balance, I am now tracking all fluxes into the ED pools and the BGC
    pools, separately and together, over each day (since ED fluxes are
    resolved on the daily timestep and CLM fluxes are resolved on the
    half-hourly timestep). Carbon balance errors are not trivially small,
    so instead of implementing a tolerance-checking crasher I am just
    writing the errors to history for now. When we get these smaller we
    can replace them with logic that crashes when a tolerance is exceeded.
    
    I find some of the behavior hard to check in the history files because
    of issues #24 and #26, but otherwise things seem reasonable. I have
    avoided crashing bugs associated with issue #30 but not actually tried
    to solve that.
    
    Code Review: C Koven, R Knox
    
    Closes: #35
    
    Test suite: ed - lawrencium pass; ed - yellowstone intel, pgi, gnu
    Test baseline: d8a9ee5
    Test namelist changes: yes
    Test answer changes: yes
    Test summary: expected fails in f19 and f09 restart, answer changing and nl changes as expected.

commit 970d9abb73e6a082b51dc1ca65285d1cb1da7a81
Author: Chonggang Xu <xuchongang@gmail.com>
Date:   Tue Mar 22 14:29:42 2016 -0600

    avoid the new cohort fusion to fix nan bug for npp_leaf
    fix issue #38

commit 4230198710ab6292d38b6c7b072696bd64e937e1
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Tue Mar 22 11:22:53 2016 -0700

    changed inline description in EDBGCDynMod and moved it outside the ED subdirectory hierarchy since it properly sits outside the area defined by the interface

commit 992c0b95ee38146ba07f8e20e7610d07a57a7507
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 9 17:20:17 2016 -0800

    sending C balance errors to history file to keep track of

commit 6f5f9ff6346a6ad8ea63f31f603c55bca7c2778b
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Wed Mar 9 15:57:39 2016 -0800

    added seed rain flux to carbon balance logic

commit 473480e9822688d30adda9c45078b49f8920dd6c
Author: ckoven <ckoven@gmail.com>
Date:   Tue Mar 8 13:33:27 2016 -0800

    runtime bugfix to prevent crash due to filter mismatch; though filter mismatch is likely still happening.

commit 51172991373fcd429e34dc9e968e6de79af466f2
Author: ckoven <ckoven@gmail.com>
Date:   Mon Mar 7 17:30:07 2016 -0800

    still chasing carbon balance errors...

commit 90ef9fbe90c3f2b2dc8941478ae1999b35e726b1
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Mon Mar 7 11:10:02 2016 -0800

    added term to take into acocunt time offset of reconciling ED and CLM litter fluxes for balance check purposes

commit 2c3e52dbe0e32e49dd8dd93c2866251e74493e23
Author: rgknox <rgknox@gmail.com>
Date:   Sat Mar 5 12:00:10 2016 -0800

    fixed logical comparison operator in create_cohort, typo from prev commit

commit 02368a26acc1540bd00996ae329ae37729db9552
Author: ckoven <ckoven@gmail.com>
Date:   Fri Mar 4 17:08:05 2016 -0800

    regularized the units of many of the history outputs to be consistent with the rest of CLM

commit a3a9692acda43d7dfad14743cc05037c7c4f88c7
Author: rgknox <rgknox@gmail.com>
Date:   Fri Mar 4 15:52:50 2016 -0800

    changed termination logic: added a safemath minimum cohort threshold that is also applied to new recruits, and changed the order of termination calls as per discussion in PR

commit 83b8ff2c36e65709ff5898a739e82b30a80a4f72
Merge: d87b9e9 0d7d6dd
Author: rgknox <rgknox@gmail.com>
Date:   Fri Mar 4 14:46:17 2016 -0800

    Merge branch 'master' into rgknox/phenology/gdd0-accum

commit 82115aee47a0ce9fc4f5ce5b65e035db237ca220
Author: rgknox <rgknox@gmail.com>
Date:   Fri Mar 4 13:23:45 2016 -0800

    tests passed, removing commented changes

commit eadfd904dd2f181421c5585b950afa2e4bcec532
Merge: 700d19b 0d7d6dd
Author: rgknox <rgknox@gmail.com>
Date:   Fri Mar 4 12:31:42 2016 -0800

    Merge branch 'master' into rgknox/r4x5crash-cdynamics

commit 700d19b80aef4537ded83cf7ee6afb8f01e9f13b
Author: rgknox <rgknox@gmail.com>
Date:   Fri Mar 4 12:28:08 2016 -0800

    removed uneccesary number density check (cleanup)

commit 9309eb7b5c647eba1554b8c6ff5d4a499b906fa8
Author: rgknox <rgknox@gmail.com>
Date:   Fri Mar 4 11:53:54 2016 -0800

    tweaked thresholds on number density and removing redundant fusion call to avoid fpes

commit 02dacef7b61c8f6b5427b8f134541f0f80e1f6c5
Author: rgknox <rgknox@gmail.com>
Date:   Thu Mar 3 23:20:05 2016 -0800

    test: filtering-out recruits with small number densities to avoid fusion problems

commit 0e73caa72813a78aac199ff7043f1dd579da5c7c
Author: ckoven <ckoven@gmail.com>
Date:   Wed Mar 2 15:15:44 2016 -0800

    runtime bugfix to prevent history file crashes on bgc profiles

commit d87b9e90358cb3eaaebc63a3b5fb275666f11eaa
Author: rgknox <rgknox@gmail.com>
Date:   Mon Feb 29 22:52:09 2016 -0800

    fixed call order of mon,day,sec between clm_driv and accumulateandExtract

commit abb443e3d4b332a3da947fd3b1b041b999d4dfc8
Author: rgknox <rgknox@gmail.com>
Date:   Mon Feb 29 18:00:06 2016 -0800

    added a call to update current time prior to eds gdd accumulator in the main model loop

commit 2077d7ff00d1aa7d9028b2a1193374a571d756a4
Author: ckoven <ckoven@gmail.com>
Date:   Mon Feb 29 16:48:29 2016 -0800

    runtime bugfix

commit c2aa9c26b8293100941bf9b35ec1ca318763f4f4
Author: ckoven <ckoven@gmail.com>
Date:   Mon Feb 29 15:05:40 2016 -0800

    compile bugfixes.  still crashing in some tests though

commit 0d7d6ddb1af695c3b4ffebb02e20bee485503a63
Author: rgknox <rgknox@gmail.com>
Date:   Mon Feb 29 14:45:41 2016 -0800

    commented out calls to new sensitivity analysis parameters b_mort and dbh2h_m, will be used in later commits

commit 92f3e7357fe28501a74c7fe66818d2b38a33a04f
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Mon Feb 29 11:56:37 2016 -0800

    added combined ED/BGC C stock balance check versus daily-integrated NBP infrastructure

commit 98366eb04f821af8c2cd842e4eac3a9c93b732b2
Author: Chonggang Xu <xuchongang@gmail.com>
Date:   Mon Feb 29 11:07:50 2016 -0700

    update lanl machines

commit cabab7c1556ce1d886057b1197d218b393df5c46
Author: ckoven <ckoven@gmail.com>
Date:   Sun Feb 28 10:00:45 2016 -0800

    bugfixes on fire NEP/NBP code

commit bcc4092a71fc04e7acaf298b6c085734c22e1e29
Author: Charlie Koven <ckoven@gmail.com>
Date:   Sat Feb 27 17:51:57 2016 -0800

    added code to aggregate column-level fire carbon fluxes and use these as the difference between NEP and NBP

commit d854d4a84098d9d8c8bf1140305b352bb06dea17
Author: ckoven <ckoven@gmail.com>
Date:   Fri Feb 26 18:21:13 2016 -0800

    second set of bugfixes on NEP/NBP code

commit 12bb2e894892cfff0ca5edc252874398f9f713e9
Author: ckoven <ckoven@gmail.com>
Date:   Fri Feb 26 16:15:50 2016 -0800

    first set of bugfixes on NEP/NBP code

commit fab596526dfb34e091ae8f3588eb9bd4b436ae42
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Fri Feb 26 15:42:40 2016 -0800

    added first instance of NEP and NBP fluxes

commit e33555b04c50212a6bdfad416a0b35e720bb978f
Author: Rosie Fisher <rfisher@yslogin4.(none)>
Date:   Wed Feb 24 16:40:29 2016 -0700

    Changed temporary_spitfire_switch to 1

commit c8317cd7323e6b9bf3493ffc2c0cf9a708fb5f73
Author: ckoven <ckoven@gmail.com>
Date:   Fri Feb 19 17:04:24 2016 -0800

    more fixes on ED/BGC intersection. model should now pass tests

commit 6d8ac15b4199f067396cc166e271a225d7801eee
Author: ckoven <ckoven@gmail.com>
Date:   Thu Feb 18 22:59:12 2016 -0800

    working on restarts still..

commit 4373dd6f12a8c8beac885a9c66946dd11ee68e3b
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Thu Feb 18 14:16:51 2016 -0800

    removed profile variables from restart file as I don't believe they are needed

commit f8b18ae2d3857b4a1f1637efe6bbe78d6aebed27
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Wed Feb 17 16:32:39 2016 -0800

    typo bugfix

commit 3f35106dd02a8e2d5da0baf7981216fd55bf599d
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Wed Feb 17 16:24:50 2016 -0800

    added restart variables to edclmlinkmod

commit 8c75e00815bc217770c9b7d7e3df2ad99d71beb5
Merge: 518f55e ea9c6de
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Fri Feb 5 14:51:14 2016 -0800

    Merge branch 'master' into andre-ed-v0.1.0-buggy-science
    
    Conflicts:
    	components/clm/src/ED/main/EDCLMLinkMod.F90

commit 518f55e44ceaf24cc8b79e3bef0879adc4151ad1
Merge: 98b10a6 7e8a242
Author: Charlie Koven <cdkoven@lbl.gov>
Date:   Fri Feb 5 13:00:32 2016 -0800

    Merge branch 'master' into andre-ed-v0.1.0-buggy-science
    
    bringing recent maseter changes into buggy science branch

commit ea9c6debc4bdc4962ca8379a06c4a010da6c80d7
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Feb 5 13:52:43 2016 -0700

    Bugfix for pgi compiler error
    
    pgi yellowstone could not compile ed-clm because of the following error:
    
        PGF90-S-0038-Symbol, isnan, has not been explicitly declared (/glade/p/work/andre/ed/ed-clm-pr10-test/components/clm/src/ED/main/EDCLMLinkMod.F90)
    
    Code reviews: self
    
    Test suite: ed, yellowstone intel, pgi, gnu
    Test baseline: 69a361b0
    Test namelist changes: none
    Test status: pass except for: answer changing wrt 69a361b0, expected failures of f09 and f19 restart.

commit 6a42921432c4a4c14c7e3c09fd45c638aafc392a
Merge: c99ea8f 7e8a242
Author: rgknox <rgknox@gmail.com>
Date:   Thu Feb 4 13:32:29 2016 -0800

    trival conflict resolution: different cohort/patch maximum settings

commit 7e8a242b1524ad6f6b8d7942642b551fd2482c42
Author: rgknox <rgknox@gmail.com>
Date:   Wed Feb 3 15:28:01 2016 -0800

    modified maximum number of cohorts to exceed nlevcan_ed x nclmax x npft_ed, allowing for enough IO array space on radiation restart variables

commit db5835e05bc417e8eb5bb2f8e3f4e0adb82927eb
Author: rgknox <rgknox@gmail.com>
Date:   Wed Feb 3 15:19:10 2016 -0800

    changed offset incrementing within patch loops to match maximum number of cohorts, instead of maxcohorts * maxpatch

commit c99ea8f59580a9f42e310e16a62690d813a37ea6
Author: rgknox <rgknox@gmail.com>
Date:   Mon Feb 1 15:15:41 2016 -0800

    Re-evaluated newly introduced logic on new cohort fusion.

commit 98b10a68b6eac607847027875b3952ab0894fd2c
Merge: 3ec641f d88f800
Author: Ben Andre <andre@ucar.edu>
Date:   Fri Jan 29 16:45:37 2016 -0700

    Merge branch 'master' into andre-ed-v0.1.0-buggy-science
    
    Merge the ed-v0.1.0 buggy science branch up to master. Many runs die
    at runtime (see error below). I believe that this is the error Rosie
    and Charlie are expecting, so I am handing the branch off to them.
    
    Test suite: ed on yellowstone with intel, pgi, gnu
    Test baseline: n/a
    Test namelist changes: none
    Test status: answer changing?
    
    Some tests run to completion, but there are many runtime failures. Example:
    
        SMS_D_Ld5.f10_f10.ICLM45ED.yellowstone_intel.clm-edTest
    
     14:forrtl: severe (408): fort: (2): Subscript #1 of the array FLOATING_CN_RATIO_DECOMP_POOLS has value 8 which is greater than the upper bound of 7
      14:
      14:Image              PC                Routine            Line        Source
      14:cesm.exe           0000000003DF3550  Unknown               Unknown  Unknow
    n
      14:cesm.exe           0000000001D0CD75  soilbiogeochemdec         429  SoilBi
    ogeochemDecompCascadeCNMod.F90

commit f76841238da733c2db1cffdc6ab7f725e8bfaf06
Author: rgknox <rgknox@gmail.com>
Date:   Fri Jan 29 14:09:27 2016 -0800

    Conflict resolution 4: Trivial merge conflict resolutions in EDTypesMod and EDCLMLinkMod

commit 01327ee2ee124b17f6caf337109c737c39a74abd
Author: rgknox <rgknox@gmail.com>
Date:   Fri Jan 29 13:51:28 2016 -0800

    Conflict resolution 3.1: Added the allowance that two cohorts may fuse if they are BOTH new, improving total fusion rates and reducing contamination.

commit a5d9b50e270c04fc99064e024460616e85ca7f8b
Author: rgknox <rgknox@gmail.com>
Date:   Fri Jan 29 13:43:40 2016 -0800

    Conflict resolution 3: In cohort dynamics mod, the main loops controlling fusion were given a flag that checks for the existence of recently created cohorts, and ignores their fusion to prevent their contamination of other cohorts with their uninitalized values.

commit 48d63cb996d0b189e6eece52c757e4b2aa7dee1e
Author: rgknox <rgknox@gmail.com>
Date:   Fri Jan 29 13:30:05 2016 -0800

    Conflict resolution 2: both branches master and io/sclass had made the bug fix to the scaling of jcmax25 to vcmax25, both were the same, differences were only formatting

commit cc4882816492f46eb40b0a2ede27bb3841485212
Merge: 2706b8d d88f800
Author: rgknox <rgknox@gmail.com>
Date:   Thu Jan 28 17:15:37 2016 -0800

    Merge conflict resolution 1: subroutine allocate_live_biomass. The changes pulled in from  edv0.1.0 were not directed at this part of the code, so changes on the HEAD (this version) were accepted to override the master.

commit d88f8003035853e3b254483e9b52d66292375798
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Jan 27 14:52:59 2016 -0700

    Bugfix in ED restart variable name
    
    Fix an error in an ED restart variable name (space instead of
    underscore). Problem found by running 'ed' test suite on yellowstone
    intel, pgi, gnu. This change fixed a runtime problem with:
    ERS_D_Ld5.f19_g16.ICLM45ED.yellowstone_intel.clm-edTest
    but there are other tests that fail in the parent changeset.
    
    Test suite: ed yellowstone intel, gnu, pgi
    Test baseline: n/a
    Test namelist changes: none
    Test status: see above.
    
    Fixes see above
    
    Code reviews: self.

commit 9c08cff29d8d302a41d6371787dee98e95c1f0b2
Merge: a46704e 821ab6b
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Jan 20 13:52:13 2016 -0700

    merge ed_v0.1.0 r097 branch up to master
    
    merge ed_v0.1.0 r097 branch up to master containing Stef Muszala's bug fix branch.
    Manually resolved merge conflicts by looking at diffs between clm4_5_1_r097,
    ed_v010_25_clm4_5_1_r097, and eb26be69.
    
    User interface changes?: none
    
    Code review: self
    
    Test suite: merged on laptop, not tested.
    Test baseline: n/a
    Test namelist changes: none
    Test status: n/a

commit 821ab6b4c42dd9975baef07c378e9c572c6d7303
Author: Ben Andre <andre@ucar.edu>
Date:   Thu Jan 14 13:48:19 2016 -0700

    Bugfix for bit for bit restart.
    
    The change of numpft_ed from 2 to 10 in commit fc94f000eb breaks bit
    for bit restart when merged with Stef Muszala's restart bugfix
    branch. Temporarily reverting the change to bring the restart branch
    to master, then this change can be reapplied.
    
    Code reviews: self
    
    Test suite: ed, yellowstone intel, gnu, pgi
    Test baseline: ed-clm eff944c0
    Test namelist changes: none
    Test status: not bit for bit, fixes bit for bit restart problem.

commit d0c5f1a5798b1da8dd297a731079c4bcbf99614f
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Jan 13 20:34:46 2016 -0700

    Update ED patch an cohort sizes
    
    Update the numPatchesPerGridCell and numCohortsPerPatch, per request
    from Ryan Knox and Rosie Fisher.
    
    Code reviews: self
    
    Test suite: ed yellowstone intel, gnu, pgi
    Test baseline: ed-clm, changeset eff944c0
    Test namelist changes: none
    Test status: bit for bit

commit a0df8c6bc78b79d38a39fee8ca2cf7db93f4c8ad
Merge: 1b1d3d7 9a527bb
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Jan 13 15:34:41 2016 -0700

    Merge branch 'master' into andre-merge-muszala-ed4x5fix
    
    Merge master into feature branch to resolve conflicts bringing
    muszala-ed4x5fixbranch to master.

commit 2706b8d9fee424f4ea9aaf9b656198f1d311fcc9
Author: rgknox <rgknox@gmail.com>
Date:   Tue Jan 12 13:18:24 2016 -0800

    repaired an old typo bug, jmax should be 1.67*vcmax, not 0.167*vcmax

commit 2123751ef1bde41b860d326f378aecb1c5b62a9a
Author: rgknox <rgknox@gmail.com>
Date:   Tue Jan 12 13:13:27 2016 -0800

    updates/fixes/review of size-composition structured output

commit 0bb4ac9864e2956f2738a4d89e314084eb650260
Author: rgknox <rgknox@gmail.com>
Date:   Mon Jan 11 18:49:00 2016 -0800

    comparing JAH diffs with RGK diffs, rectifying differences

commit 14204ace426b45f223635b84e5a084d139cb5c74
Merge: c20215b 9a527bb
Author: Ryan Knox <rgknox@n0002.scs00>
Date:   Mon Jan 11 17:05:46 2016 -0800

    resolved trival merge conflict between branches

commit c20215befcef1cc0b8b2ee7d8742f583001506e4
Author: jenniferholm <jaholm@lbl.gov>
Date:   Mon Jan 11 14:04:52 2016 -0800

    PARTIAL - Updated size class distriution and mortality diagnostics

commit 9a527bbc215882de13fb4770647cebe33480f96f
Author: Ryan Knox <rgknox@n0002.scs00>
Date:   Mon Jan 11 12:06:18 2016 -0800

    Porting of master (120) to lawrencium LR2 partition. Minor bug fix in EDInitMod.F90.
    
    Configuration and machine files were added to lawrencium-lr2.
    Some extra changes were required beyond what had been established with ACME, as cime-gptl
    build were having trouble identifying if the sys/time.h library was available to provide
    machine time. It was also having trouble printing errors correctly, this was enabled by
    passing c-compiler directives in config_compilers.xml.  The bug fix in EDInitMod.F90
    placed a filter on the initd values read in from the pft parameter file, thus preventing
    the model from trying to initialize cohorts from pfts with zero initial density
    (this prevents div0's).
    
    Test suite: aux_clm45
    Test baseline: none
    Test namelist changes: none
    Test status: [bit for bit, roundoff, climate changing]
    
    DONE SMS_Ld5.f19_g16.ICLM45ED.lawrencium-lr2_intel.clm-edTest : (test finished, successful coupler log)
          --- Test Functionality: ---
        PASS SMS_Ld5.f19_g16.ICLM45ED.lawrencium-lr2_intel.clm-edTest : successful coupler log
        PASS SMS_Ld5.f19_g16.ICLM45ED.lawrencium-lr2_intel.clm-edTest.memleak
        --- Test time is 46 seconds ---
    
    DONE ERS_D_Mmpi-serial_Ld5.1x1_brazil.ICLM45ED.lawrencium-lr2_intel.clm-edTest : (test finished, successful coupler log)
         --- Test Functionality  ---:
        /global/home/users/rgknox/Models/ed-clm-lcport2/cime/scripts/Tools/component_compare.sh: line 318: //global/scratch/rgknox/tools/cprnc/cprnc: No such file or directory
        FAIL ERS_D_Mmpi-serial_Ld5.1x1_brazil.ICLM45ED.lawrencium-lr2_intel.clm-edTest.clm2.h0.nc : test compare clm2.h0 (.base and .rest files)
        /global/home/users/rgknox/Models/ed-clm-lcport2/cime/scripts/Tools/component_compare.sh: line 318: //global/scratch/rgknox/tools/cprnc/cprnc: No such file or directory
        FAIL ERS_D_Mmpi-serial_Ld5.1x1_brazil.ICLM45ED.lawrencium-lr2_intel.clm-edTest.cpl.hi.nc : test compare cpl.hi (.base and .rest files)
        FAIL ERS_D_Mmpi-serial_Ld5.1x1_brazil.ICLM45ED.lawrencium-lr2_intel.clm-edTest : test functionality summary (ERS_test)
        PASS ERS_D_Mmpi-serial_Ld5.1x1_brazil.ICLM45ED.lawrencium-lr2_intel.clm-edTest.memleak
        --- Test time is 59 seconds ---
    
    DONE SMS_Ld5.f10_f10.ICLM45ED.lawrencium-lr2_intel.clm-edTest : (test finished, successful coupler log)
          --- Test Functionality: ---
        PASS SMS_Ld5.f10_f10.ICLM45ED.lawrencium-lr2_intel.clm-edTest : successful coupler log
        PASS SMS_Ld5.f10_f10.ICLM45ED.lawrencium-lr2_intel.clm-edTest.memleak
        --- Test time is 34 seconds ---
    
    RUN ERS_D_Ld5.f19_g16.ICLM45ED.lawrencium-lr2_intel.clm-edTest.160110-203643
    
    DONE SMS_D_Mmpi-serial_Ld5.5x5_amazon.ICLM45ED.lawrencium-lr2_intel.clm-edTest : (test finished, successful coupler log)
          --- Test Functionality: ---
        PASS SMS_D_Mmpi-serial_Ld5.5x5_amazon.ICLM45ED.lawrencium-lr2_intel.clm-edTest : successful coupler log
        PASS SMS_D_Mmpi-serial_Ld5.5x5_amazon.ICLM45ED.lawrencium-lr2_intel.clm-edTest.memleak
        --- Test time is 47 seconds ---
    
    Fixes: Addresses teamwork task: "Develop consolidated codebase from which to start":
    
        https://ngeetropics.teamwork.com/tasks/5048570
    
    User interface changes?: machine files are intended to be buffered from the user.
    
    Code review: self

commit 1b1d3d7f68fb2bfa0c9ec8a249ba41320759b7ac
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Dec 21 15:43:37 2015 -0700

    'pull ed4x5fix_n10_r120 tags from svn'

commit 5f06f48c47ec2162257bfed34c2a31a18d27570c
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Dec 16 12:11:00 2015 -0700

    'pull ed4x5fix_n09_r120 tags from svn'

commit 3ec641fd9fd504519f436c390f7a439da5b08f74
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Dec 14 19:02:06 2015 -0700

    Import ed_v0.1.0 unstable science changes.
    
    Created a patch file of changes Rosie considered unstable
    science from the ed_v0.1.0 branch:
    
      svn diff -r68491:r72748 \
        https://svn-ccsm-models.cgd.ucar.edu/clm2/branches/ed_v0.1.0/ > \
        ed_v0.1.0-buggy-science.patch
    
    Patch applied cleanly.
    
    Testing: Branch has not been compiled or tested.

commit a46704e93e327d9b9f6210cdbc7ae88e888877a6
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Dec 14 18:51:49 2015 -0700

    Import ed_v0.1.0 changes into a branch from r120.
    
    Created patch file between clm4_5_1_r097 and
    ed_v010_21_clm4_5_1_r097 tags with the command:
    
      svn diff \
        https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_5_1_r097/ \
        https://svn-ccsm-models.cgd.ucar.edu/clm2/branch_tags/ed_v0.1.0_tags/ed_v010_21_clm4_5_1_r097 > \
        ed_v0.1.0-21_r097.patch
    
    Manually edit patch file to remove property changes. Manually
    edit patch file to change 'models/lnd' to 'components' in patch
    file paths.
    
    There are some failed hunks in SVN_EXTERNAL_DIRECTORIES that
    failed to apply and were ignored. It looks like most of these are
    irrelevent because of cime changes, but one may need to be
    revisited:
    
      https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/refKovenMuszala_tags/rkm_01_scripts4_141023
    
    Testing: Branch has not been compiled or tested.

commit c38dc6f917386d8ab34423633b3d38a8a4ba1129
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Dec 14 17:07:02 2015 -0700

    'pull ed4x5fix_n07_r120 tags from svn'

commit e336366e471c730769f9637965ee4ece9811b5db
Author: Ben Andre <andre@ucar.edu>
Date:   Mon Dec 14 17:00:00 2015 -0700

    'pull ed4x5fix_n06_r120 tags from svn'

commit ec4f58f38c411748ce6a7f7750d1b9c2e524fd82
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Dec 9 16:03:36 2015 -0700

    'pull clm4_5_6_r155 tags from svn'

commit 10b40a6265191ddaa03627c6ac368dd9d3bc7d70
Author: Ben Andre <andre@ucar.edu>
Date:   Wed Dec 9 15:12:01 2015 -0700

    pull clm4_5_1_r120 tags from svn
